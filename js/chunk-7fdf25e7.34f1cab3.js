(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fdf25e7","chunk-097453ce","chunk-3eb77687","chunk-52014ea6","chunk-87e498e2","chunk-51fcd82e","chunk-0670f9e4","chunk-a8114ba8","chunk-e4968c16","chunk-631f8345","chunk-5db6a2f9","chunk-2d0e4caf"],{"00cd":function(e,t,n){"use strict";n("2bf3")},"0546":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:11}},[t("basic-container",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("字典列表")])]),t("div",{staticClass:"clearfix"},[t("avue-crud",{ref:"crud",attrs:{option:e.optionParent,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1),t("el-col",{attrs:{span:13}},[t("basic-container",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("["+e._s(e.dictValue)+"] 字典详情")])]),t("div",{staticClass:"clearfix"},[t("avue-crud",{ref:"crudChild",attrs:{option:e.optionChild,"table-loading":e.loadingChild,data:e.dataChild,permission:e.permissionList,"before-open":e.beforeOpenChild,"before-close":e.beforeCloseChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n              ")]):e._e()]}},{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("7754"),s=n("cee8"),l=n("5880");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{dictValue:"暂无",parentId:-1,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,loadingChild:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],optionParent:s["optionParent"],optionChild:s["optionChild"]}},computed:d(d({},Object(l["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1),viewBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.$refs.crudChild.value.dictValue="",this.$refs.crudChild.value.dictKey="",this.$refs.crudChild.value.sort=0,this.$refs.crudChild.value.isSealed=0,this.$refs.crudChild.value.remark="",this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"parentId"===t.prop&&(t.value=e.id)})),this.$refs.crudChild.rowAdd()},rowSave:function(e,t,n){var a=this,i=d(d({},e),{},{dictKey:-1});Object(r["add"])(i).then((function(){a.onLoadParent(a.pageParent),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),i.onLoadChild(i.pageChild),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})}))},handleRowClick:function(e){this.query={},this.parentId=e.id,this.dictValue=e.dictValue,this.$refs.crudChild.value.code=e.code,this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"code"===t.prop&&(t.value=e.code),"parentId"===t.prop&&(t.value=e.id)})),this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.pageParent,this.query)},rowSaveChild:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoadChild(a.pageChild),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(r["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},beforeCloseChild:function(e){var t=this;this.$refs.crudChild.value.parentId=this.parentId,this.$refs.crudChild.option.column.filter((function(e){"parentId"===e.prop&&(e.value=t.parentId)})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loadingChild=!0,Object(r["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){t.dataChild=e.data.data,t.loadingChild=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"091e":function(e,t,n){},"0983":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}},{key:"menu",fn:function(n){return[t("el-button",{attrs:{type:"text",icon:"el-icon-check",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n      ")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("7754"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{tip:!1,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogWidth:880,column:[{label:"字典编号",prop:"code",search:!0,span:24,rules:[{required:!0,message:"请输入字典编号",trigger:"blur"}]},{label:"字典名称",prop:"dictValue",search:!0,align:"center",rules:[{required:!0,message:"请输入字典名称",trigger:"blur"}]},{label:"上级字典",prop:"parentId",type:"tree",dicData:[],hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级字典",trigger:"click"}]},{label:"字典键值",prop:"dictKey",type:"number",rules:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},{label:"字典排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},{label:"封存",prop:"isSealed",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}],slot:!0,rules:[{required:!0,message:"请选择封存",trigger:"blur"}]},{label:"字典备注",prop:"remark",search:!0,hide:!0}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),viewBtn:this.vaildData(this.permission.dict_view,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){var e=this;Object(r["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},methods:{handleAdd:function(e){this.$refs.crud.value.code=e.code,this.$refs.crud.value.parentId=e.id,this.$refs.crud.option.column.filter((function(t){"code"===t.prop&&(t.value=e.code,t.addDisabled=!0),"parentId"===t.prop&&(t.value=e.id,t.addDisabled=!0)})),this.$refs.crud.rowAdd()},rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDict"])(this.form.id).then((function(e){n.form=e.data.data})),e()},beforeClose:function(e){this.$refs.crud.tableForm={},this.$refs.crud.value.code="",this.$refs.crud.value.parentId="",this.$refs.crud.value.addDisabled=!1,this.$refs.crud.option.column.filter((function(e){"code"===e.prop&&(e.value="",e.addDisabled=!1),"parentId"===e.prop&&(e.value="",e.addDisabled=!1)})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"09e0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("basic-container",[t("avue-crud",e._g(e._b({attrs:{permission:e.permissionList,page:e.page},on:{"update:page":function(t){e.page=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent),[t("template",{slot:"menuLeft"},[e.permission.param_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=window.$crudCommon({data:function(){return{}},computed:{permissionList:function(){return{addBtn:this.vaildData(this.permission.param_add,!1),viewBtn:this.vaildData(this.permission.param_view,!1),delBtn:this.vaildData(this.permission.param_delete,!1),editBtn:this.vaildData(this.permission.param_edit,!1)}}},methods:{}},{name:"system/param"}),r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"0ab6":function(e,t,n){"use strict";n("7eb5")},"0f19":function(e,t,n){"use strict";function a(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.r(t);var i=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:9}},[t("div",{staticClass:"box"},[t("el-scrollbar",[t("basic-container",[t("avue-tree",{attrs:{option:e.treeOption,data:e.treeData},on:{"node-click":e.nodeClick}})],1)],1)],1)]),t("el-col",{attrs:{span:15}},[t("basic-container",[t("el-button-group",[e.permission.region_add?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addChildren}},[e._v("新增下级")]):e._e(),e.permission.region_delete?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("删除")]):e._e(),e.permission.region_import?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload2"},on:{click:e.handleImport}},[e._v("导入")]):e._e(),e.permission.region_export?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")]):e._e(),e.permission.region_debug?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-video-play"},on:{click:e.handleDebug}},[e._v("调试")]):e._e()],1)],1),t("basic-container",[t("avue-form",{ref:"form",attrs:{option:e.regionOption},on:{submit:e.handleSubmit},scopedSlots:e._u([{key:"code",fn:function(n){return a(n),[t("el-input",{attrs:{placeholder:"请输入 区划子编号"},model:{value:e.regionForm.subCode,callback:function(t){e.$set(e.regionForm,"subCode",t)},expression:"regionForm.subCode"}},[t("template",{slot:"prepend"},[e._v(e._s(e.regionForm.parentCode))])],2)]}}]),model:{value:e.regionForm,callback:function(t){e.regionForm=t},expression:"regionForm"}}),t("el-dialog",{attrs:{title:"行政区划数据导入","append-to-body":"",visible:e.excelBox,width:"555px"},on:{"update:visible":function(t){e.excelBox=t}}},[t("avue-form",{attrs:{option:e.excelOption,"upload-after":e.uploadAfter},model:{value:e.excelForm,callback:function(t){e.excelForm=t},expression:"excelForm"}},[t("template",{slot:"excelTemplate"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleTemplate}},[e._v("\n              点击下载"),t("i",{staticClass:"el-icon-download el-icon--right"})])],1)],2)],1),t("el-dialog",{attrs:{title:"行政区划数据调试","append-to-body":"",visible:e.debugBox,width:"350px"},on:{"update:visible":function(t){e.debugBox=t}}},[t("avue-form",{attrs:{option:e.debugOption},model:{value:e.debugForm,callback:function(t){e.debugForm=t},expression:"debugForm"}})],1)],1)],1)],1)},o=[],r=(n("ac67"),n("32ea"),n("a450"),n("8dee"),n("1bc7"),n("f076")),s=n("5a04"),l=n("5880"),c=n("c54a"),d=n("0a5a");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{topCode:"00",treeCode:"",treeParentCode:"",treeData:[],treeOption:{nodeKey:"id",lazy:!0,treeLoad:function(e,t){var n=0===e.level?"00":e.data.id;Object(s["getLazyTree"])(n).then((function(e){t(e.data.data.map((function(e){return p(p({},e),{},{leaf:!e.hasChildren})})))}))},addBtn:!1,menu:!1,size:"small",props:{labelText:"标题",label:"title",value:"value",children:"children"}},regionForm:{},regionOption:{labelWidth:100,column:[{label:"父区划编号",prop:"parentCode",span:24,disabled:!0,rules:[{required:!0,message:"请输入父区划编号",trigger:"blur"}]},{label:"父区划名称",prop:"parentName",span:24,disabled:!0},{label:"区划编号",prop:"code",formslot:!0,span:24,rules:[{required:!0,message:"请输入区划编号",trigger:"blur"}]},{label:"区划子编号",prop:"subCode",display:!1},{label:"区划名称",prop:"name",span:24,rules:[{required:!0,message:"请输入区划名称",trigger:"blur"}]},{label:"区划等级",prop:"regionLevel",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=region",props:{label:"dictValue",value:"dictKey"},dataType:"number",span:24,rules:[{required:!0,message:"请选择区划等级",trigger:"blur"}]},{label:"区划排序",prop:"sort",type:"number",span:24,rules:[{required:!0,message:"请输入区划排序",trigger:"blur"}]},{label:"区划备注",prop:"remark",type:"textarea",minRows:6,span:24}]},excelBox:!1,excelForm:{},excelOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"模板上传",prop:"excelFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 .xls,.xlsx 标准格式文件",action:"/api/blade-system/region/import-region"},{label:"数据覆盖",prop:"isCovered",type:"switch",align:"center",width:80,dicData:[{label:"否",value:0},{label:"是",value:1}],value:0,slot:!0,rules:[{required:!0,message:"请选择是否覆盖",trigger:"blur"}]},{label:"模板下载",prop:"excelTemplate",formslot:!0,span:24}]},debugBox:!1,debugForm:{},debugOption:{labelWidth:50,submitBtn:!1,emptyBtn:!1,column:[{label:"省份",prop:"province",type:"select",props:{label:"name",value:"code"},cascaderItem:["city","district"],dicUrl:"/api/blade-system/region/select",span:24},{label:"地市",prop:"city",type:"select",props:{label:"name",value:"code"},dicFlag:!1,dicUrl:"/api/blade-system/region/select?code={{key}}",span:24},{label:"区县",prop:"district",type:"select",props:{label:"name",value:"code"},dicFlag:!1,dicUrl:"/api/blade-system/region/select?code={{key}}",span:24}]}}},watch:{"regionForm.subCode":function(){this.regionForm.code=this.regionForm.parentCode+this.regionForm.subCode},"excelForm.isCovered":function(){if(""!==this.excelForm.isCovered){var e=this.findObject(this.excelOption.column,"excelFile");e.action="/api/blade-system/region/import-region?isCovered=".concat(this.excelForm.isCovered)}}},computed:p(p({},Object(l["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.region_add,!1),viewBtn:this.vaildData(this.permission.region_view,!1),delBtn:this.vaildData(this.permission.region_delete,!1),editBtn:this.vaildData(this.permission.region_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initTree:function(){var e=this;this.treeData=[],Object(s["getLazyTree"])(this.topCode).then((function(t){e.treeData=t.data.data.map((function(e){return p(p({},e),{},{leaf:!e.hasChildren})}))}))},nodeClick:function(e){var t=this,n=this.findObject(this.regionOption.column,"parentCode");n.disabled=!0,this.treeCode=e.id,this.treeParentCode=e.parentId,Object(s["getDetail"])(this.treeCode).then((function(e){t.regionForm=e.data.data,t.regionForm.subCode=t.regionForm.code.replace(t.regionForm.parentCode,"")}))},addChildren:function(){Object(c["c"])(this.regionForm.code)||Object(c["c"])(this.regionForm.name)?this.$message.warning("请先选择一项区划"):(this.regionForm.parentCode=this.regionForm.code,this.regionForm.parentName=this.regionForm.name,this.regionForm.code="",this.regionForm.subCode="",this.regionForm.name="",this.regionForm.regionLevel=5===this.regionForm.regionLevel?5:this.regionForm.regionLevel+1)},handleSubmit:function(e,t,n){var a=this,i=e.parentCode===this.topCode?"":e.parentCode;e.code=i+e.subCode,Object(s["submit"])(e).then((function(){a.$message({type:"success",message:"操作成功!"}),a.initTree(),a.regionForm.subCode="",a.$refs.form.resetForm(),t()}),(function(e){n(),window.console.log(e)}))},handleDelete:function(){var e=this;Object(c["c"])(this.regionForm.code)?this.$message.warning("请先选择一项区划"):this.$confirm("确定将 [".concat(this.regionForm.name,"] 数据删除?"),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.treeCode)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.initTree(),e.regionForm.subCode="",e.$refs.form.resetForm()}))},uploadAfter:function(e,t,n,a){window.console.log(a),this.excelBox=!1,this.initTree(),t()},handleDebug:function(){this.debugBox=!0},handleImport:function(){this.excelBox=!0},handleExport:function(){var e=this;this.$confirm("是否导出行政区划数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.open("/api/blade-system/region/export-region?".concat(e.website.tokenHeader,"=").concat(Object(d["a"])()))}))},handleTemplate:function(){window.open("/api/blade-system/region/export-template?".concat(this.website.tokenHeader,"=").concat(Object(d["a"])()))}}},f=h,g=(n("7e18"),n("829d")),m=Object(g["a"])(f,i,o,!1,null,null,null);t["default"]=m.exports},"14a7":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"accountNumber",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.accountNumber>0?a.accountNumber:"不限制"))])]}},{key:"expireTime",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.expireTime?a.expireTime:"不限制"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.tenant_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.userInfo.role_name.includes("administrator")?t("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-setting"},on:{click:e.handleSetting}},[e._v("授权配置\n      ")]):e._e(),e.userInfo.role_name.includes("administrator")?t("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-coin"},on:{click:e.handleDatasource}},[e._v("数据源配置\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"租户授权配置","append-to-body":"",visible:e.box,width:"450px"},on:{"update:visible":function(t){e.box=t}}},[t("avue-form",{attrs:{option:e.settingOption},on:{submit:e.handleSubmit},model:{value:e.settingForm,callback:function(t){e.settingForm=t},expression:"settingForm"}})],1),t("el-dialog",{attrs:{title:"租户数据源配置","append-to-body":"",visible:e.datasourceBox,width:"450px"},on:{"update:visible":function(t){e.datasourceBox=t}}},[t("avue-form",{attrs:{option:e.datasourceOption},on:{submit:e.handleDatasourceSubmit},model:{value:e.datasourceForm,callback:function(t){e.datasourceForm=t},expression:"datasourceForm"}})],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("ccbe"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,box:!1,datasourceBox:!1,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,viewBtn:!0,dialogWidth:900,dialogClickModal:!1,column:[{label:"租户ID",prop:"tenantId",width:100,search:!0,addDisplay:!1,editDisplay:!1,span:24,rules:[{required:!0,message:"请输入租户ID",trigger:"blur"}]},{label:"租户名称",prop:"tenantName",search:!0,width:180,span:24,rules:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},{label:"联系人",prop:"linkman",width:100,search:!0,rules:[{required:!0,message:"请输入联系人",trigger:"blur"}]},{label:"联系电话",prop:"contactNumber",width:150},{label:"联系地址",prop:"address",span:24,minRows:2,type:"textarea",hide:!0},{label:"账号额度",prop:"accountNumber",width:90,slot:!0,addDisplay:!1,editDisplay:!1},{label:"过期时间",prop:"expireTime",width:180,slot:!0,addDisplay:!1,editDisplay:!1},{label:"绑定域名",prop:"domain",span:24},{label:"系统背景",prop:"backgroundUrl",type:"upload",listType:"picture-img",action:"/api/blade-resource/oss/endpoint/put-file",propsHttp:{res:"data",url:"link"},hide:!0,span:24}]},data:[],settingForm:{},settingOption:{column:[{label:"账号额度",prop:"accountNumber",type:"number",span:24},{label:"过期时间",prop:"expireTime",type:"date",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",span:24}]},datasourceForm:{},datasourceOption:{column:[{label:"数据源",prop:"datasourceId",search:!0,span:24,type:"select",dicUrl:"/api/blade-develop/datasource/select",props:{label:"name",value:"id"},rules:[{required:!0,message:"请选择数据源",trigger:"blur"}]}]}}},computed:c(c({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.tenant_add,!1),viewBtn:this.vaildData(this.permission.tenant_view,!1),delBtn:this.vaildData(this.permission.tenant_delete,!1),editBtn:this.vaildData(this.permission.tenant_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},tenantId:function(){return this.selectionList[0].tenantId}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},beforeOpen:function(e,t){var n=this;["view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){var t=e.data.data;t.accountNumber>0||(t.accountNumber="不限制"),t.expireTime||(t.expireTime="不限制"),n.form=t})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleSetting:function(){var e=this;0!==this.selectionList.length?(1===this.selectionList.length?Object(r["getDetail"])(this.selectionList[0].id).then((function(t){var n=t.data.data;e.settingForm.accountNumber=n.accountNumber,e.settingForm.expireTime=n.expireTime})):(this.settingForm.accountNumber=-1,this.settingForm.expireTime=""),this.box=!0):this.$message.warning("请选择至少一条数据")},handleDatasource:function(){var e=this;0!==this.selectionList.length?1===this.selectionList.length?(Object(r["getDetail"])(this.selectionList[0].id).then((function(t){var n=t.data.data;e.datasourceForm.datasourceId=n.datasourceId})),this.datasourceBox=!0):this.$message.warning("只能选择一条数据"):this.$message.warning("请选择至少一条数据")},handleSubmit:function(e,t,n){var a=this;Object(r["setting"])(this.ids,e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"配置成功!"}),t(),a.box=!1}),(function(e){window.console.log(e),n()}))},handleDatasourceSubmit:function(e,t,n){var a=this;Object(r["datasource"])(this.tenantId,e.datasourceId).then((function(){a.$message({type:"success",message:"配置成功!"}),t(),a.datasourceBox=!1}),(function(e){window.console.log(e),n()}))},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"150a":function(e,t,n){"use strict";n("a482")},"154c":function(e,t,n){},"156f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"category",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.post_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("74b1"),s=n("5880"),l=n("1ca4");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"/api/blade-system/tenant/select",addDisplay:!1,editDisplay:!1,viewDisplay:l["a"].tenantMode,span:24,props:{label:"tenantName",value:"tenantId"},hide:!l["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"岗位类型",prop:"category",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=post_category",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,search:!0,rules:[{required:!0,message:"请选择岗位类型",trigger:"blur"}]},{label:"岗位编号",prop:"postCode",search:!0,rules:[{required:!0,message:"请输入岗位编号",trigger:"blur"}]},{label:"岗位名称",prop:"postName",search:!0,rules:[{required:!0,message:"请输入岗位名称",trigger:"blur"}]},{label:"岗位排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入岗位排序",trigger:"blur"}]},{label:"岗位描述",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[]}},computed:d(d({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.post_add,!1),viewBtn:this.vaildData(this.permission.post_view,!1),delBtn:this.vaildData(this.permission.post_delete,!1),editBtn:this.vaildData(this.permission.post_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"159f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this;e._self._c;return e._m(0)},i=[function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"title"},[e._v("安徽心灵健康护航平台简介")]),t("div",{staticClass:"content"},[t("div",[e._v("\n      设计是什么？UI设计师需要学些什么？如何才能真正学会UI找到理想的工作？\n    ")])])])}],o={name:"h-content"},r=o,s=(n("4d7f"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,"f368819a",null);t["default"]=l.exports},"15e7":function(e,t,n){},"1a43":function(e,t,n){},"1c18":function(e,t,n){"use strict";n("15e7")},"1e4b":function(e,t,n){},"1e73":function(e,t,n){"use strict";n("25e2")},"1f94":function(e,t,n){"use strict";n("6d52")},2004:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("请打开浏览器控制台，然后点击下面的按钮")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleNewError}},[e._v("触发一个错误\n  ")])],1)},o=[],r={methods:{handleNewError:function(){window.console.log(a)}}},s=r,l=n("829d"),c=Object(l["a"])(s,i,o,!1,null,null,null);t["default"]=c.exports},"203b":function(e,t,n){"use strict";n("8355")},2257:function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-video-play",size:"small"},on:{click:function(t){return e.handleDebug(n.row)}}},[e._v("调试\n      ")]):e._e(),e.permission.sms_enable?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-check",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleEnable(n.row)}}},[e._v("启用\n      ")]):e._e()]}},{key:"status",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.statusName))])]}},{key:"category",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.sms_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"手机短信发送调试","append-to-body":"",visible:e.box,width:"550px"},on:{"update:visible":function(t){e.box=t}}},[t("avue-form",{attrs:{option:e.debugOption},on:{submit:e.handleSend},model:{value:e.debugForm,callback:function(t){e.debugForm=t},expression:"debugForm"}})],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("2499"),s=n("5880"),l=n("d9a3");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,box:!1,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:300,labelWidth:100,dialogWidth:880,dialogClickModal:!1,column:[{label:"分类",type:"radio",value:1,span:24,width:100,searchLabelWidth:50,row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=sms",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,rules:[{required:!0,message:"请选择分类",trigger:"blur"}]},{label:"资源编号",prop:"smsCode",span:24,width:200,search:!0,rules:[{required:!0,message:"请输入资源编号",trigger:"blur"}]},{label:"模版ID",prop:"templateId",span:24,width:200,search:!0,rules:[{required:!0,message:"请输入模版ID",trigger:"blur"}]},{label:"accessKey",prop:"accessKey",span:24,overHidden:!0,rules:[{required:!0,message:"请输入accessKey",trigger:"blur"}]},{label:"secretKey",prop:"secretKey",span:24,overHidden:!0,display:!0,hide:!0,rules:[{required:!0,message:"请输入secretKey",trigger:"blur"}]},{label:"regionId",prop:"regionId",span:24,value:"cn-hangzhou",hide:!0,display:!1},{label:"短信签名",prop:"signName",span:24,width:200,rules:[{required:!0,message:"请输入短信签名",trigger:"blur"}]},{label:"是否启用",prop:"status",span:24,width:80,align:"center",slot:!0,addDisplay:!1,editDisplay:!1,viewDisplay:!1},{label:"备注",prop:"remark",span:24,hide:!0}]},data:[],debugForm:{code:""},debugOption:{submitText:"发送",column:[{label:"资源编号",prop:"code",disabled:!0,span:24},{label:"发送手机",prop:"phones",span:24},{label:"发送参数",prop:"params",span:24,placeholder:"例: {'code':2333,'title':'通知标题'}"}]}}},watch:{"form.category":function(){var e=l["a"].toInt(this.form.category);this.$refs.crud.option.column.filter((function(t){"templateId"===t.prop&&(t.label=1===e?"模版内容":"模版ID"),"accessKey"===t.prop&&(t.label=1===e?"apiKey":4===e?"appId":"accessKey"),"secretKey"===t.prop&&(t.display=1!==e,t.label=4===e?"appKey":"secretKey"),"regionId"===t.prop&&(3===e?(t.display=!0,t.value="cn-hangzhou"):t.display=!1)}))}},computed:d(d({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.sms_add,!1),viewBtn:this.vaildData(this.permission.sms_view,!1),delBtn:this.vaildData(this.permission.sms_delete,!1),editBtn:this.vaildData(this.permission.sms_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleEnable:function(e){var t=this;this.$confirm("是否确定启用这条配置?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["enable"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection()}))},handleDebug:function(e){this.box=!0,this.debugForm.code=e.smsCode},handleSend:function(e,t,n){var a=this;Object(r["send"])(e.code,e.phones,e.params).then((function(e){a.$message({type:"success",message:"发送成功!"}),t(),window.console.log(e),a.box=!1}),(function(e){window.console.log(e),n()}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},2287:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.work_send_detail?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDetail(n.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_send_follow?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleImage(n.row,n.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.processDefinitionVersion))])]}},{key:"processIsFinished",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s("finished"===a.processIsFinished?"已完成":"未完成"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("1e69"),l=n("7208");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"流程进度",prop:"processIsFinished",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:d(d({},Object(r["mapGetters"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=d(d({},this.query),{},{category:n.category?Object(l["a"])(n.category):null});this.loading=!0,Object(s["sendList"])(e.currentPage,e.pageSize,Object.assign(n,a)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("5ed1"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"22e1":function(e,t,n){},2457:function(e,t,n){"use strict";t["a"]=[{label:"通用图标",list:["iconfont iconicon_roundadd","iconfont iconicon_compile","iconfont iconicon_glass","iconfont iconicon_roundclose","iconfont iconicon_roundreduce","iconfont iconicon_delete","iconfont iconicon_shakehands","iconfont iconicon_task_done","iconfont iconicon_voipphone","iconfont iconicon_safety","iconfont iconicon_work","iconfont iconicon_study","iconfont iconicon_task","iconfont iconicon_subordinate","iconfont iconicon_star","iconfont iconicon_setting","iconfont iconicon_sms","iconfont iconicon_share","iconfont iconicon_secret","iconfont iconicon_scan_namecard","iconfont iconicon_principal","iconfont iconicon_group","iconfont iconicon_send","iconfont iconicon_scan","iconfont iconicon_search","iconfont iconicon_refresh","iconfont iconicon_savememo","iconfont iconicon_QRcode","iconfont iconicon_im_keyboard","iconfont iconicon_redpacket","iconfont iconicon_photo","iconfont iconicon_qq","iconfont iconicon_wechat","iconfont iconicon_phone","iconfont iconicon_namecard","iconfont iconicon_notice","iconfont iconicon_next_arrow","iconfont iconicon_left","iconfont iconicon_more","iconfont iconicon_details","iconfont iconicon_message","iconfont iconicon_mobilephone","iconfont iconicon_im_voice","iconfont iconicon_GPS","iconfont iconicon_ding","iconfont iconicon_exchange","iconfont iconicon_cspace","iconfont iconicon_doc","iconfont iconicon_dispose","iconfont iconicon_discovery","iconfont iconicon_community_line","iconfont iconicon_cloud_history","iconfont iconicon_coinpurse_line","iconfont iconicon_airplay","iconfont iconicon_at","iconfont iconicon_addressbook","iconfont iconicon_boss","iconfont iconicon_addperson","iconfont iconicon_affiliations_li","iconfont iconicon_addmessage","iconfont iconicon_addresslist","iconfont iconicon_add","iconfont icongithub","iconfont icongitee2"]},{label:"系统图标",list:["iconfont icon-zhongyingwen","iconfont icon-caidan","iconfont icon-rizhi1","iconfont icon-zhuti","iconfont icon-suoping","iconfont icon-bug","iconfont icon-qq1","iconfont icon-weixin1","iconfont icon-shouji","iconfont icon-mima","iconfont icon-yonghu","iconfont icon-yanzhengma","iconfont icon-canshu","iconfont icon-dongtai","iconfont icon-iconset0265","iconfont icon-shujuzhanshi2","iconfont icon-tuichuquanping","iconfont icon-rizhi","iconfont icon-cuowutishitubiao","iconfont icon-debug","iconfont icon-iconset0216","iconfont icon-quanxian","iconfont icon-quanxian","iconfont icon-shuaxin","iconfont icon-bofangqi-suoping","iconfont icon-quanping","iconfont icon-navicon","iconfont icon-biaodan","iconfont icon-liuliangyunpingtaitubiao08","iconfont icon-caidanguanli","iconfont icon-cuowu","iconfont icon-wxbgongju","iconfont icon-tuichu","iconfont icon-daohanglanmoshi02","iconfont icon-changyonglogo27","iconfont icon-biaoge","iconfont icon-baidu1","iconfont icon-tubiao","iconfont icon-souhu","iconfont icon-msnui-360","iconfont icon-iframe","iconfont icon-huanyingye"]}]},2498:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.flow_manager_state?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleState(n.row,n.index)}}},[e._v("变更状态\n      ")]):e._e(),e.permission.flow_manager_image?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleImage(n.row,n.index)}}},[e._v("流程图\n      ")]):e._e(),e.permission.flow_manager_remove?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleSlotDelete(n.row,n.index)}}},[e._v("删除\n      ")]):e._e()]}},{key:"tenantId",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(""===a.tenantId?"通用":a.tenantId))])]}},{key:"version",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.version))])]}},{key:"suspensionState",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(1===a.suspensionState?"激活":"挂起"))])]}},{key:"category",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[t("el-radio-button",{attrs:{label:"1"}},[e._v("通用流程")]),t("el-radio-button",{attrs:{label:"2"}},[e._v("定制流程")])],1)],1)],2),t("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)]),t("el-dialog",{attrs:{title:"流程变更","append-to-body":"",visible:e.stateBox,width:"20%"},on:{"update:visible":function(t){e.stateBox=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"流程状态"}},[t("el-select",{attrs:{placeholder:"请选择",value:""},model:{value:e.flowState,callback:function(t){e.flowState=t},expression:"flowState"}},e._l(e.stateOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.stateBox=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleDoState}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("371f"),l=n("7208");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},mode:"1",selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",stateBox:!1,flowState:"",stateOptions:[{value:"active",label:"激活"},{value:"suspend",label:"挂起"}],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"租户编号",prop:"tenantId",slot:!0,width:120},{label:"流程主键",prop:"id"},{label:"流程标识",prop:"key",search:!0,width:150},{label:"流程名称",prop:"name",width:150},{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,width:100},{label:"流程版本",prop:"version",slot:!0,width:80},{label:"状态",prop:"suspensionState",slot:!0,width:80},{label:"部署时间",prop:"deploymentTime",width:165}]},data:[]}},watch:{mode:function(){this.onLoad(this.page)}},computed:d(d({},Object(r["mapGetters"])(["permission"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permission.flow_manager_remove,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},deploymentIds:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.deploymentId)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["deleteDeployment"])(e.deploymentIds)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection(),e.onLoad(e.page)})):this.$message.warning("请选择至少一条数据")},handleSlotDelete:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["deleteDeployment"])(e.deploymentId)})).then((function(){t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection(),t.onLoad(t.page)}))},handleState:function(e){this.stateBox=!0,this.selectionId=e.id},handleDoState:function(){var e=this;this.flowState?Object(s["changeState"])({processId:this.selectionId,state:this.flowState}).then((function(t){var n=t.data;n.success?(e.$message({type:"success",message:n.msg}),e.stateBox=!1,e.onLoad(e.page)):e.$message({type:"warn",message:n.msg})})):this.$message({type:"warn",message:"请先选择流程状态!"})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/resource-view?processDefinitionId=".concat(e.id),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=d(d({},n),{},{category:n.category?Object(l["a"])(n.category):null,mode:this.mode});this.loading=!0,Object(s["managerList"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("48ff"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"25e2":function(e,t,n){},2762:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[e._v("测试页")])},i=[],o={},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"2ba9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("aa18"),n("982e"),n("f076")),r=n("62ed"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:120,dialogType:"drawer",column:[{label:"服务id",prop:"serviceId",width:"120",search:!0},{label:"服务host",prop:"serverHost",search:!0},{label:"服务ip",prop:"serverIp",width:"160"},{label:"软件环境",prop:"env",width:"80"},{label:"日志名",prop:"title"},{label:"请求方法",prop:"method",width:"80"},{label:"请求接口",prop:"requestUri"},{label:"日志时间",prop:"createTime",width:"180"},{label:"用户代理",prop:"userAgent",span:24,hide:!0},{label:"请求数据",prop:"params",type:"textarea",span:24,minRows:2,hide:!0}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.log_api_view,!1)}}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getApiLogs"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getApiList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"2bf3":function(e,t,n){},"34c1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-main"},[t("el-row",{staticStyle:{height:"100%"},attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("left-meun")],1),t("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[t("div",{staticStyle:{height:"100%"}},[t("crumbs-bar"),t("div",{staticClass:"left-main-body"},[t("router-view")],1)],1)])],1)],1)},i=[],o=n("41ce"),r=n("47d9"),s={components:{crumbsBar:o["default"],LeftMeun:r["default"]},name:"layout"},l=s,c=(n("d5e6"),n("829d")),d=Object(c["a"])(l,a,i,!1,null,"7033a8dd",null);t["default"]=d.exports},"363c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"category",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.notice_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("2905"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,dialogWidth:950,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,excelBtn:!0,dialogClickModal:!1,column:[{label:"通知标题",prop:"title",span:24,row:!0,search:!0,rules:[{required:!0,message:"请输入通知标题",trigger:"blur"}]},{label:"通知类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=notice",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"通知时间",prop:"releaseTimeRange",type:"datetime",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",searchRange:!0,hide:!0,addDisplay:!1,editDisplay:!1,viewDisplay:!1,search:!0,rules:[{required:!0,message:"请输入通知时间",trigger:"blur"}]},{label:"通知日期",prop:"releaseTime",type:"date",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"请输入通知日期",trigger:"click"}]},{label:"通知内容",prop:"content",component:"AvueUeditor",options:{action:"/api/blade-resource/oss/endpoint/put-file",props:{res:"data",url:"link"}},hide:!0,minRows:6,span:24}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.notice_add,!1),viewBtn:this.vaildData(this.permission.notice_view,!1),delBtn:this.vaildData(this.permission.notice_delete,!1),editBtn:this.vaildData(this.permission.notice_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getNotice"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.query.releaseTimeRange,i=c({},n);a&&(i=c(c({},n),{},{releaseTime_datege:a[0],releaseTime_datelt:a[1]},this.query),i.releaseTimeRange=null),this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,i).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},3675:function(e,t,n){"use strict";n("a510")},"367a":function(e,t,n){"use strict";n("9b97")},3682:function(e,t,n){},"36a3":function(e,t,n){},"37fc":function(e,t,n){"use strict";n.r(t);n("a450"),n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleDesign(n.row.name)}}},[e._v("设计\n      ")]):e._e(),e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handlePreview(n.row.name)}}},[e._v("预览\n      ")]):e._e()]}},{key:"name",fn:function(n){var a=n.row;return[t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handlePreview(a.name)}}},[e._v(e._s(a.name))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")])],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("88ca"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,viewBtn:!0,dialogClickModal:!1,column:[{label:"文件名",prop:"name",search:!0,slot:!0},{label:"创建时间",prop:"createTime"},{label:"更新时间",prop:"updateTime"}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:!1,viewBtn:!1,delBtn:!0,editBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handlePreview:function(e){this.$router.push({path:"/myiframe/urlPath?name=preview-".concat(e,"&src=").concat(this.website.reportUrl,"/preview?_u=blade-").concat(e)})},handleDesign:function(e){this.$router.push({path:"/myiframe/urlPath?name=designer-".concat(e,"&src=").concat(this.website.reportUrl,"/designer?_u=blade-").concat(e)})},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"390c":function(e,t,n){},4126:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"psychological"},[t("h-content")],1)},i=[],o=n("159f"),r={components:{hContent:o["default"]},name:"psychological"},s=r,l=(n("8949"),n("829d")),c=Object(l["a"])(s,a,i,!1,null,"34fafbcc",null);t["default"]=c.exports},"41c2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"suspensionState",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(1===a.suspensionState?"激活":"挂起"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-dialog",{attrs:{title:"流程删除","append-to-body":"",visible:e.followBox,width:"20%"},on:{"update:visible":function(t){e.followBox=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"删除理由"}},[t("el-input",{attrs:{placeholder:"请输入删除理由"},model:{value:e.deleteReason,callback:function(t){e.deleteReason=t},expression:"deleteReason"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.followBox=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleDelete}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("371f");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionId:"",processInstanceId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},followBox:!1,deleteReason:"",option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,dialogWidth:900,menuWidth:100,dialogClickModal:!1,column:[{label:"执行id",prop:"executionId",search:!0,width:320},{label:"流程key",prop:"processDefinitionKey",search:!0},{label:"实例id",prop:"processInstanceId",search:!0,width:320},{label:"状态",prop:"suspensionState",slot:!0,width:80},{label:"发起人",prop:"startUser",width:100},{label:"开始时间",prop:"startTime",width:165}]},data:[]}},computed:c(c({},Object(r["mapGetters"])(["permission"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permission.flow_follow_delete,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowDel:function(e){this.followBox=!0,this.selectionId=e.id,this.processInstanceId=e.processInstanceId},handleDelete:function(){var e=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["deleteProcessInstance"])({deleteReason:e.deleteReason,processInstanceId:e.processInstanceId})})).then((function(){e.onLoad(e.page),e.followBox=!1,e.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["followList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=(n("1e73"),n("829d")),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"41ce":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"crumbs"},[t("div",[e._v("当前位置："+e._s(e.crumbs))]),t("div",{staticClass:"back",on:{click:e.gotoBack}},[e._v("返回上一层")])])},i=[],o=(n("a450"),{name:"crumbs-bar",watch:{$route:function(e){this.crumbs="";for(var t=1;t<e.matched.length;t++)this.crumbs+=1===t?e.matched[t].name:" / "+e.matched[t].name}},data:function(){return{crumbs:""}},mounted:function(){for(var e=1;e<this.$route.matched.length;e++)this.crumbs+=1===e?this.$route.matched[e].name:" / "+this.$route.matched[e].name},methods:{gotoBack:function(){this.$router.go(-1)}}}),r=o,s=(n("89ec"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,"32a53da6",null);t["default"]=l.exports},"41cf":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("表格例子")]),t("avue-crud",{attrs:{option:e.option,page:e.page,data:e.data},on:{"update:page":function(t){e.page=t}}})],1)},i=[],o={data:function(){return{page:{total:122},data:[{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"}],option:{column:[{label:"用户名",prop:"username",span:14,row:!0},{label:"姓名",prop:"name",span:14,row:!0},{label:"密码",prop:"password",type:"password",span:14,row:!0},{label:"确认密码",prop:"newpassword",type:"password",hide:!0,span:14,row:!0},{label:"申请日期",prop:"date",type:"date",span:14,row:!0},{label:"个性签名",prop:"textarea",type:"textarea",minRows:8,span:24,overHidden:!0,row:!0}]}}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"454e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination"},[t("div",{staticClass:"pre",on:{click:function(t){return e.handleCurrentPage(e.currentPage-1)}}},[e._v("上一页")]),t("div",{staticClass:"pages"},e._l(e.totalList,(function(n){return t("div",{key:n,class:{active:e.currentPage===n},on:{click:function(t){return e.handleCurrentPage(n)}}},[e._v(e._s(n))])})),0),t("div",{staticClass:"next",on:{click:function(t){return e.handleCurrentPage(e.currentPage+1)}}},[e._v("下一页")]),t("div",{staticClass:"total"},[e._v("共"+e._s(e.totalAll)+"页")])])},i=[],o=(n("e680"),{name:"h-pagination",props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},pageNum:{type:Number,default:1}},data:function(){return{totalAll:0,currentPage:1,totalList:[]}},mounted:function(){this.totalList=[],this.totalAll=this.total/10,this.currentPage=this.pageNum;for(var e=0;e<this.totalAll;e++)this.totalList.push(e+1)},methods:{handleCurrentPage:function(e){0===e||e>this.totalAll||(this.currentPage=e,this.$emit("handleCurrentPage",e))}}}),r=o,s=(n("508c"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,"6dceea93",null);t["default"]=l.exports},"464a":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-video-play",size:"small"},on:{click:function(t){return e.handleDebug(n.row)}}},[e._v("调试\n      ")]):e._e(),e.permission.oss_enable?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-check",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleEnable(n.row)}}},[e._v("启用\n      ")]):e._e()]}},{key:"status",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.statusName))])]}},{key:"category",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.oss_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"对象存储上传调试","append-to-body":"",visible:e.box,width:"550px"},on:{"update:visible":function(t){e.box=t}}},[t("avue-form",{ref:"form",attrs:{option:e.debugOption},on:{submit:e.handleSubmit},model:{value:e.debugForm,callback:function(t){e.debugForm=t},expression:"debugForm"}})],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("368f"),s=n("5880"),l=n("d9a3");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,box:!1,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:300,labelWidth:100,dialogWidth:880,dialogClickModal:!1,column:[{label:"分类",type:"radio",value:1,span:24,width:100,searchLabelWidth:50,row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=oss",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,rules:[{required:!0,message:"请选择分类",trigger:"blur"}]},{label:"资源编号",prop:"ossCode",span:24,width:120,search:!0,rules:[{required:!0,message:"请输入资源编号",trigger:"blur"}]},{label:"资源地址",prop:"endpoint",span:24,rules:[{required:!0,message:"请输入资源地址",trigger:"blur"}]},{label:"空间名",prop:"bucketName",span:24,width:120,rules:[{required:!0,message:"请输入空间名",trigger:"blur"}]},{label:"accessKey",prop:"accessKey",span:24,search:!0,width:200,overHidden:!0,rules:[{required:!0,message:"请输入accessKey",trigger:"blur"}]},{label:"secretKey",prop:"secretKey",span:24,width:200,overHidden:!0,rules:[{required:!0,message:"请输入secretKey",trigger:"blur"}]},{label:"appId",prop:"appId",span:24,hide:!0,display:!1},{label:"region",prop:"region",span:24,hide:!0,display:!1},{label:"是否启用",prop:"status",span:24,width:80,align:"center",slot:!0,addDisplay:!1,editDisplay:!1,viewDisplay:!1},{label:"备注",prop:"remark",span:24,hide:!0}]},data:[],debugForm:{code:""},debugOption:{submitText:"提交",column:[{label:"资源编号",prop:"code",disabled:!0,span:24},{label:"上传背景",prop:"backgroundUrl",type:"upload",listType:"picture-img",action:"/api/blade-resource/oss/endpoint/put-file",propsHttp:{res:"data",url:"link"},span:24}]}}},watch:{"form.category":function(){var e=l["a"].toInt(this.form.category);this.$refs.crud.option.column.filter((function(t){"appId"===t.prop&&(t.display=4===e),"region"===t.prop&&(t.display=4===e)}))},"debugForm.code":function(){var e=this.findObject(this.debugOption.column,"backgroundUrl");e.action="/api/blade-resource/oss/endpoint/put-file?code=".concat(this.debugForm.code)}},computed:d(d({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.oss_add),viewBtn:this.vaildData(this.permission.oss_view),delBtn:this.vaildData(this.permission.oss_delete),editBtn:this.vaildData(this.permission.oss_edit)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleEnable:function(e){var t=this;this.$confirm("是否确定启用这条配置?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["enable"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection()}))},handleDebug:function(e){this.box=!0,this.debugForm.code=e.ossCode,this.debugForm.backgroundUrl=""},handleSubmit:function(e,t){this.$message({type:"success",message:"获取到图片地址:[".concat(e.backgroundUrl,"]")}),t()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},4710:function(e,t,n){"use strict";n("d71b")},"47d9":function(e,t,n){"use strict";n.r(t);n("a450");var a=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"left-meun"},e._l(e.meunList[e.$route.meta.pname],(function(n,a){return t("li",{key:a,class:{active:e.selectMenu===n.type},on:{click:function(t){return e.changeMenu(n)}}},[t("div",[e._v(e._s(n.name))])])})),0)},i=[],o={name:"left-meun",data:function(){return{meunList:{platform:[{type:"platform-introduction",name:"平台介绍",path:"/portal/platform-introduction/index"},{type:"work-dynamics",name:"工作动态",path:"/portal/platform-introduction/work-dynamics"},{type:"notice-announcement",name:"通知公告",path:"/portal/platform-introduction/notice-announcement"},{type:"policy",name:"政策法规",path:"/portal/platform-introduction/policy"},{type:"people-response",name:"民生反响",path:"/portal/platform-introduction/people-response"}],psychological:[{type:"psychological",name:"心理咨询介绍",path:"/portal/psychological/index"},{type:"experts",name:"心理专家库",path:"/portal/psychological/experts"},{type:"consultation-process",name:"咨询流程",path:"/portal/psychological/consultation-process"},{type:"asked-questions",name:"常见问题解答",path:"/portal/psychological/asked-questions"}]},selectMenu:""}},watch:{$route:function(e){this.selectMenu=e.meta.type}},mounted:function(){this.selectMenu=this.$route.meta.type},methods:{changeMenu:function(e){this.selectMenu=e.type,this.$router.push(e.path)}}},r=o,s=(n("5471"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,"70be4d5c",null);t["default"]=l.exports},48363:function(e,t,n){},"48ff":function(e,t,n){"use strict";n("1a43")},"4c24":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("basic-container",[t("avue-form",{attrs:{option:e.option},on:{"tab-click":e.handleTabClick,submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},i=[],o=(n("a450"),n("cadc")),r=n("c0c7"),s=n("897d"),l=n.n(s),c=n("d9a3"),d={data:function(){return{index:0,option:o["default"],form:{}}},created:function(){this.handleWitch()},methods:{handleSubmit:function(e,t){var n=this;0===this.index?Object(r["updateInfo"])(e).then((function(e){e.data.success?n.$message({type:"success",message:"修改信息成功!"}):n.$message({type:"error",message:e.data.msg}),t()}),(function(e){window.console.log(e),t()})):Object(r["updatePassword"])(l()(e.oldPassword),l()(e.newPassword),l()(e.newPassword1)).then((function(e){e.data.success?n.$message({type:"success",message:"修改密码成功!"}):n.$message({type:"error",message:e.data.msg}),t()}),(function(e){window.console.log(e),t()}))},handleWitch:function(){var e=this;0===this.index&&Object(r["getUserInfo"])().then((function(t){var n=t.data.data;e.form={id:n.id,avatar:n.avatar,name:n.name,realName:n.realName,phone:n.phone,email:n.email}}))},handleTabClick:function(e){this.index=c["a"].toInt(e.index),this.handleWitch()}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"4d7f":function(e,t,n){"use strict";n("541b")},"508c":function(e,t,n){"use strict";n("7f19")},"537f":function(e,t,n){"use strict";n.r(t);n("3441"),n("a450");var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.dialogFormVisible,"append-to-body":!0,width:"600px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.btnCancel}},[t("template",{slot:"title"},[t("div",{staticStyle:{color:"#02a7f1"}},[e._v(e._s(e.title))])]),t("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"栏目名称:",prop:"name"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),t("el-form-item",{attrs:{label:"上级栏目:",prop:"parentId"}},[t("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"如果选择主目录则不选",disabled:"主目录"===e.formData.class},model:{value:e.formData.parentId,callback:function(t){e.$set(e.formData,"parentId",t)},expression:"formData.parentId"}},e._l(e.list,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"路由地址:",prop:"path"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入"},model:{value:e.formData.path,callback:function(t){e.$set(e.formData,"path",t)},expression:"formData.path"}})],1),t("el-form-item",{attrs:{label:"目录类别:",prop:"class"}},[t("el-radio-group",{model:{value:e.formData.class,callback:function(t){e.$set(e.formData,"class",t)},expression:"formData.class"}},[t("el-radio",{attrs:{label:"主目录"}}),t("el-radio",{attrs:{label:"子目录"}})],1)],1),t("el-form-item",{attrs:{label:"显示模式:",prop:"displayMode"}},[t("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},model:{value:e.formData.displayMode,callback:function(t){e.$set(e.formData,"displayMode",t)},expression:"formData.displayMode"}},[t("el-option",{attrs:{label:"主目录",value:0}}),t("el-option",{attrs:{label:"单页",value:1}}),t("el-option",{attrs:{label:"列表",value:2}}),t("el-option",{attrs:{label:"URL",value:3}})],1)],1),t("el-form-item",{attrs:{label:"显示排序:",prop:"sort"}},[t("el-input-number",{staticStyle:{width:"200px"},attrs:{min:1},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1),t("el-form-item",{attrs:{label:"发布范围:",prop:"releaseScope"}},[t("el-checkbox-group",{model:{value:e.formData.releaseScope,callback:function(t){e.$set(e.formData,"releaseScope",t)},expression:"formData.releaseScope"}},[t("el-checkbox",{attrs:{label:"PC",name:"formData.releaseScope"}}),t("el-checkbox",{attrs:{label:"移动端",name:"formData.releaseScope"}})],1)],1),t("el-form-item",{attrs:{label:"是否公开:",prop:"isShow"}},[t("el-switch",{model:{value:e.formData.isShow,callback:function(t){e.$set(e.formData,"isShow",t)},expression:"formData.isShow"}})],1),t("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[t("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)],1),e.showBtn?t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.btnCancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addorEditColumn}},[e._v("确 定")])],1):e._e()],2)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("f076")),r=(n("352e"),n("2a53")),s=n("a9b5"),l=n("84df");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){var e=this,t=function(t,n,a){"子目录"===e.formData.class&&""==n?a(new Error("请选择上级栏目")):a()};return{dialogFormVisible:!1,formData:{name:"",parentId:"",path:"",class:"",displayMode:"",sort:"",releaseScope:[],isShow:!0,remark:""},rules:{name:[{required:!0,message:"请输入栏目名称",trigger:"blur"}],parentId:[{validator:t,message:"请选择上级栏目",trigger:"blur"}],path:[{required:!0,message:"请输入路由地址",trigger:"blur"}],class:[{required:!0,message:"请选择目录类别",trigger:"blur"}],displayMode:[{required:!0,message:"请选择显示模式",trigger:"blur"}],sort:[{required:!0,message:"请输入显示排序",trigger:"blur"}],releaseScope:[{required:!0,message:"请输入发布范围",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},props:{list:{type:Array,required:!0},title:{type:String,required:!0},showBtn:{type:Boolean,required:!0}},methods:{addorEditColumn:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=d({},this.formData),t.releaseScope.length>1?t.releaseScope="0,1":"PC"===t.releaseScope[0]?t.releaseScope="0":"移动端"===t.releaseScope[0]?t.releaseScope="1":t.releaseScope="","主目录"===t.class&&(t.parentId=0),!0===t.isShow?t.isShow=0:t.isShow=1,"编辑栏目"===this.title?t.updateTime=Object(l["b"])(new Date):t.createTime=Object(l["b"])(new Date),e.prev=5,e.next=8,this.$refs.form.validate();case 8:if("编辑栏目"!==this.title){e.next=13;break}return e.next=11,Object(s["updateColumn"])(t);case 11:e.next=15;break;case 13:return e.next=15,Object(s["addColumn"])(t);case 15:this.$parent.getList(),this.dialogFormVisible=!1,this.$message.success("操作成功！"),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](5),console.log(e.t0);case 23:case"end":return e.stop()}}),e,this,[[5,20]])})));function t(){return e.apply(this,arguments)}return t}(),btnCancel:function(){this.formData={name:"",parentId:"",path:"",class:"",displayMode:"",sort:"",releaseScope:[],isShow:!0,remark:""},this.$refs.form.clearValidate(),this.dialogFormVisible=!1}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,"617075a6",null);t["default"]=f.exports},"541b":function(e,t,n){},5471:function(e,t,n){"use strict";n("67e1")},5589:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("表单例子")]),t("avue-form",{attrs:{option:e.option},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],o={data:function(){return{form:{},option:{labelWidth:110,column:[{label:"用户名",prop:"username",row:!0},{label:"密码",prop:"password",type:"password",row:!0},{label:"再次输入密码",prop:"password",type:"newpassword",row:!0},{label:"申请日期",prop:"date",type:"date",row:!0},{label:"个性签名",prop:"textarea",type:"textarea",minRows:8,row:!0}]}}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"561f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("数据展示")]),t("avue-data-pay",{attrs:{option:e.option}})],1)},i=[],o={data:function(){var e=this;return{option:{span:8,data:[{title:"后台模版",src:"/img/bg/vip1.png",money:"299",dismoney:"199",tip:"/永久",color:"#808695",subtext:"购买",click:function(){e.box=!0},list:[{title:"点击体验",href:"https://cli1.avue.top",check:!0},{title:"面向全屏幕尺寸的响应式适配能力",check:!0},{title:"支持IE9+等系列浏览器",check:!0},{title:"全新的前端错误日志监控机制",check:!0},{title:"基于最新的avuex底层开发",check:!0},{title:"前端路由动态服务端加载",check:!0},{title:"灵活的多款主题自由配置",check:!0},{title:"模块的可拆卸化,达到开箱即用",check:!0},{title:"免费的私人git私服"},{title:"专属会员群"},{title:"前端最新干货分享"},{title:"赠送 Avue-cli脚手架文档（价值¥59.99）",href:"https://www.kancloud.cn/smallwei/avue"},{title:"赠送 Avue 修仙系列视频教程",href:"https://www.bilibili.com/video/av24644922",check:!0}]},{title:"Avuex源码",src:"/img/bg/vip2.png",color:"#ffa820",money:"999",dismoney:"399",tip:"/永久",subtext:"购买",click:function(){e.box=!0},list:[{title:"一键集成表格的导出excel,打印,等功能",check:!0},{title:"底层代码可重用轻松对接多个UI框架",check:!0},{title:"底层更加完善的开发错误调试机制",check:!0},{title:"一套代码多个终端自适应",check:!0},{title:"一键集成表格的导出excel，打印，等常用功能",check:!0},{title:"表格的批量操作,表单的级联操作更加便捷",check:!0},{title:"新增大量常用组件（搜索，选项卡）",check:!0},{title:"新增大量全新可配置的骚属性",check:!0},{title:"丰富的数据展示模版组件包",check:!0},{title:"专属的开发者文档，助你快速掌握",check:!0},{title:"赠送 Avue-cli脚手架文档（价值¥59.99）",href:"https://www.kancloud.cn/smallwei/avue",check:!0},{title:"赠送 Avue 修仙系列视频教程",href:"https://www.bilibili.com/video/av24644922",check:!0}]},{title:"全家桶",src:"/img/bg/vip3.png",color:"#ef4868",money:"999.99",dismoney:"399.99",tip:"/永久",subtext:"购买",click:function(){e.box=!0},list:[{title:"授权商业化开发,永久更新授权使用",check:!0},{title:"后期更新和新产品将全部免费",check:!0},{title:"拥有avuex系列的全部特权和全部源码",check:!0},{title:"免费的私人git私服",check:!0},{title:"专属会员群",check:!0},{title:"前端最新干货分享",check:!0},{title:"赠送 Avue-cli脚手架文档（价值¥59.99）",href:"https://www.kancloud.cn/smallwei/avue",check:!0},{title:"赠送 Avue 修仙系列视频教程",href:"https://www.bilibili.com/video/av24644922",check:!0}]}]}}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},5670:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.work_todo_handle?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleWork(n.row)}}},[e._v("处理\n      ")]):e._e(),e.permission.work_todo_detail?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDetail(n.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_todo_follow?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleImage(n.row,n.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("1e69"),l=n("7208");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:d(d({},Object(r["mapGetters"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=d(d({},this.query),{},{category:n.category?Object(l["a"])(n.category):null});this.loading=!0,Object(s["todoList"])(e.currentPage,e.pageSize,Object.assign(n,a)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("ac70"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"56c4":function(e,t,n){},5789:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("basic-container",[t("h3",[e._v("表格权限控制")]),t("avue-crud",{ref:"crud",attrs:{permission:e.permission,option:e.option,data:e.data},scopedSlots:e._u([{key:"expand",fn:function(t){return[e._v("\n        "+e._s(t)+"\n      ")]}}])})],1),t("basic-container",[e._v("\n    权限开关\n    "),t("el-switch",{attrs:{"active-value":!1,"inactive-value":!0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),t("p",[e._v(" 具体参考"),t("a",{attrs:{href:"https://avuex.avue.top/#/doc/crud-permission"}},[e._v("https://avuex.avue.top/#/doc/crud-permission")])])],1)],1)},i=[],o={data:function(){return{text:!1,permission:{},option:{expand:!0,column:[{label:"姓名",prop:"name"},{label:"年龄",prop:"sex"}]},data:[{id:1,name:"张三",sex:12},{id:2,name:"李四",sex:20}]}},watch:{text:function(){!0===this.text?this.permission={delBtn:!1,addBtn:!1}:this.permission={delBtn:!0,addBtn:!0}}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"585b":function(e,t,n){},"58d0":function(e,t,n){},"5ad2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("标签")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.push("/test/index")}}},[e._v("打开一个页面\n  ")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.$avueRouter.closeTag("/test/index")}}},[e._v("关闭打开的页面\n  ")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.$avueRouter.closeTag()}}},[e._v("关闭本标签\n  ")])],1)},i=[],o={methods:{}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"5ae6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.attach_download?t("el-button",{attrs:{type:"text",icon:"el-icon-download",size:"small"},on:{click:function(t){return e.handleDownload(n.row)}}},[e._v("下载\n      ")]):e._e()]}},{key:"attachSize",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s("".concat(a.attachSize," KB")))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.attach_upload?t("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-upload2"},on:{click:e.handleUpload}},[e._v("上 传\n      ")]):e._e(),e.permission.attach_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"附件管理","append-to-body":"",visible:e.attachBox,width:"555px"},on:{"update:visible":function(t){e.attachBox=t}}},[t("avue-form",{ref:"form",attrs:{option:e.attachOption,"upload-after":e.uploadAfter},model:{value:e.attachForm,callback:function(t){e.attachForm=t},expression:"attachForm"}})],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("5289"),n("1bc7"),n("f076")),r=n("6044"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},attachBox:!1,selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"附件地址",prop:"link",rules:[{required:!0,message:"请输入附件地址",trigger:"blur"}]},{label:"附件域名",prop:"domain",search:!0,rules:[{required:!0,message:"请输入附件域名",trigger:"blur"}]},{label:"附件名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入附件名称",trigger:"blur"}]},{label:"附件原名",prop:"originalName",search:!0,rules:[{required:!0,message:"请输入附件原名",trigger:"blur"}]},{label:"附件拓展名",prop:"extension",rules:[{required:!0,message:"请输入附件拓展名",trigger:"blur"}]},{label:"附件大小",prop:"attachSize",slot:!0,rules:[{required:!0,message:"请输入附件大小",trigger:"blur"}]}]},data:[],attachForm:{},attachOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"附件上传",prop:"attachFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},action:"/api/blade-resource/oss/endpoint/put-file-attach"}]}}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:!1,editBtn:!1,viewBtn:!1,delBtn:this.vaildData(this.permission.attach_delete,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handleUpload:function(){this.attachBox=!0},uploadAfter:function(e,t,n,a){window.console.log(a),this.attachBox=!1,this.refreshChange(),t()},handleDownload:function(e){window.open("".concat(e.link))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"5bab":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,page:e.page,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("aa18"),n("982e"),n("f076")),r=n("62ed"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:120,dialogType:"drawer",column:[{label:"服务id",prop:"serviceId",search:!0},{label:"服务host",prop:"serverHost",search:!0},{label:"服务ip",prop:"serverIp"},{label:"软件环境",prop:"env",width:"80"},{label:"日志级别",prop:"logLevel"},{label:"日志id",prop:"logId"},{label:"请求接口",prop:"requestUri"},{label:"日志时间",prop:"createTime",width:"180"},{label:"用户代理",prop:"userAgent",span:24,hide:!0},{label:"日志数据",prop:"logData",type:"textarea",span:24,minRows:2,hide:!0},{label:"请求数据",prop:"params",type:"textarea",span:24,minRows:2,hide:!0}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.log_usual_view,!1)}}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getUsualLogs"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getUsualList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"5cee":function(e,t,n){"use strict";n("7f3b")},"5d8a":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")&&1===n.row.category?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n      ")]):e._e()]}},{key:"source",fn:function(e){var n=e.row;return[t("div",{staticStyle:{"text-align":"center"}},[t("i",{class:n.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.menu_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("a6dc"),s=n("5880"),l=n("2457"),c=n("d9a3");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},query:{},loading:!0,selectionList:[],parentId:0,page:{pageSize:10,currentPage:1,total:0},option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicData:[],hide:!0,addDisabled:!1,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,iconList:l["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",search:!0,rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",disabled:!1,dicData:[{label:"否",value:1},{label:"是",value:2}],value:1,rules:[{required:!0,message:"请选择新窗口打开",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",row:!0,span:24,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:2,hide:!0}]},data:[]}},watch:{"form.category":function(){var e=c["a"].toInt(this.form.category);this.$refs.crud.option.column.filter((function(t){"path"===t.prop&&(t.rules[0].required=1===e),"isOpen"===t.prop&&(t.disabled=2===e)}))}},computed:u(u({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initData:function(){var e=this;Object(r["getMenuTree"])().then((function(t){var n=e.findObject(e.option.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.parentId=e.id;var t=this.findObject(this.option.column,"parentId");t.value=e.id,t.addDisabled=!0,this.$refs.crud.rowAdd()},rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(n){var i=n.data.data;e.id=i.id,a.$message({type:"success",message:"操作成功!"}),t(e)}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.$message({type:"success",message:"操作成功!"}),n(e)}),(function(e){window.console.log(e),a()}))},rowDel:function(e,t,n){var a=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){a.$message({type:"success",message:"操作成功!"}),n(e)}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.data=[],e.parentId=0,e.$refs.crud.refreshTable(),e.$refs.crud.toggleSelection(),e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"})})):this.$message.warning("请选择至少一条数据")},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(r["getMenu"])(this.form.id).then((function(e){n.form=e.data.data})),e()},beforeClose:function(e){this.parentId="";var t=this.findObject(this.option.column,"parentId");t.value="",t.addDisabled=!1,e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getLazyList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var a=e.id;Object(r["getLazyList"])(a).then((function(e){n(e.data.data)}))}}},h=p,f=n("829d"),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},"5e0a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,page:e.page,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.code_edit?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",icon:"el-icon-document-copy"},on:{click:function(t){return t.stopPropagation(),e.handleCopy(n.row)}}},[e._v("复制\n      ")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.code_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),t("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-refresh"},on:{click:e.handleBuild}},[e._v("代码生成\n      ")])],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("736a"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],loading:!0,query:{},page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,dialogWidth:900,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,labelWidth:120,menuWidth:250,viewBtn:!0,dialogClickModal:!1,column:[{label:"数据源",prop:"datasourceId",search:!0,span:24,type:"select",dicUrl:"/api/blade-develop/datasource/select",props:{label:"name",value:"id"},rules:[{required:!0,message:"请选择数据源",trigger:"blur"}]},{label:"模块名",prop:"codeName",search:!0,rules:[{required:!0,message:"请输入模块名",trigger:"blur"}]},{label:"服务名",prop:"serviceName",search:!0,rules:[{required:!0,message:"请输入服务名",trigger:"blur"}]},{label:"表名",prop:"tableName",rules:[{required:!0,message:"请输入表名",trigger:"blur"}]},{label:"表前缀",prop:"tablePrefix",hide:!0,rules:[{required:!0,message:"请输入表前缀",trigger:"blur"}]},{label:"主键名",prop:"pkName",hide:!0,rules:[{required:!0,message:"请输入主键名",trigger:"blur"}]},{label:"包名",prop:"packageName",overHidden:!0,rules:[{required:!0,message:"请输入包名",trigger:"blur"}]},{label:"基础业务",prop:"baseMode",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",props:{label:"dictValue",value:"dictKey"},dataType:"number",hide:!0,rules:[{required:!0,message:"请选择基础业务",trigger:"blur"}]},{label:"包装器",prop:"wrapMode",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",props:{label:"dictValue",value:"dictKey"},dataType:"number",hide:!0,rules:[{required:!0,message:"请选择包装器",trigger:"blur"}]},{label:"后端生成路径",prop:"apiPath",span:24,hide:!0,rules:[{required:!0,message:"请输入后端生成路径",trigger:"blur"}]},{label:"前端生成路径",prop:"webPath",span:24,hide:!0,rules:[{required:!0,message:"请输入前端生成路径",trigger:"blur"}]}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.code_add,!1),viewBtn:this.vaildData(this.permission.code_view,!1),delBtn:this.vaildData(this.permission.code_delete,!1),editBtn:this.vaildData(this.permission.code_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleBuild:function(){var e=this;0!==this.selectionList.length?this.$confirm("是否生成选中模块的代码?",{title:"代码生成确认",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["build"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleCopy:function(e){var t=this;Object(r["copy"])(e.id).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"复制成功!"})}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getCode"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"5ed1":function(e,t,n){"use strict";n("091e")},"5f49":function(e,t,n){"use strict";n("fa64")},"60f8":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.role_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{size:"small",icon:"el-icon-setting",plain:""},on:{click:e.handleRole}},[e._v("权限设置\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"角色权限配置","append-to-body":"",visible:e.box,width:"345px"},on:{"update:visible":function(t){e.box=t}}},[t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"菜单权限"}},[t("el-tree",{ref:"treeMenu",attrs:{data:e.menuGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.menuTreeObj,props:e.props}})],1),t("el-tab-pane",{attrs:{label:"数据权限"}},[t("el-tree",{ref:"treeDataScope",attrs:{data:e.dataScopeGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.dataScopeTreeObj,props:e.props}})],1),t("el-tab-pane",{attrs:{label:"接口权限"}},[t("el-tree",{ref:"treeApiScope",attrs:{data:e.apiScopeGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.apiScopeTreeObj,props:e.props}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.box=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("3528"),s=n("5880"),l=n("1ca4");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},box:!1,props:{label:"title",value:"key"},menuGrantList:[],dataScopeGrantList:[],apiScopeGrantList:[],apiGrantList:[],menuTreeObj:[],dataScopeTreeObj:[],apiScopeTreeObj:[],selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,dialogWidth:900,dialogClickModal:!1,column:[{label:"角色名称",prop:"roleName",search:!0,span:24,rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"/api/blade-system/tenant/select",addDisplay:!1,editDisplay:!1,viewDisplay:l["a"].tenantMode,span:24,props:{label:"tenantName",value:"tenantId"},hide:!l["a"].tenantMode,search:l["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"角色别名",prop:"roleAlias",search:!0,span:24,rules:[{required:!0,message:"请输入角色别名",trigger:"blur"}]},{label:"上级角色",prop:"parentId",dicData:[],type:"tree",hide:!0,span:24,props:{label:"title"},rules:[{required:!1,message:"请选择上级角色",trigger:"click"}]},{label:"角色排序",prop:"sort",type:"number",span:24,rules:[{required:!0,message:"请输入角色排序",trigger:"blur"}]},{label:"角色身份",type:"select",dicUrl:"/api/blade-system/dict-biz/dictionary?code=identity",props:{value:"dictKey",label:"dictValue"},prop:"identity",span:24}]},data:[]}},computed:d(d({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.role_add,!1),viewBtn:this.vaildData(this.permission.role_view,!1),delBtn:this.vaildData(this.permission.role_delete,!1),editBtn:this.vaildData(this.permission.role_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},idsArray:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e}}),methods:{initData:function(e){var t=this;Object(r["getRoleTreeById"])(e).then((function(e){var n=t.findObject(t.option.column,"parentId");n.dicData=e.data.data}))},submit:function(){var e=this,t=this.$refs.treeMenu.getCheckedKeys(),n=this.$refs.treeDataScope.getCheckedKeys(),a=this.$refs.treeApiScope.getCheckedKeys();Object(r["grant"])(this.idsArray,t,n,a).then((function(){e.box=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){["add","edit"].includes(t)&&this.initData(this.form.id),e()},handleRole:function(){var e=this;1===this.selectionList.length?(this.menuTreeObj=[],this.dataScopeTreeObj=[],this.apiScopeTreeObj=[],Object(r["grantTree"])().then((function(t){e.menuGrantList=t.data.data.menu,e.dataScopeGrantList=t.data.data.dataScope,e.apiScopeGrantList=t.data.data.apiScope,Object(r["getRole"])(e.ids).then((function(t){e.menuTreeObj=t.data.data.menu,e.dataScopeTreeObj=t.data.data.dataScope,e.apiScopeTreeObj=t.data.data.apiScope,e.box=!0}))}))):this.$message.warning("只能选择一条数据")},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"646e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(n){var a=n.row;return[e.permission.api_scope_setting?t("el-button",{staticStyle:{border:"0","background-color":"transparent !important"},attrs:{type:"text",icon:"el-icon-setting",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDataScope(a)}}},[e._v("权限配置\n      ")]):e._e()]}},{key:"source",fn:function(e){var n=e.row;return[t("div",{staticStyle:{"text-align":"center"}},[t("i",{class:n.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-drawer",{attrs:{title:"[".concat(e.scopeMenuName,"] 接口权限配置"),visible:e.drawerVisible,direction:e.direction,"append-to-body":"","before-close":e.handleDrawerClose,size:"1000px"},on:{"update:visible":function(t){e.drawerVisible=t}}},[t("basic-container",[t("avue-crud",{ref:"crudScope",attrs:{option:e.optionScope,data:e.dataScope,page:e.pageScope,"table-loading":e.scopeLoading,"before-open":e.beforeOpenScope},on:{"row-del":e.rowDelScope,"row-update":e.rowUpdateScope,"row-save":e.rowSaveScope,"search-change":e.searchChangeScope,"search-reset":e.searchResetScope,"selection-change":e.selectionChangeScope,"current-change":e.currentChangeScope,"size-change":e.sizeChangeScope,"on-load":e.onLoadScope},scopedSlots:e._u([{key:"scopeType",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.scopeTypeName))])]}}]),model:{value:e.formScope,callback:function(t){e.formScope=t},expression:"formScope"}},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteScope}},[e._v("删 除\n          ")])],1)],2)],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("a450"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("a6dc"),s=n("7e26"),l=n("5880"),c=n("2457");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},drawerVisible:!1,direction:"rtl",scopeLoading:!1,scopeMenuId:0,scopeMenuName:"菜单",menu:!0,option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,index:!0,selection:!0,viewBtn:!1,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:150,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"/api/blade-system/menu/tree",hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,width:80,iconList:c["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"按钮功能",prop:"action",type:"radio",dicData:[{label:"工具栏",value:0},{label:"操作栏",value:1},{label:"工具操作栏",value:2}],hide:!0,rules:[{required:!0,message:"请选择按钮功能",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",dicData:[{label:"否",value:0},{label:"是",value:1}],hide:!0},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[],formScope:{},selectionListScope:[],pageScope:{pageSize:10,currentPage:1,total:0},optionScope:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:200,dialogWidth:900,dialogClickModal:!1,column:[{label:"权限名称",prop:"scopeName",search:!0,rules:[{required:!0,message:"请输入数据权限名称",trigger:"blur"}]},{label:"权限编号",prop:"resourceCode",search:!0,width:180,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"权限路径",prop:"scopePath",width:180,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"接口类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=api_scope_type",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,width:100,prop:"scopeType",rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"备注",prop:"remark",span:24,hide:!0}]},dataScope:[]}},computed:u(u({},Object(l["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},scopeIds:function(){var e=[];return this.selectionListScope.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getMenu"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getLazyMenuList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var a=e.id;Object(r["getLazyMenuList"])(a).then((function(e){n(e.data.data)}))},handleDataScope:function(e){this.drawerVisible=!0,this.scopeMenuId=e.id,this.scopeMenuName=e.name,this.onLoadScope(this.pageScope)},handleDrawerClose:function(e){e()},rowSaveScope:function(e,t,n){var a=this;e=u(u({},e),{},{menuId:this.scopeMenuId}),Object(s["addApiScope"])(e).then((function(){a.onLoadScope(a.pageScope),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateScope:function(e,t,n,a){var i=this;e=u(u({},e),{},{menuId:this.scopeMenuId}),Object(s["updateApiScope"])(e).then((function(){i.onLoadScope(i.pageScope),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDelScope:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeApiScope"])(e.id)})).then((function(){t.onLoadScope(t.pageScope),t.$message({type:"success",message:"操作成功!"})}))},handleDeleteScope:function(){var e=this;0!==this.selectionListScope.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeApiScope"])(e.scopeIds)})).then((function(){e.onLoadScope(e.pageScope),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudScope.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenScope:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getMenuApiScope"])(this.formScope.id).then((function(e){n.formScope=e.data.data})),e()},searchResetScope:function(){this.onLoadScope(this.pageScope)},searchChangeScope:function(e,t){this.onLoadScope(this.pageScope,e),t()},selectionChangeScope:function(e){this.selectionListScope=e},currentChangeScope:function(e){this.pageScope.currentPage=e},sizeChangeScope:function(e){this.pageScope.pageSize=e},onLoadScope:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.scopeLoading=!0;var a=u(u({},n),{},{menuId:this.scopeMenuId});Object(s["getListApiScope"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var n=e.data.data;t.pageScope.total=n.total,t.dataScope=n.records,t.selectionListScope=[],t.scopeLoading=!1}))}}},h=p,f=n("829d"),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},6507:function(e,t,n){},"65fa":function(e,t,n){},"67e1":function(e,t,n){},"692e":function(e,t,n){var a={"./App.vue":"3dfd","./components/basic-block/main.vue":"c0fb","./components/basic-container/main.vue":"dc8a","./components/error-page/403.vue":"a8d0","./components/error-page/404.vue":"a5fa","./components/error-page/500.vue":"611b","./components/iframe/main.vue":"c1a1","./components/third-register/main.vue":"63e7","./page/index/index.vue":"9cc4","./page/index/layout.vue":"9277","./page/index/logo.vue":"7d3a","./page/index/search.vue":"76c2","./page/index/sidebar/index.vue":"20bf","./page/index/sidebar/sidebarItem.vue":"7505","./page/index/tags.vue":"5ddc","./page/index/top/index.vue":"195f","./page/index/top/top-color.vue":"44b2","./page/index/top/top-lang.vue":"c7cc","./page/index/top/top-lock.vue":"14cd","./page/index/top/top-logs.vue":"0f22","./page/index/top/top-menu.vue":"286c","./page/index/top/top-notice.vue":"ad51","./page/index/top/top-search.vue":"9812","./page/index/top/top-theme.vue":"107f","./page/lock/index.vue":"15c5","./page/login/authredirect.vue":"84a6","./page/login/codelogin.vue":"acd4","./page/login/codelogin_old.vue":"c364","./page/login/index.vue":"5596","./page/login/index_old.vue":"d560","./page/login/portal.vue":"7f04","./page/login/thirdlogin.vue":"124f","./page/login/userlogin.vue":"7c05","./page/login/userlogin_old.vue":"fee4","./page/logs/index.vue":"08ae","./page/portal/build.vue":"de1b","./page/portal/components/h-content-list.vue":"99b7","./page/portal/components/h-content.vue":"159f","./page/portal/components/h-pagination.vue":"454e","./page/portal/layout.vue":"34c1","./page/portal/main/crumbsBar.vue":"41ce","./page/portal/main/footerBar.vue":"e21f","./page/portal/main/headerBar.vue":"75f1","./page/portal/main/leftMeun.vue":"47d9","./page/portal/main/main.vue":"6f6d","./page/portal/platformIntroduction/index.vue":"f75d","./page/portal/platformIntroduction/noticeAnnouncement/index.vue":"88d1","./page/portal/platformIntroduction/peopleResponse/index.vue":"b7b4","./page/portal/platformIntroduction/policy/index.vue":"6a3b","./page/portal/platformIntroduction/workDynamics/index.vue":"72e8","./page/portal/psychological/askedQuestions/index.vue":"e9d8","./page/portal/psychological/consultationProcess/index.vue":"e075","./page/portal/psychological/experts/index.vue":"edd0","./page/portal/psychological/index.vue":"4126","./views/authority/apiscope.vue":"646e","./views/authority/datascope.vue":"879d","./views/authority/role.vue":"60f8","./views/base/region.vue":"0f19","./views/consult/user.vue":"a6db","./views/desk/notice.vue":"363c","./views/door/column.vue":"ab7b","./views/door/components/add-column.vue":"537f","./views/door/components/add-infopublic.vue":"d279","./views/door/infoPub.vue":"a7ae","./views/expert/backup.vue":"e1c2","./views/expert/components/addClasses.vue":"cd11","./views/expert/components/addUser.vue":"cc71","./views/expert/components/addplan.vue":"dd8d","./views/expert/expert_db.vue":"b6f8","./views/expert/plan.vue":"7cfe","./views/flow/deploy.vue":"f072","./views/flow/follow.vue":"41c2","./views/flow/manager.vue":"2498","./views/flow/model.vue":"95d0","./views/monitor/log/api.vue":"2ba9","./views/monitor/log/error.vue":"7501","./views/monitor/log/usual.vue":"5bab","./views/report/reportlist.vue":"37fc","./views/resource/attach.vue":"5ae6","./views/resource/oss.vue":"464a","./views/resource/sms.vue":"2257","./views/system/client.vue":"9765","./views/system/components/editPassWord.vue":"a928","./views/system/components/lookforLog.vue":"98ed","./views/system/dept.vue":"88b6","./views/system/dict.vue":"6bce","./views/system/dictbiz.vue":"b74c","./views/system/menu.vue":"5d8a","./views/system/param.vue":"09e0","./views/system/post.vue":"156f","./views/system/tenant.vue":"14a7","./views/system/topmenu.vue":"e62a","./views/system/user.vue":"b979","./views/system/userinfo.vue":"095a","./views/system/userinfo1232.vue":"4c24","./views/test.vue":"2762","./views/tool/code.vue":"5e0a","./views/tool/datasource.vue":"8ef7","./views/util/affix.vue":"9b9b","./views/util/cache.vue":"f100","./views/util/crud-form.vue":"7eb6","./views/util/data.vue":"561f","./views/util/demo/dict-classic.vue":"0983","./views/util/demo/dict-horizontal.vue":"6486","./views/util/demo/dict-vertical.vue":"dd4b","./views/util/demo/dict.vue":"0546","./views/util/demo/dictbiz.vue":"cdb7","./views/util/form-detail.vue":"a597","./views/util/form.vue":"5589","./views/util/logs.vue":"2004","./views/util/permission.vue":"5789","./views/util/store.vue":"88b0","./views/util/table.vue":"41cf","./views/util/tags.vue":"5ad2","./views/util/test.vue":"ab5c","./views/util/top.vue":"d4c8","./views/wel/dashboard.vue":"4b9f3","./views/wel/index.vue":"4e3c","./views/wel/index_old.vue":"c7a2","./views/work/claim.vue":"75de","./views/work/done.vue":"cdc3","./views/work/process/leave/detail.vue":"d26f","./views/work/process/leave/form.vue":"eaa2","./views/work/process/leave/handle.vue":"6e96","./views/work/send.vue":"2287","./views/work/start.vue":"d9b8","./views/work/todo.vue":"5670"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id="692e"},"6a3b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"policy"},[t("h-content-list",{attrs:{list:e.list}}),t("h-pagination",{attrs:{total:80},on:{handleCurrentPage:e.handleCurrentPage}})],1)},i=[],o=n("99b7"),r=n("454e"),s={components:{hPagination:r["default"],HContentList:o["default"]},name:"policy",data:function(){return{list:[{title:"党的二十大代表怎么选？",time:"2021-11-23 17:63:09"}]}},methods:{handleCurrentPage:function(e){console.log(e)}}},l=s,c=(n("85a0"),n("829d")),d=Object(c["a"])(l,a,i,!1,null,"132fb230",null);t["default"]=d.exports},"6bce":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.optionParent,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-setting",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleRowClick(n.row)}}},[e._v("字典配置\n      ")]):e._e()]}},{key:"code",fn:function(n){var a=n.row;return[t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleRowClick(a)}}},[e._v(e._s(a.code))])]}},{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"[".concat(e.dictValue,"]字典配置"),"append-to-body":"",visible:e.box,width:"1000px"},on:{"update:visible":function(t){e.box=t}}},[t("avue-crud",{ref:"crudChild",attrs:{option:e.optionChild,"table-loading":e.loadingChild,data:e.dataChild,permission:e.permissionList,"before-open":e.beforeOpenChild,"before-close":e.beforeCloseChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n        ")]):e._e()]}},{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n        ")]):e._e()],1)],2)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("7754"),s=n("cee8"),l=n("5880");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{dictValue:"暂无",parentId:-1,formParent:{},formChild:{},selectionList:[],query:{},box:!1,loading:!0,loadingChild:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],optionParent:s["optionParent"],optionChild:s["optionChild"]}},computed:d(d({},Object(l["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1),viewBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.formChild.dictValue="",this.formChild.dictKey="",this.formChild.sort=0,this.formChild.isSealed=0,this.formChild.remark="",this.formChild.parentId=e.id,this.$refs.crudChild.rowAdd()},rowSave:function(e,t,n){var a=this,i=d(d({},e),{},{dictKey:-1});Object(r["add"])(i).then((function(){a.onLoadParent(a.pageParent),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),i.onLoadChild(i.pageChild),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})}))},handleRowClick:function(e){this.query={},this.parentId=e.id,this.dictValue=e.dictValue;var t=this.findObject(this.optionChild.column,"code");t.value=e.code;var n=this.findObject(this.optionChild.column,"parentId");n.value=e.id,this.box=!0,this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.pageParent,this.query)},rowSaveChild:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoadChild(a.pageChild),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(r["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},beforeCloseChild:function(e){var t=this;this.$refs.crudChild.value.parentId=this.parentId,this.$refs.crudChild.option.column.filter((function(e){"parentId"===e.prop&&(e.value=t.parentId)})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loadingChild=!0,Object(r["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){t.dataChild=e.data.data,t.loadingChild=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"6d52":function(e,t,n){},7208:function(e,t,n){"use strict";function a(e){return"flow_".concat(e)}function i(e,t){var n=e.filter((function(e){return e.routeKey===t}));return 0===n.length?[]:n[0].routeValue}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},"72e8":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"work-dynamics"},[t("h-content-list",{attrs:{list:e.list}}),t("h-pagination",{attrs:{total:80},on:{handleCurrentPage:e.handleCurrentPage}})],1)},i=[],o=n("99b7"),r=n("454e"),s={components:{hPagination:r["default"],HContentList:o["default"]},name:"work-dynamics",data:function(){return{list:[{title:"党的二十大代表怎么选？",time:"2021-11-23 17:63:09"}]}},methods:{handleCurrentPage:function(e){console.log(e)}}},l=s,c=(n("bbf3"),n("829d")),d=Object(c["a"])(l,a,i,!1,null,"3928b229",null);t["default"]=d.exports},7501:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,"before-open":e.beforeOpen,permission:e.permissionList,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("aa18"),n("982e"),n("f076")),r=n("62ed"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:120,dialogType:"drawer",column:[{label:"服务id",prop:"serviceId",search:!0,width:"120"},{label:"服务host",prop:"serverHost",search:!0,width:"150"},{label:"服务ip",prop:"serverIp",width:"160"},{label:"软件环境",prop:"env",width:"80"},{label:"请求方法",prop:"method",width:"80"},{label:"请求接口",prop:"requestUri"},{label:"日志时间",prop:"createTime",width:"180"},{label:"用户代理",prop:"userAgent",span:24,hide:!0},{label:"请求数据",prop:"params",type:"textarea",span:24,minRows:2,hide:!0},{label:"日志数据",prop:"stackTrace",type:"textarea",span:24,minRows:16,hide:!0}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.log_error_view,!1)}}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getErrorLogs"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getErrorList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"75de":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.work_claim_sign?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleClaim(n.row)}}},[e._v("签收\n      ")]):e._e(),e.permission.work_claim_detail?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDetail(n.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_claim_follow?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleImage(n.row,n.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("1e69"),l=n("7208");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:d(d({},Object(r["mapGetters"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleClaim:function(e){var t=this;this.$confirm("确定签收此任务?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["claimTask"])(e.taskId)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=d(d({},this.query),{},{category:n.category?Object(l["a"])(n.category):null});this.loading=!0,Object(s["claimList"])(e.currentPage,e.pageSize,Object.assign(n,a)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("c97e"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},"7cfe":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("div",{staticStyle:{display:"inline-block"}},[t("el-button",{attrs:{type:"danger"},on:{click:e.showAddplanform}},[e._v("设置排班")]),t("el-button",{attrs:{type:"warning",plain:""}},[e._v("导入")]),t("el-button",{attrs:{type:"warning",plain:""}},[e._v("导出")]),t("el-button",{attrs:{type:"warning",plain:""},on:{click:e.showClassesform}},[e._v("班次维护")])],1),t("div",{staticStyle:{display:"inline-block",float:"right"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.showModel,callback:function(t){e.showModel=t},expression:"showModel"}},[e._v("按周展示")]),t("el-radio",{attrs:{label:"2"},model:{value:e.showModel,callback:function(t){e.showModel=t},expression:"showModel"}},[e._v("按月展示")])],1)]),1==e.showModel?t("div",[t("div",{staticStyle:{"background-color":"#ffe2d3","text-align":"center","margin-top":"30px",height:"70px","line-height":"70px",color:"#121212","font-size":"20px","font-weight":"bold"}},[t("i",{staticClass:"el-icon-arrow-left",on:{click:e.handlePrevious}}),t("div",{staticStyle:{display:"inline-block"}},[e._v(e._s(e.tableData.weekName))]),t("i",{staticClass:"el-icon-arrow-right",on:{click:e.handleNext}})]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.expertPlanVOList}},[t("el-table-column",{attrs:{prop:"",label:"",width:"80",align:"center",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelPlan(n.row)}}})]}}],null,!1,2325064833)}),t("el-table-column",{attrs:{prop:"classes",label:"班次",minWidth:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"50px"}},[e._v(e._s(n.row.classes))]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editClassesTime(n.row)}}})]}}],null,!1,2142399106)}),t("el-table-column",{attrs:{prop:"expertTypeName",label:"类别",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"timeArea",label:"时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"130px"}},[e._v("\n            "+e._s(n.row.startTime+"~"+n.row.endTime))]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editClassesTime(n.row)}}})]}}],null,!1,3416371973)}),e._l(e.dayColumns,(function(n,a){return t("el-table-column",{key:a,attrs:{prop:n.field,label:n.label,width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"170px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:i.row.expertPlanDays.length>a?i.row.expertPlanDays[a].userNames:""}},[e._v("\n            "+e._s(i.row.expertPlanDays.length>a?i.row.expertPlanDays[a].userNames:""))]),t("i",{staticClass:"el-icon-circle-plus-outline",staticStyle:{"font-size":"20px"},on:{click:function(t){return e.handleAddUser(i.row,n.field,a)}}})]}}],null,!0)})}))],2)],1):e._e(),2==e.showModel?t("div",[t("div",{staticStyle:{"background-color":"#ffe2d3","text-align":"center","margin-top":"30px",height:"70px","line-height":"70px",color:"#121212","font-size":"20px","font-weight":"bold"}},[t("i",{staticClass:"el-icon-arrow-left",on:{click:e.handleMonthPrevious}}),t("div",{staticStyle:{display:"inline-block"}},[e._v(e._s(e.monthData.monthName))]),t("i",{staticClass:"el-icon-arrow-right",on:{click:e.handleMonthNext}})]),t("div",{staticStyle:{height:"30px","line-height":"30px","font-weight":"bold","font-size":"14px"}},e._l(e.dayColumns,(function(n,a){return t("div",{key:a,staticStyle:{"text-align":"center",width:"14.16%",display:"inline-block","background-color":"#fff8f3",border:"0.3px solid #fff8f3"}},[e._v("\n        "+e._s(n.label)+"\n      ")])})),0),e._l(e.monthData.tableData,(function(n,a){return t("div",{key:a,staticStyle:{height:"160px"}},e._l(e.dayColumns,(function(a,i){return t("div",{key:i,staticStyle:{"text-align":"center",width:"14.16%",height:"100%",display:"inline-block","font-size":"18px",border:"0.3px solid #ddd",overflow:"hidden",position:"relative"}},[t("div",{staticStyle:{"margin-top":"20px"}},[e._v(e._s(e.dayStr(n.weekNum,i)))]),e._l(n.expertPlanVOList,(function(n,i){return t("div",{key:i,staticStyle:{"font-size":"12px",color:"#121212","text-align":"left",margin:"0 20px","margin-top":"10px"}},[e._v("\n          "+e._s(n.classes+"："+n.startTime+"~"+n.endTime)+"\n          "),e._l(n.expertPlanDays,(function(n,i){return n.dayNum==a.field?t("div",{key:i},[e._v("\n            "+e._s(n.userNames)+"\n          ")]):e._e()}))],2)})),t("div",{staticStyle:{position:"absolute",right:"10px",bottom:"10px"}},[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.toWeekPlan(n.weekNum)}}})],1)],2)})),0)}))],2):e._e(),t("adduser",{ref:"userDialog",on:{change:e.userSelect}}),t("addclasses",{ref:"classesDialog",on:{change:e.handleClassesChange,testChange:e.handleTestChange}}),t("addplan",{ref:"planDialog",on:{change:e.planChange}})],1)},i=[],o=(n("1bc7"),n("0eb1")),r=n("fbde"),s=n("cd11"),l=n("dd8d"),c=n("cc71"),d={components:{addplan:l["default"],addclasses:s["default"],adduser:c["default"]},data:function(){return{showModel:"1",weekNum:null,dayColumns:[{field:"w1",label:"周一"},{field:"w2",label:"周二"},{field:"w3",label:"周三"},{field:"w4",label:"周四"},{field:"w5",label:"周五"},{field:"w6",label:"周六"},{field:"w7",label:"周日"}],tableData:{},userform:{show:!1},classesform:{show:!1},addplanform:{show:!1},monthData:{month:[],monthName:"",tableData:[]}}},watch:{showModel:function(e,t){2==e?(this.monthData.monthName=this.DateToMonthStr("年","月"),this.loadMonthPlan()):this.loadWeekPlan(this.weekNum)}},created:function(){this.InitData(new Date),this.InitMonth(new Date)},methods:{dayStr:function(e,t){var n=new Date(2021,11,15);return n.setDate(n.getDate()+7*e+t+1),n.getDate()},InitMonth:function(e){var t=e.getYear()+1900,n=e.getMonth()+1;this.monthData.month=[t,n]},DateToMonthStr:function(e,t){return this.monthData.month[0]+e+(this.monthData.month[1]>9?this.monthData.month[1]:"0"+this.monthData.month[1])+t},InitData:function(e){var t=this;Object(o["getPlanByData"])(e.toLocaleDateString()).then((function(e){t.tableData=e.data.data,t.weekNum=t.tableData.weekNum}))},loadWeekPlan:function(e){var t=this;Object(o["getPlanByWeek"])(e).then((function(e){console.log("loadWeekPlan",e.data.data),t.tableData=e.data.data,t.weekNum=t.tableData.weekNum,t.weekName=t.tableData.weekName}))},loadMonthPlan:function(){var e=this;Object(o["getExpertPlanByMonth"])(this.monthData.month[0]+"-"+this.monthData.month[1]).then((function(t){e.monthData.tableData=t.data.data}))},handlePrevious:function(){this.weekNum--,this.weekNum<0&&(this.weekNum=0),this.loadWeekPlan(this.weekNum)},handleNext:function(){this.weekNum++,this.loadWeekPlan(this.weekNum)},handleAddUser:function(e,t,n){this.$refs.userDialog.handle({expertType:e.expertType,expertTypeName:e.expertTypeName,users:e.expertPlanDays[n].expertPlanUsers,dayPlan:e.expertPlanDays[n]})},userSelect:function(e){var t=this;e.dayPlan.userNames=e.userNames,e.dayPlan.expertPlanUsers=e.users,console.log("param.dayPlan",e.dayPlan),Object(r["resavePlanUser"])(e.dayPlan).then((function(){t.$message({message:"排班保存成功",type:"success"})}))},editClassesTime:function(e){var t=this;this.$nextTick((function(){t.$refs.classesDialog.handle(e)}))},timeOverlap:function(e,t){var n=!1;return n=1==this.contrast(e[1],t[1])&&1==this.contrast(t[1],e[0])||1==this.contrast(t[1],e[1])&&1==this.contrast(e[1],t[0])||1==this.contrast(e[0],t[0])&&1==this.contrast(t[1],e[1])||1==this.contrast(t[0],e[0])&&1==this.contrast(e[1],t[1])||0==this.contrast(t[0],e[0])&&0==this.contrast(e[1],t[1]),console.log("判重",e,t,n),n},contrast:function(e,t){var n=new Date("2021/12/12 "+e),a=new Date("2021/12/12 "+t);return n.getTime()==a.getTime()?0:n.getTime()>a.getTime()?1:n.getTime()<a.getTime()?-1:void 0},handleTestChange:function(e,t,n){var a=this,i=!1;this.tableData.expertPlanVOList.forEach((function(n){if(a.timeOverlap([n.startTime,n.endTime],[e.startTime,e.endTime])&&n.expertType==t.expertType&&n.id!=t.id)return a.$message({message:"与已排计划时间重叠！",type:"warning"}),void(i=!0)})),n(i)},handleClassesChange:function(e){var t=this;console.log("保存数据",e),Object(o["saveExpertPlan"])(e).then((function(){t.$message({message:"排班保存成功",type:"success"})}))},showClassesform:function(){var e=this;this.$nextTick((function(){e.$refs.classesDialog.handle(null)}))},handleDelPlan:function(e){var t=this;Object(o["delById"])(e.id).then((function(){t.$message({message:"计划删除成功",type:"success"}),t.loadWeekPlan(e.weekNum)}))},showAddplanform:function(){var e=this;this.$nextTick((function(){e.$refs.planDialog.handle(e.tableData.weekNum,e.tableData.weekName)}))},handleMonthPrevious:function(){0==this.monthData.month[1]?(this.monthData.month[1]=11,this.monthData.month[0]-=1):this.monthData.month[1]-=1,this.loadMonthPlan()},handleMonthNext:function(){11==this.monthData.month[1]?(this.monthData.month[1]=0,this.monthData.month[0]+=1):this.monthData.month[1]+=1,this.loadMonthPlan()},planChange:function(){this.loadWeekPlan(this.weekNum)},toWeekPlan:function(e){console.log(e,"adfadf"),this.weekNum=e,this.showModel="1"}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"7e18":function(e,t,n){"use strict";n("58d0")},"7eb5":function(e,t,n){},"7eb6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("点击新增或编辑跳转到新的页面")]),t("avue-crud",{attrs:{option:e.option,data:e.data},scopedSlots:e._u([{key:"menu",fn:function(n){var a=n.row;return[t("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleForm(a.id)}}},[e._v("edit")])]}}])},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleForm()}}},[e._v("add")])],1)],2)],1)},i=[],o={data:function(){return{option:{addBtn:!1,editBtn:!1,column:[{label:"姓名",prop:"name"}]},data:[{id:1,name:"small"}]}},methods:{handleForm:function(e){this.$router.push({path:"/form-detail/index",query:{id:e}})}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"7f19":function(e,t,n){},"7f3b":function(e,t,n){},"813f":function(e,t,n){"use strict";n("d65a")},8163:function(e,t,n){"use strict";n("c03f")},"82e1":function(e,t,n){"use strict";n("154c")},8355:function(e,t,n){},"84a6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div")},i=[],o={name:"authredirect",created:function(){window.close();var e=this.$route.query,t=e.state,n=e.code;window.opener.location.href="".concat(window.location.origin,"/#/login?state=").concat(t,"&code=").concat(n)}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"85a0":function(e,t,n){"use strict";n("e6d0")},8688:function(e,t,n){"use strict";n("3682")},"879d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(n){var a=n.row;return[e.permission.data_scope_setting?t("el-button",{staticStyle:{border:"0","background-color":"transparent !important"},attrs:{type:"text",icon:"el-icon-setting",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDataScope(a)}}},[e._v("权限配置\n      ")]):e._e()]}},{key:"source",fn:function(e){var n=e.row;return[t("div",{staticStyle:{"text-align":"center"}},[t("i",{class:n.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-drawer",{attrs:{title:"[".concat(e.scopeMenuName,"] 数据权限配置"),visible:e.drawerVisible,direction:e.direction,"append-to-body":"","before-close":e.handleDrawerClose,size:"1000px"},on:{"update:visible":function(t){e.drawerVisible=t}}},[t("basic-container",[t("avue-crud",{ref:"crudScope",attrs:{option:e.optionScope,data:e.dataScope,page:e.pageScope,"table-loading":e.scopeLoading,"before-open":e.beforeOpenScope},on:{"row-del":e.rowDelScope,"row-update":e.rowUpdateScope,"row-save":e.rowSaveScope,"search-change":e.searchChangeScope,"search-reset":e.searchResetScope,"selection-change":e.selectionChangeScope,"current-change":e.currentChangeScope,"size-change":e.sizeChangeScope,"on-load":e.onLoadScope},scopedSlots:e._u([{key:"scopeType",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.scopeTypeName))])]}}]),model:{value:e.formScope,callback:function(t){e.formScope=t},expression:"formScope"}},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteScope}},[e._v("删 除\n          ")])],1)],2)],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("a450"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("a6dc"),s=n("7e26"),l=n("5880"),c=n("2457"),d=n("d9a3");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},drawerVisible:!1,direction:"rtl",scopeMenuId:0,scopeMenuCode:"",scopeMenuName:"菜单",scopeLoading:!1,menu:!0,watchMode:!0,option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,index:!0,selection:!0,viewBtn:!1,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:150,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"/api/blade-system/menu/tree",hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,width:80,iconList:c["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"按钮功能",prop:"action",type:"radio",dicData:[{label:"工具栏",value:0},{label:"操作栏",value:1},{label:"工具操作栏",value:2}],hide:!0,rules:[{required:!0,message:"请选择按钮功能",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",dicData:[{label:"否",value:0},{label:"是",value:1}],hide:!0},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[],formScope:{},selectionListScope:[],pageScope:{pageSize:10,currentPage:1,total:0},optionScope:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:200,dialogWidth:900,dialogClickModal:!1,column:[{label:"权限名称",prop:"scopeName",search:!0,value:"",rules:[{required:!0,message:"请输入数据权限名称",trigger:"blur"}]},{label:"权限编号",prop:"resourceCode",search:!0,width:100,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"权限字段",prop:"scopeColumn",width:130,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"规则类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=data_scope_type",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,width:140,prop:"scopeType",rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"可见字段",prop:"scopeField",span:24,hide:!0,value:"*",rules:[{required:!0,message:"请输入数据权限可见的字段",trigger:"blur"}]},{label:"权限类名",prop:"scopeClass",span:24,hide:!0,rules:[{required:!0,message:"请输入MybatisMapper对应方法的完整类名路径",trigger:"blur"}]},{label:"规则值",prop:"scopeValue",span:24,minRows:5,type:"textarea",display:!0,hide:!0},{label:"备注",prop:"remark",span:24,hide:!0}]},dataScope:[]}},watch:{"formScope.scopeType":function(){this.initScope()}},computed:p(p({},Object(l["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},scopeIds:function(){var e=[];return this.selectionListScope.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initScope:function(){var e=this,t=d["a"].toInt(this.formScope.scopeType),n=this.watchMode,a="-",i="暂无";1===t?(a="-",i="全部可见"):2===t?(a="create_user",i="本人可见"):3===t?(a="create_dept",i="所在机构可见"):4===t?(a="create_dept",i="所在机构可见及子级可见"):5===t&&(a="",i="自定义"),this.$refs.crudScope.option.column.filter((function(o){n&&("scopeName"===o.prop&&(e.formScope.scopeName="".concat(e.scopeMenuName," [").concat(i,"]")),"resourceCode"===o.prop&&(e.formScope.resourceCode=e.scopeMenuCode),"scopeColumn"===o.prop&&(e.formScope.scopeColumn=a)),"scopeValue"===o.prop&&(o.display=5===t)}))},rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getMenu"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getLazyMenuList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var a=e.id;Object(r["getLazyMenuList"])(a).then((function(e){n(e.data.data)}))},handleDataScope:function(e){this.drawerVisible=!0,this.scopeMenuId=e.id,this.scopeMenuCode=e.code,this.scopeMenuName=e.name,this.onLoadScope(this.pageScope)},handleDrawerClose:function(e){e()},rowSaveScope:function(e,t,n){var a=this;e=p(p({},e),{},{menuId:this.scopeMenuId}),Object(s["addDataScope"])(e).then((function(){a.onLoadScope(a.pageScope),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateScope:function(e,t,n,a){var i=this;e=p(p({},e),{},{menuId:this.scopeMenuId}),Object(s["updateDataScope"])(e).then((function(){i.onLoadScope(i.pageScope),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDelScope:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeDataScope"])(e.id)})).then((function(){t.onLoadScope(t.pageScope),t.$message({type:"success",message:"操作成功!"})}))},handleDeleteScope:function(){var e=this;0!==this.selectionListScope.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeDataScope"])(e.scopeIds)})).then((function(){e.onLoadScope(e.pageScope),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudScope.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenScope:function(e,t){var n=this;["add"].includes(t)&&(this.watchMode=!0,this.initScope()),["edit","view"].includes(t)&&(this.watchMode=!1,Object(s["getMenuDataScope"])(this.formScope.id).then((function(e){n.formScope=e.data.data}))),e()},searchResetScope:function(){this.onLoadScope(this.pageScope)},searchChangeScope:function(e,t){this.onLoadScope(this.pageScope,e),t()},selectionChangeScope:function(e){this.selectionListScope=e},currentChangeScope:function(e){this.pageScope.currentPage=e},sizeChangeScope:function(e){this.pageScope.pageSize=e},onLoadScope:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.scopeLoading=!0;var a=p(p({},n),{},{menuId:this.scopeMenuId});Object(s["getListDataScope"])(e.currentPage,e.pageSize,Object.assign(a,this.query)).then((function(e){var n=e.data.data;t.pageScope.total=n.total,t.dataScope=n.records,t.selectionListScope=[],t.scopeLoading=!1}))}}},f=h,g=n("829d"),m=Object(g["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},"88b0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("存储")]),t("el-tag",{staticClass:"title",attrs:{size:"small"}},[e._v("基本读写删(持久化存储)\n  ")]),t("div",{staticClass:"box"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setItem({name:"username",value:"avuex"})}}},[e._v("set('username', 'avuex')\n    ")]),t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getItem({name:"username"})}}},[e._v("get('username')\n    ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delItem({name:"username"})}}},[e._v("remove('username')\n    ")])],1),t("el-tag",{staticClass:"title",attrs:{size:"small"}},[e._v("设置session(session存储)\n  ")]),t("div",{staticClass:"box"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setItem({name:"username",value:"avuex",type:"session"})}}},[e._v("set('username', 'avuex')\n    ")]),t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getItem({name:"username",type:"session"})}}},[e._v("get('username')\n    ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delItem({name:"username",type:"session"})}}},[e._v("remove('username')\n    ")])],1),t("el-tag",{staticClass:"title",attrs:{size:"small"}},[e._v("获取所有可以获得的数据\n  ")]),t("div",{staticClass:"box"},[t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getAll()}}},[e._v("getAll(持久化存储)\n    ")]),t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getAll({type:"session"})}}},[e._v("getAll(session存储)\n    ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.clearAll()}}},[e._v("delAll(持久化存储)\n    ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.clearAll({type:"session"})}}},[e._v("delAll(session存储)\n    ")])],1)],1)},i=[],o=(n("a450"),n("e3c4")),r={name:"store",methods:{setItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value,a=e.type;Object(o["e"])({name:t,content:n,type:a}),this.$message("设置数据 ".concat(t," = ").concat(n))},getItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.type,a=Object(o["c"])({name:t,type:n});this.$message("获取数据 ".concat(t," = ").concat(a))},delItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.type;Object(o["d"])({name:t,type:n}),this.$message("删除数据 ".concat(t))},clearAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o["a"])(e),this.$message("清除全部数据完成")},getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(o["b"])(e);window.console.log(t),this.$message("结果已经打印到控制台")}}},s=r,l=(n("4710"),n("829d")),c=Object(l["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports},"88b6":function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n      ")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.dept_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("fcb7"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogClickModal:!1,align:"center",column:[{label:"机构名称",prop:"deptName",search:!0,align:"left",rules:[{required:!0,message:"请输入机构名称",trigger:"blur"}]},{label:"机构全称",prop:"fullName",search:!0,rules:[{required:!0,message:"请输入机构全称",trigger:"blur"}]},{label:"上级机构",prop:"parentId",dicData:[],type:"tree",addDisabled:!1,props:{label:"title"},rules:[{required:!1,message:"请选择上级机构",trigger:"click"}]},{label:"机构类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=org_category",props:{label:"dictValue",value:"dictKey"},dataType:"number",width:120,prop:"deptCategory",rules:[{required:!0,message:"请输入机构类型",trigger:"blur"}]},{label:"排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入排序",trigger:"blur"}]},{label:"备注",prop:"remark",rules:[{required:!1,message:"请输入备注",trigger:"blur"}],hide:!0}]},data:[]}},created:function(){this.initData()},computed:c(c({},Object(s["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dept_add,!1),viewBtn:this.vaildData(this.permission.dept_view,!1),delBtn:this.vaildData(this.permission.dept_delete,!1),editBtn:this.vaildData(this.permission.dept_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initData:function(){var e=this;Object(r["getDeptTree"])().then((function(t){console.log(t);var n=e.findObject(e.option.column,"parentId");n.dicData=[{children:t.data.data,hasChildren:!0,id:"0",key:"0",parentId:"",title:"/",value:"0"}]}))},handleAdd:function(e){this.parentId=e.id;var t=this.findObject(this.option.column,"parentId");t.value=e.id,t.addDisabled=!0,this.$refs.crud.rowAdd()},rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(n){var i=n.data.data;e.id=i.id,e.deptCategoryName=i.deptCategoryName,e.tenantId=i.tenantId,a.$message({type:"success",message:"操作成功!"}),t(e)}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.$message({type:"success",message:"操作成功!"}),n(e)}),(function(e){window.console.log(e),a()}))},rowDel:function(e,t,n){var a=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){a.$message({type:"success",message:"操作成功!"}),n(e)}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.data=[],e.parentId=0,e.$refs.crud.refreshTable(),e.$refs.crud.toggleSelection(),e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"})})):this.$message.warning("请选择至少一条数据")},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDept"])(this.form.id).then((function(e){n.form=e.data.data})),e()},beforeClose:function(e){this.parentId="";var t=this.findObject(this.option.column,"parentId");t.value="",t.addDisabled=!1,e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getLazyList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var a=e.id;Object(r["getLazyList"])(a).then((function(e){n(e.data.data)}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"88d1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"notice-announcement"},[t("h-content-list",{attrs:{list:e.list}}),t("h-pagination",{attrs:{total:80},on:{handleCurrentPage:e.handleCurrentPage}})],1)},i=[],o=n("99b7"),r=n("454e"),s={components:{hPagination:r["default"],HContentList:o["default"]},name:"notice-announcement",data:function(){return{list:[{title:"党的二十大代表怎么选？",time:"2021-11-23 17:63:09"}]}},methods:{handleCurrentPage:function(e){console.log(e)}}},l=s,c=(n("0ab6"),n("829d")),d=Object(c["a"])(l,a,i,!1,null,"d8dad030",null);t["default"]=d.exports},8949:function(e,t,n){"use strict";n("36a3")},"89ec":function(e,t,n){"use strict";n("65fa")},"8ef7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.datasource_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("c1aa"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,dialogWidth:900,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"名称",prop:"name",width:120,rules:[{required:!0,message:"请输入数据源名称",trigger:"blur"}]},{label:"驱动类",prop:"driverClass",type:"select",dicData:[{label:"com.mysql.cj.jdbc.Driver",value:"com.mysql.cj.jdbc.Driver"},{label:"org.postgresql.Driver",value:"org.postgresql.Driver"},{label:"oracle.jdbc.OracleDriver",value:"oracle.jdbc.OracleDriver"}],width:200,rules:[{required:!0,message:"请输入驱动类",trigger:"blur"}]},{label:"用户名",prop:"username",width:120,rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]},{label:"密码",prop:"password",hide:!0,rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{label:"连接地址",prop:"url",span:24,rules:[{required:!0,message:"请输入连接地址",trigger:"blur"}]},{label:"备注",prop:"remark",span:24,minRows:3,hide:!0,type:"textarea"}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.datasource_add,!1),viewBtn:this.vaildData(this.permission.datasource_view,!1),delBtn:this.vaildData(this.permission.datasource_delete,!1),editBtn:this.vaildData(this.permission.datasource_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},9277:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("keep-alive",[e.$route.meta.keepAlive?t("router-view",{staticClass:"avue-view"}):e._e()],1),e.$route.meta.keepAlive?e._e():t("router-view",{staticClass:"avue-view"})],1)},i=[],o=n("829d"),r={},s=Object(o["a"])(r,a,i,!1,null,null,null);t["default"]=s.exports},"95d0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.flow_model_update?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleUpdate(n.row,n.index)}}},[e._v("配置\n      ")]):e._e(),e.permission.flow_model_deploy?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDeploy(n.row,n.index)}}},[e._v("部署\n      ")]):e._e(),e.permission.flow_model_download?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDownload(n.row,n.index)}}},[e._v("下载\n      ")]):e._e(),e.permission.flow_model_delete?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleSlotDelete(n.row,n.index)}}},[e._v("删除\n      ")]):e._e()]}},{key:"version",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.version))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.flow_model_create?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus",plain:""},on:{click:e.handleCreate}},[e._v("创 建\n      ")]):e._e(),e.permission.flow_model_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"流程配置","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程设计器",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleRefresh}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"流程部署","append-to-body":"",visible:e.deployBox,width:"20%"},on:{"update:visible":function(t){e.deployBox=t}}},[t("avue-form",{ref:"form",attrs:{option:e.optionDeploy},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deployBox=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",loading:e.deployLoading},on:{click:e.handleDoDeploy}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("1ca4"),l=n("371f"),c=n("7208");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},optionDeploy:{menuBtn:!1,column:[{label:"流程类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"categoryValue",search:!0,span:24,rules:[{required:!0,message:"请选择流程类型",trigger:"blur"}]},{label:"流程模式",prop:"flowMode",type:"radio",dicData:[{label:"通用流程",value:1},{label:"定制流程",value:2}],value:1,span:24,rules:[{required:!0,message:"请选择流程模式",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",multiple:!0,dicUrl:"/api/blade-system/tenant/select",props:{label:"tenantName",value:"tenantId"},display:!1,span:24,rules:[{required:!0,message:"请选择所属租户",trigger:"blur"}]}]},selectionId:"",selectionList:[],query:{},loading:!0,deployLoading:!1,page:{pageSize:10,currentPage:1,total:0},deployBox:!1,flowBox:!1,flowUrl:"",option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"模型主键",prop:"id"},{label:"模型标识",prop:"modelKey",search:!0,width:150},{label:"模型名称",prop:"name",search:!0,width:150},{label:"流程版本",prop:"version",slot:!0,width:80},{label:"创建时间",prop:"created",width:165},{label:"更新时间",prop:"lastUpdated",width:165}]},data:[]}},watch:{"form.flowMode":function(){var e=this;this.$refs.form.option.column.filter((function(t){"tenantId"===t.prop&&(t.display=2===e.form.flowMode)}))}},computed:u(u({},Object(r["mapGetters"])(["permission"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handleSubmit:function(e,t){var n=this;this.deployLoading=!0,Object(l["deployModel"])({modelId:this.selectionId,category:Object(c["a"])(e.categoryValue),tenantIds:e.tenantId.join(",")}).then((function(e){var a=e.data;a.success?(n.$message({type:"success",message:a.msg}),t(),n.$refs.form.resetForm(),n.deployBox=!1,n.deployLoading=!1):(t(),n.deployLoading=!1,n.$message({type:"warn",message:a.msg}))}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["removeModel"])(e.ids)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection(),e.onLoad(e.page)})):this.$message.warning("请选择至少一条数据")},handleCreate:function(){this.flowUrl="".concat(s["a"].flowDesignUrl,"/index.html"),this.flowBox=!0},handleUpdate:function(e){this.flowUrl="".concat(s["a"].flowDesignUrl,"/index.html#/editor/").concat(e.id),this.flowBox=!0},handleDeploy:function(e){this.deployBox=!0,this.selectionId=e.id},handleDoDeploy:function(){this.$refs.form.submit()},handleDownload:function(e){window.open("".concat(s["a"].flowDesignUrl,"/app/rest/models/").concat(e.id,"/bpmn20"))},handleSlotDelete:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(l["removeModel"])(e.id)})).then((function(){t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection(),t.onLoad(t.page)}))},handleRefresh:function(){this.flowBox=!1,this.onLoad(this.page)},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(l["modelList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},h=p,f=(n("8163"),n("829d")),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},9765:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.client_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("e30d"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"应用id",prop:"clientId",search:!0,rules:[{required:!0,message:"请输入客户端id",trigger:"blur"}]},{label:"应用密钥",prop:"clientSecret",search:!0,rules:[{required:!0,message:"请输入客户端密钥",trigger:"blur"}]},{label:"授权类型",prop:"authorizedGrantTypes",type:"checkbox",value:"refresh_token,password,authorization_code",dicData:[{label:"refresh_token",value:"refresh_token"},{label:"password",value:"password"},{label:"authorization_code",value:"authorization_code"},{label:"captcha",value:"captcha"},{label:"social",value:"social"}],rules:[{required:!0,message:"请输入授权类型",trigger:"blur"}]},{label:"授权范围",prop:"scope",value:"all",rules:[{required:!0,message:"请输入授权范围",trigger:"blur"}]},{label:"令牌秒数",prop:"accessTokenValidity",type:"number",value:3600,rules:[{required:!0,message:"请输入令牌过期秒数",trigger:"blur"}]},{label:"刷新秒数",prop:"refreshTokenValidity",type:"number",value:604800,hide:!0,rules:[{required:!0,message:"请输入刷新令牌过期秒数",trigger:"blur"}]},{label:"回调地址",prop:"webServerRedirectUri",hide:!0,rules:[{required:!0,message:"请输入回调地址",trigger:"blur"}]},{label:"资源集合",prop:"resourceIds",hide:!0,rules:[{message:"请输入资源集合",trigger:"blur"}]},{label:"权限",prop:"authorities",hide:!0,rules:[{message:"请输入权限",trigger:"blur"}]},{label:"自动授权",prop:"autoapprove",hide:!0,rules:[{message:"请输入自动授权",trigger:"blur"}]},{label:"附加说明",hide:!0,prop:"additionalInformation",span:24,rules:[{message:"请输入附加说明",trigger:"blur"}]}]},data:[]}},computed:c(c({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.client_add),viewBtn:this.vaildData(this.permission.client_view),delBtn:this.vaildData(this.permission.client_delete),editBtn:this.vaildData(this.permission.client_edit)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},u=d,p=n("829d"),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},"99b7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"nav-ul"},e._l(e.list,(function(n,a){return t("li",{key:a},[t("div",{staticClass:"title"},[t("div",{staticClass:"yuan"}),t("div",{staticClass:"content"},[e._v("\n        "+e._s(n.title)+"\n      ")])]),t("div",{staticClass:"time"},[e._v(e._s(n.time))])])})),0)},i=[],o={name:"h-content-list",props:{list:{type:Array,default:function(){return[]}}}},r=o,s=(n("5f49"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,"4e18d734",null);t["default"]=l.exports},"9aaa":function(e,t,n){"use strict";n("56c4")},"9b97":function(e,t,n){},"9b9b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"affix"},[t("avue-affix",{attrs:{id:"avue-view"}},[t("span",{staticClass:"affix-affix"},[e._v("固定在最顶部")])]),t("div",{staticClass:"affix-line"}),t("avue-affix",{attrs:{id:"avue-view","offset-top":50}},[t("span",{staticClass:"affix-affix"},[e._v("固定在距离顶部 50px 的位置")])]),t("div",{staticClass:"affix-line"}),t("avue-affix",{attrs:{id:"avue-view","offset-top":100}},[t("span",{staticClass:"affix-affix"},[e._v("固定在距离顶部 100px 的位置")])]),t("div",{staticClass:"affix-line"}),t("avue-affix",{attrs:{id:"avue-view","offset-top":150}},[t("span",{staticClass:"affix-affix"},[e._v("固定在距离顶部 150px 的位置")])]),e._m(0)],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"2000px"}},[t("div",{staticStyle:{padding:"15px 20px","font-size":"18px"}},[e._v("往下拉就会出现图钉")])])}],o={},r=o,s=(n("82e1"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},"9c25":function(e,t,n){"use strict";n("22e1")},a23c:function(e,t,n){},a482:function(e,t,n){},a510:function(e,t,n){},a597:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v(e._s(e.$route.query.id?"编辑":"新增"))]),t("avue-form",{attrs:{option:e.option},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuForm"},[t("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(t){return e.handleBack()}}},[e._v("返 回")])],1)],2)],1)},i=[],o={data:function(){return{form:{},option:{labelWidth:110,column:[{label:"姓名",prop:"name"}]}}},methods:{handleBack:function(){this.$router.$avueRouter.closeTag(),this.$router.back()}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},a6db:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:24}},[t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"row-update":e.rowUpdate,"row-save":e.rowSave},scopedSlots:e._u([{key:"region",fn:function(n){return[t("el-cascader",{attrs:{props:e.regionProps,disabled:""},model:{value:n.row.region,callback:function(t){e.$set(n.row,"region",t)},expression:"scope.row.region"}})]}},{key:"contactsTableForm",fn:function(n){return[t("avue-crud",{ref:"crudt1",attrs:{option:e.formData.contactsInfo.option,data:e.formData.contactsInfo.data},on:{"row-update":e.contactsRowUpdate,"row-save":e.contactsRowSave},model:{value:e.formData.contactsInfo.form,callback:function(t){e.$set(e.formData.contactsInfo,"form",t)},expression:"formData.contactsInfo.form"}})]}},{key:"consultTableForm",fn:function(n){return[t("avue-crud",{ref:"crudt2",attrs:{option:e.formData.consultInfo.option,data:e.formData.consultInfo.data},model:{value:e.formData.consultInfo.form,callback:function(t){e.$set(e.formData.consultInfo,"form",t)},expression:"formData.consultInfo.form"}})]}},{key:"visitTableForm",fn:function(n){return[t("avue-crud",{ref:"crudt3",attrs:{option:e.formData.visitInfo.option,data:e.formData.visitInfo.data},scopedSlots:e._u([{key:"menu",fn:function(a){a.row,a.index;return[t("el-button",{attrs:{type:"text",icon:"el-icon-headset"},on:{click:function(t){return e.handleDelPlan(n.row)}}})]}}],null,!0),model:{value:e.formData.visitInfo.form,callback:function(t){e.$set(e.formData.visitInfo,"form",t)},expression:"formData.visitInfo.form"}})]}},{key:"menu",fn:function(n){var a=n.row,i=n.index;return[t("el-select",{staticClass:"statictis-select",attrs:{placeholder:"操作"},model:{value:e.activeValue,callback:function(t){e.activeValue=t},expression:"activeValue"}},[t("el-option",{attrs:{label:"编辑",value:"1"},nativeOn:{click:function(t){return e.handleEditRow(a,i)}}}),t("el-option",{attrs:{label:"详情",value:"2"},nativeOn:{click:function(t){return e.handleViewRow(a,i)}}}),t("el-option",{attrs:{label:"查看咨询",value:"3"},nativeOn:{click:function(t){return e.handleOpenConsult(a,i)}}}),t("el-option",{attrs:{label:"查看回访",value:"3"},nativeOn:{click:function(t){return e.handleOpenVisit(a,i)}}}),t("el-option",{attrs:{label:"删除",value:"3"},nativeOn:{click:function(t){return e.handleDel(a,i)}}})],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)],1)},i=[],o=(n("aa18"),n("982e"),n("fc02"),n("5a04")),r=n("8201"),s={data:function(){return{loading:!1,page:{pageSize:10,currentPage:1,total:0},option:{selection:!0,align:"left",labelWidth:100,dialogClickModal:!1,lazy:!0,height:"auto",calcHeight:80,tip:!1,border:!0,menuWidth:180,index:!0,searchShow:!0,searchMenuSpan:4,searchSpan:5,columnBtn:!1,refreshBtn:!1,searchShowBtn:!1,delBtn:!1,editBtn:!1,column:[{label:"学生姓名",prop:"name",type:"input",width:150,display:!1},{label:"性别",prop:"sex",type:"radio",width:80,display:!1,dicUrl:"/api/blade-system/dict/dictionary?code=sex",props:{label:"dictValue",value:"dictKey"}},{label:"学段",prop:"studentStage",type:"select",search:!0,width:140,searchOrder:2,searchSpan:7,searchPlaceholder:"请选择学段",dicUrl:"/api/blade-system/dict-biz/dictionary?code=learn_stage",props:{label:"dictValue",value:"dictKey"},display:!1},{label:"区域",prop:"region",type:"cascader",search:!0,searchOrder:1,searchSpan:7,minWidth:150,searchPlaceholder:"请选择区域",display:!1,props:{label:"name",value:"code"},lazy:!0,lazyLoad:function(e,t){var n=1,a=e.level,i=e.data||{},r=i.code,s=[],l=function(){t((s||[]).map((function(e){return Object.assign(e,{leaf:a>=n})})))};0==a&&Object(o["getLazyList"])({parentCode:"34"}).then((function(e){console.log("R1",e),s=e.data.data,l()})),1==a?Object(o["getLazyList"])({parentCode:r}).then((function(e){console.log("R2",e),s=e.data.data,l()})):l()}},{label:"学校",prop:"school",type:"input",display:!1},{label:"家长联系方式",prop:"phone",type:"input",display:!1},{label:"创建时间",prop:"createTime",type:"datetime",searchSpan:10,searchOrder:3,dateDefault:!0,format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",searchRange:!0,search:!0,searchClearable:!1,display:!1},{label:"模糊查询",prop:"keyWord",type:"input",searchPlaceholder:"请输入学生姓名，家长联系方式",search:!0,searchSpan:7,searchOrder:4,display:!1,hide:!0}],group:[{label:"联系人信息",prop:"contactsInfo",column:[{label:"",labelWidth:0,prop:"contactsTable",span:24,formslot:!0}]},{label:"学生信息",prop:"studentInfo",column:[{label:"学生姓名",prop:"name",type:"input"},{label:"性别",prop:"sex",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=sex",props:{label:"dictValue",value:"dictKey"}},{label:"学段",prop:"studentStage",type:"select",dicUrl:"/api/blade-system/dict-biz/dictionary?code=learn_stage",props:{label:"dictValue",value:"dictKey"}},{label:"区域",prop:"region",type:"cascader",props:{label:"name",value:"code"},lazy:!0,lazyLoad:function(e,t){var n=1,a=e.level,i=e.data||{},r=i.code,s=[],l=function(){t((s||[]).map((function(e){return Object.assign(e,{leaf:a>=n})})))};0==a&&Object(o["getLazyList"])({parentCode:"34"}).then((function(e){console.log("1",e),s=e.data.data,l()})),1==a?Object(o["getLazyList"])({parentCode:r}).then((function(e){console.log("2",e),s=e.data.data,l()})):l()}},{label:"学校",prop:"school",type:"input"},{label:"创建时间",prop:"create_time",type:"datetime",dateDefault:!0,format:"yyyy-MM-dd",valueFormat:"yyyy-MM-dd",addDisplay:!1,editDisplay:!1,viewDisplay:!1},{label:"备注",prop:"note",type:"textarea",maxlength:200,span:24}]},{label:"咨询记录",prop:"consultInfo",column:[{label:"",labelWidth:0,prop:"consultTable",span:24,formslot:!0}]},{label:"回访记录",prop:"visitInfo",column:[{label:"",labelWidth:0,prop:"visitTable",span:24,formslot:!0}]}]},data:[],form:{},regionProps:{label:"name",value:"code",expandTrigger:"hover",lazy:!0,lazyLoad:function(e,t){var n=1,a=e.level,i=e.data||{},r=i.code,s=[],l=function(){t((s||[]).map((function(e){return Object.assign(e,{leaf:a>=n})})))};0==a&&Object(o["getLazyList"])({parentCode:"34"}).then((function(e){s=e.data.data,l()})),1==a?Object(o["getLazyList"])({parentCode:r}).then((function(e){s=e.data.data,l()})):l()}},searchData:{endTime:null,keyWord:"",region:[],startTime:null,studentStage:""},formData:{contactsInfo:{option:{index:!0,selection:!1,align:"left",dialogClickModal:!1,columnBtn:!1,refreshBtn:!1,delBtn:!1,column:[{label:"联系电话",type:"input",prop:"phone"},{label:"姓名",type:"input",prop:"name"},{label:"与学生关系",type:"radio",prop:"relationship",dicUrl:"/api/blade-system/dict-biz/dictionary?code=relationship",props:{label:"dictValue",value:"dictKey"}}]},data:[],form:{}},consultInfo:{option:{index:!0,selection:!1,align:"left",dialogClickModal:!1,columnBtn:!1,refreshBtn:!1,addBtn:!1,delBtn:!1,editBtn:!1,column:[{label:"类型",type:"input"},{label:"内容",type:"input"},{label:"时间",type:"input"},{label:"总时长",type:"input"},{label:"坐席专家工号/手机号",type:"input"},{label:"坐席专家处理内容",type:"input"},{label:"资深专家姓名",type:"input"},{label:"资深专家处理内容",type:"input"},{label:"是否紧急处理",type:"input"}]},data:[],form:{}},visitInfo:{option:{index:!0,selection:!1,align:"left",dialogClickModal:!1,columnBtn:!1,refreshBtn:!1,addBtn:!1,delBtn:!1,editBtn:!1,ment:!1,menuWidth:60,column:[{label:"时间",type:"input"},{label:"状态",type:"input"},{label:"时长",type:"input"},{label:"坐席专家工号/手机号",type:"input"},{label:"坐席专家处理内容",type:"input"}]},data:[],form:{}}}}},created:function(){this,this.onLoad(this.page)},methods:{searchChange:function(e,t){if(console.log("queryparams",e),this.searchData.region=e.region,this.searchData.studentStage=e.studentStage,e.region instanceof Array&&(this.searchData.region=e.region.join(",")),e.createTime instanceof Array)this.searchData.startTime=e.createTime[0],this.searchData.endTime=e.createTime[1];else if(e.createTime){var n=e.createTime.split(",");this.searchData.startTime=n[0],this.searchData.endTime=n[1]}else this.searchData.startTime=null,this.searchData.endTime=null;this.searchData.keyWord=e.keyWord,this.page.currentPage=1,this.onLoad(this.page,this.searchData),t()},searchReset:function(){this.searchData={endTime:null,keyWord:"",region:[],startTime:null,studentStage:""},this.page.currentPage=1,this.onLoad(this.page)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,console.log("onload",n),Object(r["getList"])(e.currentPage,e.pageSize,n).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records;for(var a=0;a<t.data.length;a++)t.data[a].hasOwnProperty("region")&&(t.data[a].region=t.data[a].region.split(","));console.log(t.data),t.loading=!1,t.selectionClear()}))},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},rePage:function(){this.page={pageSize:10,currentPage:1,total:0}},handleEditRow:function(e,t){this.$refs.crud.rowEdit(e,t),this.activeValue=null},handleViewRow:function(e,t){this.$refs.crud.rowView(e,t),this.activeValue=null},handleOpenConsult:function(e,t){},handleOpenVisit:function(e,t){},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getOne"])(this.form.id).then((function(e){n.form=e.data.data,n.form.hasOwnProperty("region")&&(n.form.region=n.form.region.split(",")),n.formData.contactsInfo.data=n.form.contactsInfo,n.formData.consultInfo.data=n.form.contactRecords,n.formData.visitInfo.data=n.form.visitRecords,console.log("one",n.form)})),e()},handleDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},rowUpdate:function(e,t,n,a){var i=this;e.region instanceof Array&&(e.region=e.region.join(",")),console.log("update",e),Object(r["update"])(e).then((function(){i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowSave:function(e,t,n){var a=this;e.region instanceof Array&&(e.region=e.region.join(",")),Object(r["add"])(e).then((function(){a.$message({type:"success",message:"操作成功!"},(function(e){window.console.log(e),n()})),t()}))},contactsRowUpdate:function(e,t,n,a){var i=this;contactsUpdate(e).then((function(){i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},contactsRowSave:function(e,t,n){}}},l=s,c=n("829d"),d=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=d.exports},a7ae:function(e,t,n){"use strict";n.r(t);n("3441");var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("el-row",{attrs:{type:"flex"}},[t("el-col",{staticStyle:{"padding-left":"32px"},attrs:{span:6}},[t("span",[e._v("标题")]),t("el-input",{staticStyle:{width:"60%","margin-left":"15px"},attrs:{placeholder:"请输入内容"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),t("el-col",{attrs:{span:6}},[t("span",[e._v("发布状态")]),t("el-select",{staticStyle:{width:"60%","margin-left":"15px"},attrs:{placeholder:"请选择"},model:{value:e.formData.releaseStatus,callback:function(t){e.$set(e.formData,"releaseStatus",t)},expression:"formData.releaseStatus"}},[t("el-option",{attrs:{label:"是",value:0}}),t("el-option",{attrs:{label:"否",value:1}}),t("el-option",{attrs:{label:"定时发布",value:2}})],1)],1),t("el-col",{attrs:{span:6}},[t("span",[e._v("发布时间")]),t("el-date-picker",{staticStyle:{width:"75%","margin-left":"15px"},attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formData.releaseTime,callback:function(t){e.$set(e.formData,"releaseTime",t)},expression:"formData.releaseTime"}})],1),t("el-col",{staticStyle:{"margin-left":"80px"},attrs:{span:6}},[t("span",[e._v("是否公开")]),t("el-select",{staticStyle:{width:"60%","margin-left":"15px"},attrs:{placeholder:"请选择"},model:{value:e.formData.isShow,callback:function(t){e.$set(e.formData,"isShow",t)},expression:"formData.isShow"}},[t("el-option",{attrs:{label:"是",value:0}}),t("el-option",{attrs:{label:"否",value:1}})],1)],1)],1),t("el-row",{staticStyle:{"margin-top":"15px"},attrs:{type:"flex"}},[t("el-col",{attrs:{span:6}},[t("span",[e._v("所属栏目")]),t("el-cascader",{staticStyle:{"margin-left":"15px"},attrs:{props:{label:"name",value:"name",checkStrictly:!0},options:e.columnList},model:{value:e.formData.belongToColumn,callback:function(t){e.$set(e.formData,"belongToColumn",t)},expression:"formData.belongToColumn"}})],1),t("el-col",{attrs:{span:6}},[t("span",{staticStyle:{"margin-right":"33px"}},[e._v("作者")]),t("el-input",{staticStyle:{width:"60%","margin-left":"15px"},attrs:{placeholder:"请输入内容"},model:{value:e.formData.author,callback:function(t){e.$set(e.formData,"author",t)},expression:"formData.author"}})],1),t("el-col",{attrs:{span:6}},[t("span",[e._v("到期时间")]),t("el-date-picker",{staticStyle:{width:"75%","margin-left":"15px"},attrs:{type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formData.expireDate,callback:function(t){e.$set(e.formData,"expireDate",t)},expression:"formData.expireDate"}})],1),t("el-col",{staticStyle:{"margin-left":"80px"},attrs:{span:6,align:"center"}},[t("el-button",{attrs:{type:"primary",plain:""},on:{click:e.searchPub}},[e._v("搜索")]),t("el-button",{on:{click:function(t){e.formData={}}}},[e._v("清空")])],1)],1),t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-plus"},on:{click:e.addPub}},[e._v("新增")])],1),t("el-row",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:!0,"row-key":"id","header-cell-style":{background:"#e0e2ec"}}},[t("el-table-column",{attrs:{align:"center",type:"selection"}}),t("el-table-column",{attrs:{label:"标题",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.title))])]}}])}),t("el-table-column",{attrs:{label:"所属栏目",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.parentColumn)+e._s(n.row.columnName?"/".concat(n.row.columnName):""))])]}}])}),t("el-table-column",{attrs:{label:"发布状态",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(e._f("status")(n.row.releaseStatus)))])]}}])}),t("el-table-column",{attrs:{label:"作者",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.author))])]}}])}),t("el-table-column",{attrs:{label:"发布时间",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.releaseTime))])]}}])}),t("el-table-column",{attrs:{label:"到期时间",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.expireDate))])]}}])}),t("el-table-column",{attrs:{label:"排序",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.sort))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("span",[t("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[t("el-option",{attrs:{label:"查看",value:"1"},nativeOn:{click:function(t){return e.watchInfoPub(a.id)}}}),t("el-option",{attrs:{label:"编辑",value:"2"},nativeOn:{click:function(t){return e.editInfoPub(a.id)}}}),t("el-option",{attrs:{label:"删除",value:"3"},nativeOn:{click:function(t){return e.delInfoPub(a)}}})],1)],1)]}}])})],1)],1),t("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"center",align:"middle"}},[t("el-pagination",{attrs:{layout:"prev, pager, next,sizes","page-size":e.page.size,"current-page":e.page.surrent,total:e.page.total,"page-sizes":[10,20,30]},on:{"current-change":e.changeCurrent,"size-change":e.changeSize}})],1)],1),t("AddInfopublic",{ref:"addpublic",attrs:{columnList:e.columnList,title:e.title}})],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("b704")),r=n("f076"),s=(n("352e"),n("2a53")),l=n("f1d1"),c=n("a9b5"),d=n("d279"),u=n("84df");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"InfoPub",components:{AddInfopublic:d["default"]},filters:{status:function(e){return 0===e?"是":1===e?"否":2===e?"定时发布":void 0}},data:function(){return{list:[],columnList:[],loading:!1,page:{current:1,size:10,total:0},formData:{title:"",releaseStatus:null,releaseTime:"",belongToColumn:"",author:"",expireDate:"",isShow:null},title:"",selectValue:null}},created:function(){this.getInfoPubList(),this.getAllColumnList()},methods:{getInfoPubList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(l["getInfoPubList"])(h(h({},this.formData),this.page));case 3:t=e.sent,n=t.data,this.list=n.data.records,this.page.total=n.data.total,this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getAllColumnList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["getList"])();case 2:t=e.sent,n=t.data,this.columnList=n.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addPub:function(){this.title="新增发布",this.$refs.addpublic.dialogShow=!0},changeCurrent:function(e){this.page.current=e,this.getInfoPubList()},changeSize:function(e){this.page.size=e,this.getInfoPubList()},searchPub:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.formData.belongToColumn&&this.formData.belongToColumn.length>0&&(this.formData.parentColumn=this.formData.belongToColumn[0]||"",this.formData.columnName=this.formData.belongToColumn[1]||""),this.formData.releaseTime&&this.formData.releaseTime.length>0&&(this.formData.releaseStartTime=Object(u["b"])(new Date(this.formData.releaseTime[0]))||"",this.formData.releaseEndTime=Object(u["b"])(new Date(this.formData.releaseTime[1]))||""),this.formData.expireDate&&this.formData.expireDate.length>0&&(this.formData.expireStartDate=Object(u["b"])(new Date(this.formData.expireDate[0]))||"",this.formData.expireEndDate=Object(u["b"])(new Date(this.formData.expireDate[1]))||""),this.formData.releaseTime="",this.formData.expireDate="",console.log(this.formData),this.getInfoPubList();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delInfoPub:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectValue=null,e.prev=1,e.next=4,this.$confirm("确认删除吗？");case 4:return 1===this.list.length&&1!==this.page.current&&this.page.current--,e.next=7,Object(l["remove"])(t.id);case 7:this.$message.success("删除成功！"),this.getInfoPubList(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),watchInfoPub:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectValue=null,this.title="信息查看",e.next=4,Object(l["getOneData"])(t);case 4:n=e.sent,a=n.data,i=h({},a.data),console.log(a.data),i.columnName&&i.columnName.length>0?i.belongToColumn=[i.parentColumn,i.columnName]:i.belongToColumn=[i.parentColumn],0===i.isShow?i.isShow="是":1===i.isShow?i.isShow="否":i.isShow=null,"0"===i.releaseScope?i.releaseScope=["PC"]:"1"===i.releaseScope?i.releaseScope=["移动端"]:"0,1"===i.releaseScope||"1,0"===i.releaseScope?i.releaseScope=["移动端","PC"]:i.releaseScope=[],0===i.releaseStatus?i.releaseStatus="是":1===i.releaseStatus?i.releaseStatus="否":2===i.releaseStatus?i.releaseStatus="定时发布":i.releaseStatus=null,i.releaseTime=i.releaseTime.length>0?new Date(i.releaseTime):"",i.expireDate=i.expireDate.length>0?new Date(i.expireDate):"",this.$refs.addpublic.formData=h({},i),this.$refs.addpublic.fileListA=Object(o["a"])(i.imageInformation),this.$refs.addpublic.fileListB=Object(o["a"])(i.attachInformation),this.$refs.addpublic.dialogShow=!0;case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),editInfoPub:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectValue=null,this.title="编辑发布",e.next=4,Object(l["getOneData"])(t);case 4:n=e.sent,a=n.data,i=h({},a.data),console.log(a.data),i.columnName&&i.columnName.length>0?i.belongToColumn=[i.parentColumn,i.columnName]:i.belongToColumn=[i.parentColumn],0===i.isShow?i.isShow="是":1===i.isShow?i.isShow="否":i.isShow=null,"0"===i.releaseScope?i.releaseScope=["PC"]:"1"===i.releaseScope?i.releaseScope=["移动端"]:"0,1"===i.releaseScope||"1,0"===i.releaseScope?i.releaseScope=["移动端","PC"]:i.releaseScope=[],0===i.releaseStatus?i.releaseStatus="是":1===i.releaseStatus?i.releaseStatus="否":2===i.releaseStatus?i.releaseStatus="定时发布":i.releaseStatus=null,i.releaseTime=i.releaseTime.length>0?new Date(i.releaseTime):"",i.expireDate=i.expireDate.length>0?new Date(i.expireDate):"",this.$refs.addpublic.fileListA=Object(o["a"])(i.imageInformation),this.$refs.addpublic.fileListB=Object(o["a"])(i.attachInformation),this.$refs.addpublic.formData=h({},i),this.$refs.addpublic.dialogShow=!0;case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},g=f,m=(n("150a"),n("829d")),v=Object(m["a"])(g,a,i,!1,null,"4cd8c634",null);t["default"]=v.exports},ab7b:function(e,t,n){"use strict";n.r(t);n("3441"),n("a450");var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("el-row",{attrs:{type:"flex"}},[t("el-col",{staticStyle:{"margin-right":"20px"}},[t("span",[e._v("栏目名称")]),t("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-col",{staticStyle:{"margin-right":"20px"}},[t("span",[e._v("显示模式")]),t("el-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.form.displayMode,callback:function(t){e.$set(e.form,"displayMode",t)},expression:"form.displayMode"}},[t("el-option",{attrs:{label:"主目录",value:0}}),t("el-option",{attrs:{label:"单页",value:1}}),t("el-option",{attrs:{label:"列表",value:2}}),t("el-option",{attrs:{label:"URL",value:3}})],1)],1),t("el-col",{staticStyle:{"margin-right":"-15px"}},[t("span",[e._v("排序")]),t("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",e._n(t))},expression:"form.sort"}})],1),t("el-col",{staticStyle:{"margin-right":"50px"}},[t("span",[e._v("是否公开")]),t("el-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:e.form.isShow,callback:function(t){e.$set(e.form,"isShow",t)},expression:"form.isShow"}},[t("el-option",{attrs:{label:"是",value:0}}),t("el-option",{attrs:{label:"否",value:1}})],1)],1),t("el-col",[t("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:e.searchList}},[e._v("搜索")]),t("el-button",{attrs:{size:"medium"},on:{click:function(t){e.form={}}}},[e._v("清空")])],1)],1),t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini",plain:""},on:{click:e.addColumn}},[e._v("新增")])],1),t("el-row",{staticStyle:{"margin-top":"10px"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:!0,"row-key":"id","tree-props":{children:"children"},"header-cell-style":{background:"#e0e2ec"}}},[t("el-table-column",{attrs:{align:"center",type:"selection"}}),t("el-table-column",{attrs:{label:"栏目名称",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.name))])]}}])}),t("el-table-column",{attrs:{label:"显示模式",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(e._f("changeMode")(n.row.displayMode)))])]}}])}),t("el-table-column",{attrs:{label:"发布范围",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(e._f("changeReleaseScope")(n.row.releaseScope)))])]}}])}),t("el-table-column",{attrs:{label:"显示排序",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.sort))])]}}])}),t("el-table-column",{attrs:{label:"是否公开",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(0===n.row.isShow?"是":"否"))])]}}])}),t("el-table-column",{attrs:{label:"备注",width:"220",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",[e._v(e._s(n.row.remark))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("span",[t("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},[t("el-option",{attrs:{label:"查看",value:"1"},nativeOn:{click:function(t){return e.watchColumn(a)}}}),t("el-option",{attrs:{label:"编辑",value:"2"},nativeOn:{click:function(t){return e.editColumn(a)}}}),t("el-option",{attrs:{label:"删除",value:"3"},nativeOn:{click:function(t){return e.delColumn(a)}}}),0===a.parentId?t("el-option",{attrs:{label:"新增子项",value:"4"},nativeOn:{click:function(t){return e.addChildColumn(a)}}}):e._e()],1)],1)]}}])})],1)],1)],1),t("AddColumn",{ref:"addcolumn",attrs:{title:e.title,showBtn:e.showBtn,list:e.list}})],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("f076")),r=(n("352e"),n("2a53")),s=n("a9b5"),l=n("537f"),c=n("84df");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"COLUMN",components:{AddColumn:l["default"]},data:function(){return{form:{name:"",displayMode:null,sort:null,isShow:null},list:[],title:"",showBtn:!0,loading:!1,selectValue:null}},filters:{changeMode:function(e){return 0===e?"主目录":1===e?"单页":2===e?"列表":"URL"},changeReleaseScope:function(e){return 0==e?"PC":1==e?"移动端":"PC 、移动端"}},created:function(){this.getList()},methods:{getList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(s["getList"])();case 3:t=e.sent,n=t.data,this.list=n.data,this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addColumn:function(){this.title="新增栏目",this.showBtn=!0,this.$refs.addcolumn.dialogFormVisible=!0},searchList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["searchList"])(this.form);case 2:t=e.sent,n=t.data,this.list=n.data;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delColumn:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectValue=null,n={},n.id=t.id,n.parentId=t.parentId,n.updateTime=Object(c["b"])(new Date),e.prev=5,e.next=8,this.$confirm("确认删除吗?");case 8:return e.next=10,Object(s["remove"])(n);case 10:this.$message.success("删除成功！"),this.getList(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[5,14]])})));function t(t){return e.apply(this,arguments)}return t}(),watchColumn:function(e){this.selectValue=null,this.title="查看栏目",this.showBtn=!1,this.fn(e)},editColumn:function(e){this.selectValue=null,this.title="编辑栏目",this.showBtn=!0,this.fn(e)},addChildColumn:function(e){this.selectValue=null,this.title="新增子栏目",this.showBtn=!0,this.$refs.addcolumn.formData.class="子目录",this.$refs.addcolumn.formData.parentId=e.id,this.$refs.addcolumn.dialogFormVisible=!0},fn:function(e){var t=u({},e);0===t.parentId?t.class="主目录":t.class="子目录","0"===t.releaseScope?t.releaseScope=["PC"]:"1"===t.releaseScope?t.releaseScope=["移动端"]:"0,1"!==t.releaseScope&&"1,0"!==t.releaseScope||(t.releaseScope=["移动端","PC"]),0===t.isShow?t.isShow=!0:1===t.isShow&&(t.isShow=!1),this.$refs.addcolumn.formData=u({},t),this.$refs.addcolumn.dialogFormVisible=!0}}},h=p,f=(n("1c18"),n("829d")),g=Object(f["a"])(h,a,i,!1,null,"845551b6",null);t["default"]=g.exports},ac70:function(e,t,n){"use strict";n("cfa5")},ae84:function(e,t,n){},b6f8:function(e,t,n){"use strict";n.r(t);n("d91d");var a,i=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:24}},[t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,data:e.data,search:e.search,"before-open":e.beforeOpen},on:{"update:search":function(t){e.search=t},"search-change":e.searchChange,"search-reset":e.searchReset,"row-update":e.rowUpdate,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"domain",fn:function(t){return[e._v("\n          "+e._s(e._f("domainFilter")(t.row.domain))+"\n        ")]}},{key:"phone",fn:function(t){return[e._v("\n          "+e._s(e._f("phoneFilter")(t.row.phone))+"\n        ")]}},{key:"menu",fn:function(n){var a=n.row,i=n.index;return[t("el-select",{staticClass:"statictis-select",attrs:{placeholder:"操作"},model:{value:e.activeValue,callback:function(t){e.activeValue=t},expression:"activeValue"}},[t("el-option",{attrs:{label:"查看用户信息",value:"1"},nativeOn:{click:function(t){return e.handleViewRow(a,i)}}}),t("el-option",{attrs:{label:"编辑用户信息",value:"2"},nativeOn:{click:function(t){return e.handleEditRow(a,i)}}}),t("el-option",{attrs:{label:"查看排班",value:"3"},nativeOn:{click:function(t){return e.handlePlan(a,i)}}})],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"1464227359223783426"==e.userType?"primary":"",size:"medium "},on:{click:function(t){return e.handleChangeUserType("1464227359223783426")}}},[e._v("资深专家\n          ")]),t("el-button",{attrs:{type:"1464227306195197954"==e.userType?"primary":"",size:"medium "},on:{click:function(t){return e.handleChangeUserType("1464227306195197954")}}},[e._v("客服专家\n          ")])],1)],2)],1)],1)],1)},o=[],r=(n("9f60"),n("94f0"),n("0c84"),n("2843"),n("a450"),n("4057"),n("aa18"),n("982e"),n("8dee"),n("1bc7"),n("fc02"),n("c0c7")),s=n("5a04"),l=n("8ddc"),c=(n("7754"),n("fcb7")),d=n("1ca4");function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f={filters:{domainFilter:function(e){var t=e.split(","),n="";return t.forEach((function(e){for(var t=0;t<a.enums.domain.length;t++)e==a.enums.domain[t].dictKey&&(n=n+"，"+a.enums.domain[t].dictValue)})),n.substr(1)},phoneFilter:function(e){return e.replace(/(.{3}).*(.{2})/,"$1******$2")}},data:function(){return{activeValue:null,userType:"1464227359223783426",enums:{depts:[],domain:[]},form:{},query:{roleId:"1464227359223783426"},search:{},page:{pageSize:10,currentPage:1,total:0},option:{selection:!0,align:"center",labelWidth:100,dialogClickModal:!1,lazy:!0,height:"auto",calcHeight:80,tip:!1,border:!0,index:!1,menuWidth:180,searchShow:!0,searchMenuSpan:4,searchSpan:5,addBtn:!1,columnBtn:!1,refreshBtn:!1,searchShowBtn:!1,delBtn:!1,editBtn:!1,column:[{label:"用户姓名",prop:"realName",search:!0,searchOrder:1,display:!1,width:150},{label:"性别",prop:"sex",type:"select",search:!0,display:!1,dicUrl:"/api/blade-system/dict/dictionary?code=sex",props:{label:"dictValue",value:"dictKey"},searchOrder:4,width:100},{label:"联系方式",prop:"phone",search:!0,display:!1,searchOrder:5,width:200},{label:"心理职级",prop:"ranks",type:"select",search:!0,display:!1,dicUrl:"/api/blade-system/dict-biz/dictionary?code=psychological_rank",props:{label:"dictValue",value:"dictKey"},searchOrder:3,width:150},{label:"心理职称",prop:"title",type:"select",search:!0,display:!1,dicUrl:"/api/blade-system/dict-biz/dictionary?code=psychological_title",props:{label:"dictValue",value:"dictKey"},searchOrder:7,width:150},{label:"所属机构",prop:"deptName",search:!0,searchOrder:2,display:!1},{label:"擅长领域",prop:"domainName",search:!0,searchOrder:5,display:!1,minWidth:150},{label:"是否公开",prop:"isPublic",type:"select",search:!0,dicUrl:"/api/blade-system/dict-biz/dictionary?code=is_public",props:{label:"dictValue",value:"dictKey"},searchOrder:8,display:!1,width:100}],group:[{label:"基础信息",prop:"baseInfo",icon:"el-icon-user-solid",column:[{label:"登录账号",prop:"account",rules:[{required:!0,message:"请输入登录账号",trigger:"blur"}]}]},{label:"详细信息",prop:"detailInfo",icon:"el-icon-s-order",column:[{label:"用户昵称",prop:"name",hide:!0,rules:[{required:!0,message:"请输入用户昵称",trigger:"blur"}]},{label:"用户姓名",prop:"realName",rules:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:2,max:5,message:"姓名长度在2到5个字符"}]},{label:"联系方式",prop:"phone",overHidden:!0,rules:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},{label:"电子邮箱",prop:"email",hide:!0,overHidden:!0},{label:"其他联系方式",prop:"otherPhone",overHidden:!0,rules:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},{label:"用户性别",prop:"sex",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=sex",hide:!0,props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择性别",trigger:"blur"}]},{label:"用户生日",type:"date",prop:"birthday",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",hide:!0},{label:"账号状态",prop:"statusName",hide:!0,display:!1}]},{label:"职责信息",prop:"dutyInfo",icon:"el-icon-s-custom",column:[{label:"所属角色",prop:"roleId",type:"select",dicData:[{title:"专家",value:"1464227306195197954"},{title:"专家",value:"1464227359223783426"}],props:{label:"title"},rules:[{required:!0,message:"请选择所属角色",trigger:"blur"}]},{label:"所属机构",prop:"deptId",type:"tree",dicData:[],props:{label:"title"},rules:[{required:!0,message:"请选择所属机构",trigger:"blur"}]},{label:"所属区域",prop:"region",type:"cascader",props:{label:"name",value:"code"},lazy:!0,lazyLoad:function(e,t){console.log("lazyLoad",e,t);var n=1,a=e.level,i=e.data||{},o=i.code,r=[];console.log("code",o);var l=function(){t((r||[]).map((function(e){return Object.assign(e,{leaf:a>=n})})))};0==a&&Object(s["getLazyList"])({parentCode:"00"}).then((function(e){console.log("1",e),r=e.data.data,l()})),1==a?Object(s["getLazyList"])({parentCode:o}).then((function(e){console.log("2",e),r=e.data.data,l()})):l()}},{label:"显示排序",prop:"dispSort",type:"number",display:!0,align:"right",rules:[{required:!0,message:"请指定排序顺序",trigger:"blur"}]},{label:"心理职级",prop:"ranks",type:"select",display:!0,dicUrl:"/api/blade-system/dict-biz/dictionary?code=psychological_rank",props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择心理职级",trigger:"blur"}]},{label:"心理职称",prop:"title",type:"select",display:!0,editDisabled:!0,dicUrl:"/api/blade-system/dict-biz/dictionary?code=psychological_title",props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择心理职称",trigger:"blur"}]},{label:"证书上传",prop:"certificate",type:"upload",display:!0,multiple:!0,listType:"picture-card",dataType:"string",action:"/api/blade-resource/oss/endpoint/put-file-attach",propsHttp:{res:"data",url:"link"},tip:"只能上传jpg/png文件，且不超过1M",hide:!0,span:24},{label:"擅长领域",prop:"domain",type:"select",display:!0,multiple:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},span:24,rules:[{required:!0,message:"请选择所擅长领域",trigger:"blur"}]},{label:"个人简介",prop:"info",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{required:!0,message:"请填写个人简介",trigger:"blur"},{max:200,message:"请输入200字以内",trigger:"blur"}]},{label:"荣誉称号",prop:"honoraryTitle",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{max:200,message:"请输入200字以内",trigger:"blur"}]},{label:"科研著作",prop:"researchWork",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{max:200,message:"请输入200字以内",trigger:"blur"}]},{label:"头象上传",prop:"head",type:"upload",display:!0,listType:"picture-img",span:24,propsHttp:{res:"data",url:"link"},canvasOption:{text:"avue",ratio:.1},tip:"只能上传jpg/png文件，且不超过10M",action:"/api/blade-resource/oss/endpoint/put-file-attach",rules:[{required:!0,message:"请上传头相",trigger:"blur"}]},{label:"是否公开",prop:"isPublic",type:"switch",display:!0,dicData:[{label:"",value:"2"},{label:"",value:"1"}],value:0,rules:[{required:!0,message:"请选择是否公开",trigger:"blur"}]}]}]},data:[]}},watch:{},computed:{},mounted:function(){},created:function(){a=this,this.InitEnums(),this.onLoad(this.page)},methods:{InitEnums:function(){var e=this;Object(c["getDeptTree"])(d["a"].tenantId).then((function(t){e.enums.depts=t.data.data})),Object(l["getDictionary"])({code:"domain"}).then((function(t){e.enums.domain=t.data.data}))},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query),this.treeDeptId).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getUser"])(this.form.id).then((function(e){n.form=e.data.data,n.form.hasOwnProperty("region")&&(n.form.region=n.form.region.split(",")),n.form.hasOwnProperty("domain")&&(n.form.domain=n.form.domain.split(",")),n.form.hasOwnProperty("postId")&&(n.form.postId=n.form.postId.split(","))})),Object(c["getDeptTree"])(d["a"].tenantId).then((function(e){var t=n.findObject(n.option.group,"deptId");t.dicData=e.data.data})),Object(l["getDictionary"])({code:"domain"}).then((function(e){var t=n.findObject(n.option.group,"domain");t.dicData=e.data.data})),e()},treeFind:function(e,t){var n,a=u(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==t)return i;if(i.children){var o=this.treeFind(i.children,t);if(o)return o}}}catch(r){a.e(r)}finally{a.f()}return null},handleViewRow:function(e,t){this.$refs.crud.rowView(e,t),this.activeValue=null},handleEditRow:function(e,t){this.$refs.crud.rowEdit(e,t),this.activeValue=null},searchReset:function(){this.query={},this.query.roleId=this.userType,this.treeDeptId="",this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.query.roleId=this.userType,this.onLoad(this.page,this.query),t()},rePage:function(){this.page={pageSize:10,currentPage:1,total:0}},rowUpdate:function(e,t,n,a){var i=this;e.domain=e.domain.join(","),e.postId=e.postId.join(","),e.region=e.region.join(","),Object(r["update"])(e).then((function(){i.initFlag=!1,i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},handleChangeUserType:function(e){this.userType=e,this.query.roleId=e,this.rePage(),this.onLoad(this.page,this.query)},handlePlan:function(e,t){this.activeValue=null}}},g=f,m=(n("c833"),n("829d")),v=Object(m["a"])(g,i,o,!1,null,null,null);t["default"]=v.exports},b74c:function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.optionParent,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-setting",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleRowClick(n.row)}}},[e._v("字典配置\n      ")]):e._e()]}},{key:"code",fn:function(n){var a=n.row;return[t("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handleRowClick(a)}}},[e._v(e._s(a.code))])]}},{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[t("template",{slot:"menuLeft"},[e.permission.dictbiz_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"[".concat(e.dictValue,"]字典配置"),"append-to-body":"",visible:e.box,width:"1000px"},on:{"update:visible":function(t){e.box=t}}},[t("avue-crud",{ref:"crudChild",attrs:{option:e.optionChild,"table-loading":e.loadingChild,data:e.dataChild,permission:e.permissionList,"before-open":e.beforeOpenChild,"before-close":e.beforeCloseChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n        ")]):e._e()]}},{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n        ")]):e._e()],1)],2)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("8ddc"),s=n("d4f4"),l=n("5880");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{dictValue:"暂无",parentId:-1,formParent:{},formChild:{},selectionList:[],query:{},box:!1,loading:!0,loadingChild:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],optionParent:s["optionParent"],optionChild:s["optionChild"]}},computed:d(d({},Object(l["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dictbiz_add,!1),delBtn:this.vaildData(this.permission.dictbiz_delete,!1),editBtn:this.vaildData(this.permission.dictbiz_edit,!1),viewBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.formChild.dictValue="",this.formChild.dictKey="",this.formChild.sort=0,this.formChild.isSealed=0,this.formChild.remark="",this.formChild.parentId=e.id,this.$refs.crudChild.rowAdd()},rowSave:function(e,t,n){var a=this,i=d(d({},e),{},{dictKey:-1});Object(r["add"])(i).then((function(){a.onLoadParent(a.pageParent),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),i.onLoadChild(i.pageChild),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})}))},handleRowClick:function(e){this.query={},this.parentId=e.id,this.dictValue=e.dictValue;var t=this.findObject(this.optionChild.column,"code");t.value=e.code;var n=this.findObject(this.optionChild.column,"parentId");n.value=e.id,this.box=!0,this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.pageParent,this.query)},rowSaveChild:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoadChild(a.pageChild),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(r["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},beforeCloseChild:function(e){var t=this;this.$refs.crudChild.value.parentId=this.parentId,this.$refs.crudChild.option.column.filter((function(e){"parentId"===e.prop&&(e.value=t.parentId)})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loadingChild=!0,Object(r["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){t.dataChild=e.data.data,t.loadingChild=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},b7b4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"people-response"},[t("h-content-list",{attrs:{list:e.list}}),t("h-pagination",{attrs:{total:80},on:{handleCurrentPage:e.handleCurrentPage}})],1)},i=[],o=n("99b7"),r=n("454e"),s={components:{hPagination:r["default"],HContentList:o["default"]},name:"people-response",data:function(){return{list:[{title:"党的二十大代表怎么选？",time:"2021-11-23 17:63:09"}]}},methods:{handleCurrentPage:function(e){console.log(e)}}},l=s,c=(n("00cd"),n("829d")),d=Object(c["a"])(l,a,i,!1,null,"d014a28a",null);t["default"]=d.exports},b803:function(e,t,n){},b979:function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e"),n("d91d");var a=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:24}},[t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,search:e.search,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,page:e.page},on:{"update:search":function(t){e.search=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.user_delete?t("el-button",{attrs:{type:"danger",size:"small",plain:"",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("删 除\n          ")]):e._e(),e.permission.user_reset?t("el-button",{attrs:{type:"info",size:"small",plain:"",icon:"el-icon-refresh"},on:{click:e.handleReset}},[e._v("密码重置\n          ")]):e._e(),e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"warning",size:"small",plain:"",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出\n          ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"用户角色配置","append-to-body":"",visible:e.roleBox,width:"345px"},on:{"update:visible":function(t){e.roleBox=t}}},[t("el-tree",{ref:"treeRole",attrs:{data:e.roleGrantList,"show-checkbox":"","check-strictly":"","default-expand-all":"","node-key":"id","default-checked-keys":e.roleTreeObj,props:e.props}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.roleBox=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitRole}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"用户数据导入","append-to-body":"",visible:e.excelBox,width:"555px"},on:{"update:visible":function(t){e.excelBox=t}}},[t("avue-form",{attrs:{option:e.excelOption,"upload-after":e.uploadAfter},model:{value:e.excelForm,callback:function(t){e.excelForm=t},expression:"excelForm"}},[t("template",{slot:"excelTemplate"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleTemplate}},[e._v("\n              点击下载"),t("i",{staticClass:"el-icon-download el-icon--right"})])],1)],2)],1),t("el-dialog",{attrs:{title:"用户平台配置","append-to-body":"",visible:e.platformBox},on:{"update:visible":function(t){e.platformBox=t}}},[t("avue-crud",{ref:"platformCrud",attrs:{option:e.platformOption,"table-loading":e.platformLoading,data:e.platformData,"before-open":e.platformBeforeOpen,page:e.platformPage,permission:e.platformPermissionList},on:{"update:page":function(t){e.platformPage=t},"row-update":e.platformRowUpdate,"search-change":e.platformSearchChange,"search-reset":e.platformSearchReset,"selection-change":e.platformSelectionChange,"current-change":e.platformCurrentChange,"size-change":e.platformSizeChange,"refresh-change":e.platformRefreshChange,"on-load":e.platformOnLoad},scopedSlots:e._u([{key:"tenantName",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.tenantName))])]}},{key:"userTypeName",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.userTypeName))])]}}]),model:{value:e.platformForm,callback:function(t){e.platformForm=t},expression:"platformForm"}})],1)],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("fc02"),n("1bc7"),n("f076")),r=n("c0c7"),s=n("fcb7"),l=n("8ddc"),c=n("7754"),d=n("3528"),u=n("5a04"),p=n("5880"),h=n("1ca4"),f=n("0a5a");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={data:function(){var e=this;return{form:{},search:{},roleBox:!1,excelBox:!1,platformBox:!1,initFlag:!0,selectionList:[],query:{},loading:!0,platformLoading:!1,page:{pageSize:10,currentPage:1,total:0},platformPage:{pageSize:10,currentPage:1,total:0},init:{roleTree:[],deptTree:[]},props:{label:"title",value:"key"},roleGrantList:[],roleTreeObj:[],treeDeptId:"",treeData:[],treeOption:{nodeKey:"id",lazy:!0,treeLoad:function(e,t){var n=0===e.level?0:e.data.id;Object(s["getDeptLazyTree"])(n).then((function(e){t(e.data.data.map((function(e){return m(m({},e),{},{leaf:!e.hasChildren})})))}))},addBtn:!1,menu:!1,size:"small",props:{labelText:"标题",label:"title",value:"value",children:"children"}},option:{lazy:!0,height:"auto",calcHeight:80,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!1,selection:!0,viewBtn:!0,menuWidth:240,align:"center",dialogClickModal:!1,labelWidth:100,column:[{label:"登录账号",prop:"account",search:!0,display:!1},{label:"用户姓名",prop:"realName",search:!0,display:!1},{label:"所属角色",prop:"roleName",slot:!0,display:!1},{label:"所属机构",prop:"deptName",slot:!0,display:!1}],group:[{label:"基础信息",prop:"baseInfo",icon:"el-icon-user-solid",column:[{label:"登录账号",prop:"account",rules:[{required:!0,message:"请输入登录账号",trigger:"blur"}]}]},{label:"详细信息",prop:"detailInfo",icon:"el-icon-s-order",column:[{label:"用户昵称",prop:"name",hide:!0,rules:[{required:!0,message:"请输入用户昵称",trigger:"blur"}]},{label:"用户姓名",prop:"realName",rules:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:2,max:5,message:"姓名长度在2到5个字符"}]},{label:"联系方式",prop:"phone",overHidden:!0,rules:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},{label:"电子邮箱",prop:"email",hide:!0,overHidden:!0},{label:"其他联系方式",prop:"otherPhone",overHidden:!0,rules:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},{label:"用户性别",prop:"sex",type:"radio",dataType:"number",dicData:[],hide:!0,props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择性别",trigger:"blur"}]},{label:"用户生日",type:"date",prop:"birthday",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",hide:!0},{label:"账号状态",prop:"statusName",hide:!0,display:!1}]},{label:"职责信息",prop:"dutyInfo",icon:"el-icon-s-custom",column:[{label:"所属角色",prop:"roleId",type:"tree",dicData:[],props:{label:"title"},rules:[{required:!0,message:"请选择所属角色",trigger:"blur"}]},{label:"所属机构",prop:"deptId",type:"tree",dicData:[],props:{label:"title"},slot:!0,rules:[{required:!0,message:"请选择所属机构",trigger:"blur"}]},{label:"所属区域",prop:"region",type:"cascader",props:{label:"name",value:"code"},lazy:!0,lazyLoad:function(e,t){console.log("lazyLoad",e,t);var n=1,a=e.level,i=e.data||{},o=i.code,r=[];console.log("code",o);var s=function(){t((r||[]).map((function(e){return Object.assign(e,{leaf:a>=n})})))};0==a&&Object(u["getLazyList"])({parentCode:"34"}).then((function(e){console.log("1",e),r=e.data.data,s()})),1==a?Object(u["getLazyList"])({parentCode:o}).then((function(e){console.log("2",e),r=e.data.data,s()})):s()}},{label:"显示排序",prop:"dispSort",type:"number",display:!0,align:"right",rules:[{required:!0,message:"请指定排序顺序",trigger:"blur"}]},{label:"心理职级",prop:"ranks",type:"select",display:!0,dataType:"number",dicData:[],props:{label:"dictValue",value:"dictKey"},change:function(t){e.ranksChange(t.value)},rules:[{required:!0,message:"请选择心理职级",trigger:"blur"}]},{label:"心理职称",prop:"title",type:"select",display:!0,dataType:"number",editDisabled:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择心理职称",trigger:"blur"}]},{label:"证书上传",prop:"certificate",type:"upload",display:!0,multiple:!0,listType:"picture-card",dataType:"string",action:"/api/blade-resource/oss/endpoint/put-file-attach",propsHttp:{res:"data",url:"link"},tip:"只能上传jpg/png文件，且不超过1M",hide:!0,span:24},{label:"擅长领域",prop:"domain",type:"select",display:!0,multiple:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},slot:!0,span:24,rules:[{required:!0,message:"请选择所擅长领域",trigger:"blur"}]},{label:"个人简介",prop:"info",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{required:!0,message:"请填写个人简介",trigger:"blur"},{max:200,message:"请输入200字以内",trigger:"blur"}]},{label:"荣誉称号",prop:"honoraryTitle",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{max:200,message:"请输入200字以内",trigger:"blur"}]},{label:"科研著作",prop:"researchWork",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{max:200,message:"请输入200字以内",trigger:"blur"}]},{label:"头象上传",prop:"head",type:"upload",display:!0,listType:"picture-img",span:24,propsHttp:{res:"data",url:"link"},canvasOption:{text:"avue",ratio:.1},tip:"只能上传jpg/png文件，且不超过10M",action:"/api/blade-resource/oss/endpoint/put-file-attach",rules:[{required:!0,message:"请上传头相",trigger:"blur"}]},{label:"是否公开",prop:"isPublic",type:"switch",display:!0,dicData:[{label:"",value:1},{label:"",value:2}],value:0,rules:[{required:!0,message:"请选择是否公开",trigger:"blur"}]}]}]},data:[],platformQuery:{},platformSelectionList:[],platformData:[],platformForm:{},platformOption:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,viewBtn:!0,dialogClickModal:!1,menuWidth:120,editBtnText:"配置",column:[{label:"登录账号",prop:"account",search:!0,display:!1},{label:"所属租户",prop:"tenantName",slot:!0,display:!1},{label:"用户姓名",prop:"realName",search:!0,display:!1},{label:"用户平台",prop:"userTypeName",slot:!0,display:!1},{label:"用户平台",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=user_type",props:{label:"dictValue",value:"dictKey"},dataType:"number",search:!0,hide:!0,display:!1,prop:"userType",rules:[{required:!0,message:"请选择用户平台",trigger:"blur"}]},{label:"用户拓展",prop:"userExt",type:"textarea",minRows:8,span:24,overHidden:!0,row:!0,hide:!0}]},excelForm:{},excelOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"模板上传",prop:"excelFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 .xls,.xlsx 标准格式文件",action:"/api/blade-user/import-user"},{label:"数据覆盖",prop:"isCovered",type:"switch",align:"center",width:80,dicData:[{label:"否",value:0},{label:"是",value:1}],value:0,slot:!0,rules:[{required:!0,message:"请选择是否覆盖",trigger:"blur"}]},{label:"模板下载",prop:"excelTemplate",formslot:!0,span:24}]}}},watch:{"form.tenantId":function(){""!==this.form.tenantId&&this.initFlag},"excelForm.isCovered":function(){if(""!==this.excelForm.isCovered){var e=this.findObject(this.excelOption.column,"excelFile");e.action="/api/blade-user/import-user?isCovered=".concat(this.excelForm.isCovered)}},"form.roleId":{handler:function(e){var t=!1;["1464227306195197954","1464227359223783426"].includes(e)&&(t=!0),console.log("roleid",e,t);var n=this.findObject(this.option.group,"region"),a=this.findObject(this.option.group,"dispSort"),i=this.findObject(this.option.group,"ranks"),o=this.findObject(this.option.group,"title"),r=this.findObject(this.option.group,"certificate"),s=this.findObject(this.option.group,"domain"),l=this.findObject(this.option.group,"info"),c=this.findObject(this.option.group,"honoraryTitle"),d=this.findObject(this.option.group,"researchWork"),u=this.findObject(this.option.group,"head"),p=this.findObject(this.option.group,"isPublic");n.display=t,a.display=t,i.display=t,o.display=t,r.display=t,s.display=t,l.display=t,c.display=t,d.display=t,u.display=t,p.display=t},immediate:!0}},computed:m(m({},Object(p["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.user_add,!1),viewBtn:this.vaildData(this.permission.user_view,!1),delBtn:this.vaildData(this.permission.user_delete,!1),editBtn:this.vaildData(this.permission.user_edit,!1)}},platformPermissionList:function(){return{addBtn:!1,viewBtn:!1,delBtn:!1,editBtn:this.vaildData(this.permission.user_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){h["a"].tenantMode||this.initData(h["a"].tenantId)},methods:{nodeClick:function(e){this.treeDeptId=e.id,this.page.currentPage=1,this.onLoad(this.page)},initData:function(e){var t=this;Object(d["getRoleTree"])(e).then((function(e){var n=t.findObject(t.option.group,"roleId");n.dicData=e.data.data})),Object(s["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.group,"deptId");n.dicData=e.data.data})),Object(l["getDictionary"])({code:"psychological_rank"}).then((function(e){var n=t.findObject(t.option.group,"ranks");n.dicData=e.data.data})),Object(l["getDictionary"])({code:"psychological_title"}).then((function(e){var n=t.findObject(t.option.group,"title");n.dicData=e.data.data})),Object(l["getDictionary"])({code:"domain"}).then((function(e){var n=t.findObject(t.option.group,"domain");n.dicData=e.data.data})),Object(c["getDictionary"])({code:"sex"}).then((function(e){var n=t.findObject(t.option.group,"sex");n.dicData=e.data.data}))},ranksChange:function(e){e-=1,0==e&&(e=1),this.form.title=e},submitRole:function(){var e=this,t=this.$refs.treeRole.getCheckedKeys().join(",");Object(r["grant"])(this.ids,t).then((function(){e.roleBox=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var a=this;e.domain instanceof Array&&(e.domain=e.domain.join(",")),e.postId instanceof Array&&(e.postId=e.postId.join(",")),e.region instanceof Array&&(e.region=e.region.join(",")),e.certificate instanceof Array&&(e.certificate=e.certificate.join(",")),e.head instanceof Array&&(e.head=e.head.join(",")),Object(r["add"])(e).then((function(){a.initFlag=!1,a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;e.domain instanceof Array&&(e.domain=e.domain.join(",")),e.postId instanceof Array&&(e.postId=e.postId.join(",")),e.region instanceof Array&&(e.region=e.region.join(",")),e.certificate instanceof Array&&(e.certificate=e.certificate.join(",")),e.head instanceof Array&&(e.head=e.head.join(",")),console.log(e),Object(r["update"])(e).then((function(){i.initFlag=!1,i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.treeDeptId="",this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleReset:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择账号密码重置为123456?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["resetPassword"])(e.ids)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleGrant:function(){var e=this;0!==this.selectionList.length?(this.roleTreeObj=[],1===this.selectionList.length&&(this.roleTreeObj=this.selectionList[0].roleId.split(",")),Object(d["getRoleTree"])().then((function(t){e.roleGrantList=t.data.data,e.roleBox=!0}))):this.$message.warning("请选择至少一条数据")},handlePlatform:function(){this.platformBox=!0},handleImport:function(){this.excelBox=!0},uploadAfter:function(e,t,n,a){window.console.log(a),this.excelBox=!1,this.refreshChange(),t()},handleExport:function(){var e=this;this.$confirm("是否导出用户数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.open("/api/blade-user/export-user?".concat(e.website.tokenHeader,"=").concat(Object(f["a"])(),"&account=").concat(e.search.account,"&realName=").concat(e.search.realName))}))},handleTemplate:function(){window.open("/api/blade-user/export-template?".concat(this.website.tokenHeader,"=").concat(Object(f["a"])()))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getUser"])(this.form.id).then((function(e){n.form=e.data.data,n.form.hasOwnProperty("region")&&(n.form.region=n.form.region.split(",")),n.form.hasOwnProperty("domain")&&(n.form.domain=n.form.domain.split(",")),n.form.hasOwnProperty("postId")&&(n.form.postId=n.form.postId.split(","))})),this.initData(this.form.tenantId),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query),this.treeDeptId).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},platformRowUpdate:function(e,t,n,a){var i=this;Object(r["updatePlatform"])(e.id,e.userType,e.userExt).then((function(){i.platformOnLoad(i.platformPage),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},platformBeforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getUserPlatform"])(this.platformForm.id).then((function(e){n.platformForm=e.data.data})),e()},platformSearchReset:function(){this.platformQuery={},this.platformOnLoad(this.platformPage)},platformSearchChange:function(e,t){this.platformQuery=e,this.platformPage.currentPage=1,this.platformOnLoad(this.platformPage,e),t()},platformSelectionChange:function(e){this.platformSelectionList=e},platformSelectionClear:function(){this.platformSelectionList=[],this.$refs.platformCrud.toggleSelection()},platformCurrentChange:function(e){this.platformPage.currentPage=e},platformSizeChange:function(e){this.platformPage.pageSize=e},platformRefreshChange:function(){this.platformOnLoad(this.platformPage,this.platformQuery)},platformOnLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.platformLoading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query),this.treeDeptId).then((function(e){var n=e.data.data;t.platformPage.total=n.total,t.platformData=n.records,t.platformLoading=!1,t.selectionClear()}))},handleAddSub:function(e){console.log(e)}}},b=v,y=(n("5cee"),n("829d")),w=Object(y["a"])(b,a,i,!1,null,null,null);t["default"]=w.exports},bbf3:function(e,t,n){"use strict";n("bd2a")},bd2a:function(e,t,n){},bd9e:function(e,t,n){"use strict";n("390c")},bf8c:function(e,t,n){"use strict";n("f989")},c03f:function(e,t,n){},c364:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[t("el-form-item",{attrs:{prop:"phone"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.phone")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}},[t("i",{staticClass:"icon-shouji",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"code"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.code")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[t("i",{staticClass:"icon-yanzhengma",staticStyle:{"margin-top":"6px"},attrs:{slot:"prefix"},slot:"prefix"}),t("template",{slot:"append"},[t("span",{staticClass:"msg-text",class:[{display:e.msgKey}],on:{click:e.handleSend}},[e._v(e._s(e.msgText))])])],2)],1),t("el-form-item",[t("el-button",{staticClass:"login-submit",attrs:{size:"small",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.$t("login.submit")))])],1)],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("f076")),r=n("c54a"),s=n("5880");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"codelogin",data:function(){var e=function(e,t,n){Object(r["b"])(t)[0]?n(new Error(Object(r["b"])(t)[1])):n()},t=function(e,t,n){4!==t.length?n(new Error("请输入4位数的验证码")):n()};return{msgText:"",msgTime:"",msgKey:!1,loginForm:{phone:"",code:""},loginRules:{phone:[{required:!0,trigger:"blur",validator:e}],code:[{required:!0,trigger:"blur",validator:t}]}}},created:function(){this.msgText=this.config.MSGINIT,this.msgTime=this.config.MSGTIME},mounted:function(){},computed:c(c({},Object(s["mapGetters"])(["tagWel"])),{},{config:function(){return{MSGINIT:this.$t("login.msgText"),MSGSCUCCESS:this.$t("login.msgSuccess"),MSGTIME:60}}}),props:[],methods:{handleSend:function(){var e=this;if(!this.msgKey){this.msgText=this.msgTime+this.config.MSGSCUCCESS,this.msgKey=!0;var t=setInterval((function(){e.msgTime--,e.msgText=e.msgTime+e.config.MSGSCUCCESS,0===e.msgTime&&(e.msgTime=e.config.MSGTIME,e.msgText=e.config.MSGINIT,e.msgKey=!1,clearInterval(t))}),1e3)}},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){t&&e.$store.dispatch("LoginByPhone",e.loginForm).then((function(){e.$router.push({path:e.tagWel.value})}))}))}}},u=d,p=(n("3675"),n("829d")),h=Object(p["a"])(u,a,i,!1,null,null,null);t["default"]=h.exports},c7a2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("third-register")],1)],1),t("el-row",[t("el-col",{attrs:{span:24}},[t("basic-container",[t("p",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{src:"https://img.shields.io/badge/Release-V2.8.2-green.svg",alt:"Downloads"}}),t("img",{attrs:{src:"https://img.shields.io/badge/JDK-1.8+-green.svg",alt:"Build Status"}}),t("img",{attrs:{src:"https://img.shields.io/badge/Spring%20Cloud-Hoxton.SR11-blue.svg",alt:"Coverage Status"}}),t("img",{attrs:{src:"https://img.shields.io/badge/Spring%20Boot-2.3.12.RELEASE-blue.svg",alt:"Downloads"}}),t("a",{attrs:{target:"_blank",href:"https://bladex.vip"}},[t("img",{attrs:{src:"https://img.shields.io/badge/filling%20Author-Small%20Chill-ff69b4.svg",alt:"Downloads"}})]),t("a",{attrs:{target:"_blank",href:"https://bladex.vip"}},[t("img",{attrs:{src:"https://img.shields.io/badge/Copyright%20-@BladeX-%23ff3f59.svg",alt:"Downloads"}})])])])],1)],1),t("el-row",[t("el-col",{attrs:{span:16}},[t("basic-container",[t("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[t("el-collapse-item",{attrs:{title:"欢迎使用Saber",name:"1"}},[t("div",[e._v("1.Saber是BladeX前端UI系统")]),t("div",[e._v("2.对现有的avue2.0、element-ui库进行二次封装")]),t("div",[e._v("3.100%兼容原生element-ui库")]),t("div",[e._v("4.基于json驱动的模块配置，打造最好用的vuejs中后台脚手架")]),t("div",[e._v("5.使用Saber可以大幅度提升开发效率，不再为重复工作发愁")])]),t("el-collapse-item",{attrs:{title:"什么是BladeX",name:"2"}},[t("div",[e._v("1.BladeX是一款精心设计的微服务架构，提供 SpringCloud 全套解决方案")]),t("div",[e._v("2.开源中国首批完美集成 SpringCloud Alibaba 系列组件的微服务架构")]),t("div",[e._v("3.基于稳定生产的商业项目升级优化而来，更加贴近企业级的需求")]),t("div",[e._v("4.追求企业开发更加高效，部署更加方便，生产更加稳定")]),t("div",[e._v("5.GVP-码云最有价值开源项目")]),t("div",[e._v("6.BladeX授权地址:"),t("a",{attrs:{target:"_blank",href:"https://bladex.vip/#/vip"}},[e._v("点击授权")])])]),t("el-collapse-item",{attrs:{title:"为何需要BladeX",name:"3"}},[t("div",[e._v("1.经历过较长的线上生产，积累了很多企业痛点的解决方案")]),t("div",[e._v("2.一套代码兼容MySql、Oracle、PostgreSQL、SqlServer，适应企业各种不同场景的需求")]),t("div",[e._v("3.集成了很多企业急切所需的例如多租户、Oauth2授权认证、工作流、分布式事务等等功能")]),t("div",[e._v("4.深度定制了Flowable工作流，完美支持SpringCloud分布式服务的场景，以远程调用的方式进行操作")]),t("div",[e._v("5.升级了核心驱动，新功能完全可以开箱即用，而开源版需要自己再花时间进行集成，需要花掉更多的时间成本")]),t("div",[e._v("6.拥抱微服务时代，很多企业由于项目转型或升级，传统的技术已然不能满足，反而会花更多成本，而BladeX就是为此而生")]),t("div",[e._v("7.同时提供SpringCloud版本和SpringBoot版本，两个版本的api可以与Sword和Saber无缝对接，为小型项目至大型项目保驾护航")]),t("div",[e._v("8.授权购买即永久，源码没有混淆，完全开放，后续升级完全免费。企业只需花很少的钱即可获得一整套成熟的解决方案，你还在等什么？")])]),t("el-collapse-item",{attrs:{title:"拥有的核心功能",name:"4"}},[t("div",[e._v("1.前后端分离-采用前后端分离模式，前端提供两套架构，Sword基于React，Saber基于Vue")]),t("div",[e._v("2. 分布式单体式后端架构-提供两套后端架构，基于SpringCloud的分布式架构以及基于SpringBoot的单体式架构")]),t("div",[e._v("3.API完全兼容-两套后端架构与两套前端架构，共四套架构可以任意组合，所有API完全兼容")]),t("div",[e._v("4.前后端代码生成-定制针对两套前端与后端的代码生成模板，轻松生成整个模块的前后端代码，减少重复工作量")]),t("div",[e._v("5.组件化、插件化架构-针对功能深度定制各个starter，引入开箱即用，为整个架构解耦，提升效率")]),t("div",[e._v("6.Nacos-集成阿里巴巴的Nacos完成统一的服务注册与配置")]),t("div",[e._v("7.Sentinel-集成Sentinel从流量控制、熔断降级、系统负载等多个维度保护服务的稳定性")]),t("div",[e._v("8.Dubbo-完美集成Dubbo最新版，支持远程RPC调用")]),t("div",[e._v("9.多租户系统-完整的SaaS多租户架构")]),t("div",[e._v("10.Oauth2-集成Oauth2协议，完美支持多终端的接入与认证授权")]),t("div",[e._v("11.工作流-深度定制SpringCloud分布式场景的Flowable工作流，为复杂流程保驾护航。同时提供SpringBoot集成版本")]),t("div",[e._v("12.独立流程设计器-提供独立的完全汉化的流程设计器，轻松定制流程模型")]),t("div",[e._v("13.动态网关-集成基于Nacos的轻量级、高拓展性动态网关")]),t("div",[e._v("14.动态聚合文档-实现基于Nacos的Swagger SpringCloud聚合文档")]),t("div",[e._v("15.分布式文件服务-集成minio、qiniu、alioss等优秀的第三方，提供便捷的文件上传与管理")]),t("div",[e._v("16.多租户对象存储系统-在SaaS系统中，各租户可自行配置文件上传至自己的私有OSS")]),t("div",[e._v("17.权限管理-精心设计的权限管理方案，角色权限精确到按钮")]),t("div",[e._v("18.动态数据权限-高度灵活的动态数据权限，提供注解+Web可视化两种配置方式，Web配置无需重启直接生效")]),t("div",[e._v("19.动态接口权限-高度灵活的动态接口权限，提供注解+Web可视化两种配置方式，Web配置无需重启直接生效")]),t("div",[e._v("20.多租户顶部菜单配置-提供给每个租户独立的顶部菜单配置模块，可以自定义顶部菜单切换")]),t("div",[e._v("21.主流数据库兼容-一套代码完全兼容Mysql、Postgresql、Oracle三大主流数据库")]),t("div",[e._v("22.动态网关鉴权-基于Nacos的动态网关鉴权，可在线配置，实时生效")]),t("div",[e._v("23.全能代码生成器-支持自定义模型、模版 、业务建模，支持多种模板引擎，在线配置。大幅度提升开发效率，不再为重复工作发愁")]),t("div",[e._v("24.Seata分布式事务-定制集成Seata，支持分布式事务，无代码侵入，不失灵活与简洁")]),t("div",[e._v("25.未完待续...")])]),t("el-collapse-item",{attrs:{title:"软件定制开发合作",name:"5"}},[t("div",[e._v("1.接BladeX系列架构的定制服务")]),t("div",[e._v("2.接3个月以内工期的react、vue、springboot、springcloud、app、小程序等软件定制服务")]),t("div",[e._v("3.有意向请联系唯一指定QQ:1272154962")])])],1)],1)],1),t("el-col",{attrs:{span:8}},[t("el-row",[t("basic-container",[t("div",{staticClass:"el-font-size"},[t("span",[e._v("产品名称")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",[t("el-tag",[e._v("BladeX企业级微服务开发平台")])],1),t("el-divider",{attrs:{"content-position":"right"}},[t("i",{staticClass:"el-icon-star-off"})]),t("span",[e._v("账号密码")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v("人事(hr)")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{attrs:{type:"success",effect:"plain"}},[e._v("经理(manager)")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{attrs:{type:"warning",effect:"plain"}},[e._v("老板(boss)")]),t("el-divider",{attrs:{"content-position":"right"}},[t("i",{staticClass:"el-icon-star-off"})]),t("span",[e._v("官网地址")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",[t("el-link",{attrs:{href:"https://bladex.vip",target:"_blank",type:"primary"}},[e._v("https://bladex.vip")])],1),t("el-divider",{attrs:{"content-position":"right"}},[t("i",{staticClass:"el-icon-star-off"})]),t("span",[e._v("社区地址")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",[t("el-link",{attrs:{href:"https://sns.bladex.vip",target:"_blank",type:"primary"}},[e._v("https://sns.bladex.vip")])],1),t("el-divider",{attrs:{"content-position":"right"}},[t("i",{staticClass:"el-icon-star-off"})]),t("span",[e._v("获取文档")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"tag-group"},[t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success",onclick:"window.open('https://sns.bladex.vip/note/view/1.html')"}},[e._v("免费版")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"danger",onclick:"window.open('https://www.kancloud.cn/@smallchill')"}},[e._v("收费版")])],1),t("el-divider",{attrs:{"content-position":"right"}},[t("i",{staticClass:"el-icon-star-off"})]),t("span",[e._v("获取源码")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"tag-group"},[t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"success",effect:"dark",onclick:"window.open('https://gitee.com/smallc/SpringBlade')"}},[e._v("开源版")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-tag",{staticStyle:{cursor:"pointer"},attrs:{type:"danger",effect:"dark",onclick:"window.open('https://bladex.vip/#/vip')"}},[e._v("商业版")])],1)],1)])],1),t("el-row",[t("basic-container",[t("el-collapse",{on:{change:e.handleChange},model:{value:e.logActiveNames,callback:function(t){e.logActiveNames=t},expression:"logActiveNames"}},[t("el-collapse-item",{attrs:{title:"2.8.2.RELEASE发布，增强用户登录方案",name:"24"}},[t("div",[e._v("1.[升级]SpringBoot 至 2.3.12")]),t("div",[e._v("2.[升级]SpringBootAdmin 至 2.3.1")]),t("div",[e._v("3.[升级]Knife4j 至 2.0.9")]),t("div",[e._v("4.[升级]Nacos 至 2.0.2")]),t("div",[e._v("5.[升级]Seata 至 1.4.2")]),t("div",[e._v("6.[回滚]MybatisPlus 至 3.4.2")]),t("div",[e._v("7.[升级]DynamicDatasource 至 3.3.6")]),t("div",[e._v("8.[升级]Druid 至 1.2.6")]),t("div",[e._v("9.[升级]Avue 至 2.8.18")]),t("div",[e._v("10.[新增]用户登录错误次数锁定功能")]),t("div",[e._v("11.[新增]多部门多角色用户在登录时增加下拉选项")]),t("div",[e._v("12.[新增]新增用户多条件查询接口")]),t("div",[e._v("13.[新增]Ribbon组件权重读取逻辑")]),t("div",[e._v("14.[新增]ExcelUtil新增WriteHandler参数")]),t("div",[e._v("15.[新增]CacheUtil增加指定tenantId清空方法")]),t("div",[e._v("16.[优化]手机短信校验逻辑，增加手机号强制判断")]),t("div",[e._v("17.[优化]短信调试功能增加资源编号读取")]),t("div",[e._v("18.[优化]多租户切面逻辑")]),t("div",[e._v("19.[优化]多租户缓存清空逻辑")]),t("div",[e._v("20.[优化]ISqlInjector支持自定义覆盖")]),t("div",[e._v("21.[优化]优化日志对于租户id的判断")]),t("div",[e._v("22.[优化]Menu类重写hashCode方法")]),t("div",[e._v("23.[优化]MySql脚本将long类型字段改为bigint(20)")]),t("div",[e._v("24.[修复]用户中心字段绑定相反的问题")]),t("div",[e._v("25.[修复]关闭验证码模式后首页仍调用验证码接口的问题")])]),t("el-collapse-item",{attrs:{title:"2.8.1.RELEASE发布，适配Nacos2支持长链接特性",name:"23"}},[t("div",[e._v("1.[升级]SpringCloud 至 Hoxton.SR11")]),t("div",[e._v("2.[升级]Avue 至 2.8.12")]),t("div",[e._v("3.[升级]Lombok 至 1.18.18")]),t("div",[e._v("4.[升级]Nacos 至 2.0.1")]),t("div",[e._v("5.[升级]JustAuth 至 1.16.1")]),t("div",[e._v("6.[新增]JustAuth支持基于redis的state缓存")]),t("div",[e._v("7.[新增]服务内部调用文件上传的工具类")]),t("div",[e._v("8.[新增]插件市场目录说明")]),t("div",[e._v("9.[新增]全新布局的字典管理模块")]),t("div",[e._v("10.[优化]Dockerfile初始镜像改为固化的openjdk8-openj9含字体版本")]),t("div",[e._v("11.[优化]SmsResponse返回字段message为msg")]),t("div",[e._v("12.[优化]Feign熔断加载逻辑")]),t("div",[e._v("13.[优化]Sql打印插件增加java8时间处理")]),t("div",[e._v("14.[优化]多数据源环境下生效Sql打印插件的配置")]),t("div",[e._v("15.[优化]校验短信验证码时与手机号关联验证")]),t("div",[e._v("16.[优化]Request包装逻辑支持配置跳过")]),t("div",[e._v("17.[优化]Mybatis-plus的SQLServerDialect逻辑")]),t("div",[e._v("18.[优化]ObjectMapper支持可配")]),t("div",[e._v("19.[优化]增加跨域请求头以防独立swagger服务出现跨域")]),t("div",[e._v("20.[优化]数据权限与接口权限的缓存改为全局")]),t("div",[e._v("21.[优化]Xss过滤逻辑")]),t("div",[e._v("22.[优化]角色配置逻辑")]),t("div",[e._v("23.[优化]菜单配置逻辑")]),t("div",[e._v("24.[修复]ImageUtil宽高反转的bug")]),t("div",[e._v("25.[修复]树组件未全选导致父节点没有入库从而引发顶部菜单生成的bug")]),t("div",[e._v("26.[修复]字典通用接口未返回id与parentId产生的bug")]),t("div",[e._v("27.[脚本]启动脚本增加jvm配置")]),t("div",[e._v("28.[脚本]修复report脚本部署逻辑")]),t("div",[e._v("29.[移除]过时的BladeRedisCache，请用BladeRedis取代")])]),t("el-collapse-item",{attrs:{title:"2.8.0.RELEASE发布，集成Prometheus全方位监控方案",name:"22"}},[t("div",[e._v("1.[升级]SpringCloud 至 Hoxton.SR10")]),t("div",[e._v("2.[升级]AlibabaCloud 至 2.2.5.RELEASE")]),t("div",[e._v("3.[升级]FastJson 至 1.2.75")]),t("div",[e._v("4.[升级]Druid 至 1.2.5")]),t("div",[e._v("5.[升级]EasyExcel 至 1.2.7")]),t("div",[e._v("6.[升级]JustAuth 至 1.15.9")]),t("div",[e._v("7.[升级]Avue 至 2.8.1")]),t("div",[e._v("8.[升级]ElementUI 至 2.15.1")]),t("div",[e._v("9.[升级]Oss与Sms升级依赖并适配最新版")]),t("div",[e._v("10.[新增]基于宝塔系统的部署方案")]),t("div",[e._v("11.[新增]Prometheus全方位监控方案")]),t("div",[e._v("12.[新增]blade-admin服务支持prometheus对nacos的服务发现")]),t("div",[e._v("13.[新增]BladeX对接Prometheus部署脚本")]),t("div",[e._v("14.[新增]Saber远程部署推送脚本")]),t("div",[e._v("15.[新增]基于Sentinel的服务熔断方案")]),t("div",[e._v("16.[新增]Mybatis-Plus添加OptimizeJoin配置参数")]),t("div",[e._v("17.[优化]将oss-starter系列合并为一")]),t("div",[e._v("18.[优化]将sms-starter系列合并为一")]),t("div",[e._v("19.[优化]增强优化Url通配符匹配逻辑")]),t("div",[e._v("20.[优化]数据权限缓存逻辑")]),t("div",[e._v("21.[优化]blade-auto封装")]),t("div",[e._v("22.[优化]SqlLogInterceptor配置")])]),t("el-collapse-item",{attrs:{title:"2.7.2.RELEASE发布，重构升级常用功能，优化使用体验",name:"21"}},[t("div",[e._v("1.[升级]SpringBoot 至 2.2.13.RELEASE")]),t("div",[e._v("2.[升级]AlibabaCloud 至 2.2.5")]),t("div",[e._v("3.[升级]Mybatis-Plus 至 3.4.2")]),t("div",[e._v("4.[升级]Dynamic-Datasource 至3.3.1")]),t("div",[e._v("5.[升级]Avue 至 2.7.8")]),t("div",[e._v("6.[升级]适配 Knife4j 2.0.8")]),t("div",[e._v("7.[重构]Swagger聚合网关迁移至全新的blade-swagger服务")]),t("div",[e._v("8.[重构]Sql日志打印采用druid底层实现展示完整带参SQL")]),t("div",[e._v("9.[新增]LocalFile的domain字段")]),t("div",[e._v("10.[新增]Sign模式鉴权timestamp在10秒内的合法时间段判断")]),t("div",[e._v("11.[新增]开启租户插件后使用@TenantIgnore注解精准关闭租户过滤逻辑")]),t("div",[e._v("12.[新增]Swagger公共信息配置")]),t("div",[e._v("13.[新增]Saber矢量图标离线化")]),t("div",[e._v("14.[新增]菜单管理isOpen字段控制左侧菜单是否可以使用新tab打开外链")]),t("div",[e._v("15.[新增]Mybatis-Plus的Page合并工具类")]),t("div",[e._v("16.[优化]阿里云短信返回成功判断逻辑")]),t("div",[e._v("17.[优化]Token过期时间处理")]),t("div",[e._v("18.[优化]Redis加载逻辑")]),t("div",[e._v("19.[优化]用户登录逻辑")]),t("div",[e._v("20.[优化]多租户角色创建逻辑")]),t("div",[e._v("21.[优化]Dockerfile加速字体构建")]),t("div",[e._v("22.[优化]Nacos Shared Config配置API改为最新版")]),t("div",[e._v("23.[优化]Saber授权类型字段改为checkbox")]),t("div",[e._v("24.[修复]RequestLog遇到MultipartFile.[]类型序列化报错的问题")]),t("div",[e._v("25.[修复]顶级字典更新后未同步更新下属字典的编号")]),t("div",[e._v("26.[修复]Saber退出后未刷新浏览器顶部title路由的问题")]),t("div",[e._v("27.[修复]菜单机构模块关闭编辑界面再打开新增界面数据没有清空的问题")])]),t("el-collapse-item",{attrs:{title:"2.7.1.RELEASE发布，重构钉钉监控通知，升级依赖适配最新API",name:"20"}},[t("div",[e._v("1.[升级]SpringBoot 至 2.2.12.RELEASE")]),t("div",[e._v("2.[升级]SpringCloud 至 Hoxton.SR9")]),t("div",[e._v("3.[升级]Knife4j 至 2.0.8")]),t("div",[e._v("4.[升级]Druid 至 1.2.4")]),t("div",[e._v("5.[升级]Seata 至 1.4.1")]),t("div",[e._v("6.[升级]Jackson 至 2.11.4")]),t("div",[e._v("7.[升级]Mybatis-Plus 至 3.4.1")]),t("div",[e._v("8.[升级]Dynamic-Datasource 至3.2.1")]),t("div",[e._v("9.[升级]Avue 至 2.7.5")]),t("div",[e._v("10.[新增]Secure模块动态签名认证特性")]),t("div",[e._v("11.[新增]Redis序列化方式的配置")]),t("div",[e._v("12.[新增]用户导入导出的用户平台字段")]),t("div",[e._v("13.[修改]日志路径默认优先级，支持配置覆盖")]),t("div",[e._v("14.[修改]Report模块包路径，新增Core目录")]),t("div",[e._v("15.[重构]blade-admin，钉钉监控通知实现")]),t("div",[e._v("16.[优化]blade-admin，增加账号密码登录")]),t("div",[e._v("17.[优化]RefreshToken刷新逻辑")]),t("div",[e._v("18.[优化]租户新增逻辑，业务字典支持无限层级复制")]),t("div",[e._v("19.[优化]Ribbon组件，支持Feign调用配置")]),t("div",[e._v("20.[修复]流程名搜索失效的问题")]),t("div",[e._v("21.[修复]附件管理租户隔离问题")]),t("div",[e._v("22.[修复]数据权限分配模块的sqlserver兼容性")]),t("div",[e._v("23.[修复]系统字典缓存刷新逻辑")]),t("div",[e._v("24.[修复]Swagger文档出现Locale参数的问题")]),t("div",[e._v("25.[删除]spring-cloud-stream依赖，按需引入")])]),t("el-collapse-item",{attrs:{title:"2.7.0.RELEASE发布，更新Hoxton.SR8，全面升级底层驱动",name:"19"}},[t("div",[e._v("1.[升级]SpringBoot 至 2.2.11.RELEASE")]),t("div",[e._v("2.[升级]SpringCloud 至 Hoxton.SR8")]),t("div",[e._v("3.[升级]AlibabaCloud 至 2.2.3.RELEASE")]),t("div",[e._v("4.[升级]SpringBootAdmin 至 2.2.4")]),t("div",[e._v("5.[升级]Knife4j 至 2.0.6")]),t("div",[e._v("6.[升级]Swagger 至 2.10.5")]),t("div",[e._v("7.[升级]SwaggerModel 至 1.6.2")]),t("div",[e._v("8.[升级]SpringPlugin 至 2.2.0.RELEASE")]),t("div",[e._v("9.[升级]Druid 至 1.2.1")]),t("div",[e._v("10.[升级]JustAuth 至 1.15.8")]),t("div",[e._v("11.[升级]Dubbo 至 2.7.8")]),t("div",[e._v("12.[升级]Guava 至 30.0-jre")]),t("div",[e._v("13.[升级]Avue 至 2.7.0")]),t("div",[e._v("14.[优化]Swagger封装以支持Knife4j最新API")]),t("div",[e._v("15.[优化]引入Knife4j增强配置,生产环境将完全隔离文档访问")]),t("div",[e._v("16.[修复]未引入租户插件后,自定义类空指针的问题")]),t("div",[e._v("17.[删除]Zipkin模块,推荐使用官方独立模式运行服务")])]),t("el-collapse-item",{attrs:{title:"2.6.1.RELEASE发布，增加全局上下文系统，增加用户平台拓展模块",name:"18"}},[t("div",[e._v("1.[升级]SpringBoot 至 2.1.17.RELEASE")]),t("div",[e._v("2.[升级]Mybatis-Plus 至 3.4.0")]),t("div",[e._v("3.[升级]Knife4j 至 2.0.5")]),t("div",[e._v("4.[升级]JJWT 至 0.11.2")]),t("div",[e._v("5.[升级]FastJson 至 1.2.74")]),t("div",[e._v("6.[新增]上下文核心包，优化全局上下文配置")]),t("div",[e._v("7.[新增]secure模块的basic认证功能")]),t("div",[e._v("8.[新增]用户平台拓展模块")]),t("div",[e._v("9.[优化]重构增强cloud模块")]),t("div",[e._v("10.[优化]request核心至boot模块")]),t("div",[e._v("11.[优化]增强mybatis-plus的分页防注入功能")]),t("div",[e._v("12.[优化]sms返回结果，去掉验证码序列化")]),t("div",[e._v("13.[优化]数据权限插件支持最新版mybatis-plus")]),t("div",[e._v("14.[优化]增强sql日志拦截器")]),t("div",[e._v("15.[优化]增强令牌，新增对用户平台的判断逻辑")]),t("div",[e._v("16.[优化]代码生成增加对sqlserver的支持")]),t("div",[e._v("17.[优化]自定义mapper的api")]),t("div",[e._v("18.[修复]Kv类克隆强转问题")]),t("div",[e._v("19.[修复]elk配置无法读取项目名的问题")]),t("div",[e._v("20.[修复]区划字段level为regionLevel以防oracle报错")])]),t("el-collapse-item",{attrs:{title:"2.6.0.RELEASE发布，租户数据库隔离、报表管理、SqlServer兼容",name:"17"}},[t("div",[e._v("1.[升级]Avue 至 2.6.15")]),t("div",[e._v("2.[升级]SpringBoot 至 2.1.16.RELEASE")]),t("div",[e._v("3.[升级]Seata 至 1.3.0")]),t("div",[e._v("4.[升级]Nacos 至 1.3.2")]),t("div",[e._v("5.[升级]FastJson 至 1.2.73")]),t("div",[e._v("6.[升级]Knife4j 至 2.0.4")]),t("div",[e._v("7.[升级]EasyExcel 至 2.2.6")]),t("div",[e._v("8.[升级]JustAuth 至 1.15.6")]),t("div",[e._v("9.[新增]多租户数据库隔离、动态数据源特性")]),t("div",[e._v("10.[新增]SqlServer兼容")]),t("div",[e._v("11.[新增]UReport2报表管理模块")]),t("div",[e._v("12.[新增]对象存储附件表功能")]),t("div",[e._v("13.[优化]LocalFile支持序列化")]),t("div",[e._v("14.[优化]MinioTemplate增加ContentType配置")]),t("div",[e._v("15.[优化]LogBack-Elk的配置")]),t("div",[e._v("16.[优化]流程状态变更的返回信息")]),t("div",[e._v("17.[优化]顶部菜单配置接口，支持大容量数据传输")]),t("div",[e._v("18.[优化]User密码字段序列化")]),t("div",[e._v("19.[优化]序列化additionalInformation，解决非null值报错的问题")]),t("div",[e._v("20.[修复]启用Token有状态模式下刷新Token的问题")]),t("div",[e._v("21.[修复]日志表无法入库TenantId的问题")]),t("div",[e._v("22.[修复]flowable-oracle脚本运行错误的问题")])]),t("el-collapse-item",{attrs:{title:"2.5.1.RELEASE发布，增加第三方登录、行政区划、API报文加密",name:"16"}},[t("div",[e._v("1.[升级]Avue 至 2.6.1、ElementUI 至 2.13.2")]),t("div",[e._v("2.[升级]SpringBoot 至 2.1.14.RELEASE")]),t("div",[e._v("3.[升级]SpringCloud 至 Greenwich.SR6")]),t("div",[e._v("4.[升级]SpringCloud Alibaba 至 2.1.2.RELEASE")]),t("div",[e._v("5.[升级]Seata 至 1.2.0")]),t("div",[e._v("6.[升级]FastJson 至 1.2.70")]),t("div",[e._v("7.[升级]Knife4j 至 2.0.3")]),t("div",[e._v("8.[升级]MybatisPlus 至3.3.2")]),t("div",[e._v("9.[升级]EasyExcel 至 2.2.4")]),t("div",[e._v("10.[新增]第三方系统登录，集成拓展JustAuth")]),t("div",[e._v("11.[新增]行政区划功能模块")]),t("div",[e._v("12.[新增]API报文加密工具")]),t("div",[e._v("13.[新增]Token配置，支持有状态模式，支持一人在线或多人在线")]),t("div",[e._v("14.[新增]Secure配置，支持配置请求方法类型、请求路径、请求表达式匹配")]),t("div",[e._v("15.[新增]Jackson配置，支持大数字转字符串模式，支持null转空值模式")]),t("div",[e._v("16.[新增]租户账号授权码保护机制，防止私有部署客户篡改数据库越权")]),t("div",[e._v("17.[优化]字典模块，增加树形结构")]),t("div",[e._v("18.[优化]新增租户逻辑，新增时同步超管配置的默认业务字典数据")]),t("div",[e._v("19.[优化]用户导入逻辑，只有超管才可以定义租户编号")]),t("div",[e._v("20.[优化]部门列表逻辑，非超管角色只可看到本级及以下部门数据")]),t("div",[e._v("21.[优化]字典模块，增加枚举类，统一入口")]),t("div",[e._v("22.[优化]DictCache缓存加载逻辑")]),t("div",[e._v("23.[优化]租户缓存刷新逻辑")]),t("div",[e._v("24.[优化]角色配置逻辑，同步取消子角色对应的菜单权限")]),t("div",[e._v("25.[优化]顶部菜单，增加排序功能")]),t("div",[e._v("26.[优化]INode，支持泛型")]),t("div",[e._v("27.[优化]代码结构，为bean统一加上final关键字修饰")]),t("div",[e._v("28.[优化]Nacos动态刷新配置")]),t("div",[e._v("29.[优化]Dockerfile，采用Openj9基础镜像，大幅度降低内存占用")]),t("div",[e._v("30.[优化]工程启动逻辑，关闭Flowable自动建表功能，需要手动导入流程sql")]),t("div",[e._v("31.[修复]SpringBootAdmin读取actuator路径配置")]),t("div",[e._v("32.[修复]用户导入逻辑，修正密码加密规则")]),t("div",[e._v("33.[修复]Boot版本Xss默认配置路径")])]),t("el-collapse-item",{attrs:{title:"2.5.0.RELEASE发布，增加岗位管理，增加用户导入导出",name:"15"}},[t("div",[e._v("1.[升级]Avue 至 2.5.0")]),t("div",[e._v("2.[升级]SpringBoot 至 2.1.13")]),t("div",[e._v("3.[升级]FastJson 至 1.2.68")]),t("div",[e._v("4.[升级]Druid 至 1.1.22")]),t("div",[e._v("5.[升级]Knife4j 至 2.0.2")]),t("div",[e._v("6.[升级]Taobao-Sdk 至 20200415")]),t("div",[e._v("7.[升级]docker-maven-plugin 至 dockerfile-maven-plugin")]),t("div",[e._v("8.[新增]验证码开关")]),t("div",[e._v("9.[新增]数据权限全局开关")]),t("div",[e._v("10.[新增]岗位管理模块")]),t("div",[e._v("11.[新增]用户Excel导入导出功能")]),t("div",[e._v("12.[新增]用户绑定岗位功能")]),t("div",[e._v("13.[新增]EasyExcel封装工具ExcelUtil")]),t("div",[e._v("14.[新增]Feign内部线程传递")]),t("div",[e._v("15.[新增]Mybatis-Plus配置，支持配置最大分页数")]),t("div",[e._v("16.[新增]Gateway在多团队协作模式灵活指向本地服务的配置")]),t("div",[e._v("17.[新增]Sms模块的sendMessage接口及SmsResponse响应类")]),t("div",[e._v("18.[新增]CacheUtil租户缓存隔离功能")]),t("div",[e._v("19.[优化]CacheUtil缓存重载逻辑，返回bean不为null但数据全为空将不入缓存")]),t("div",[e._v("20.[优化]缓存清除逻辑，@CacheEvict统一修改为CacheUtil.clear")]),t("div",[e._v("21.[优化]登录逻辑，前端对密码加密后再传递至鉴权接口")]),t("div",[e._v("22.[优化]Oss上传接口，返回domain字段")]),t("div",[e._v("23.[优化]BladeRedisCache命名为BladeRedis")]),t("div",[e._v("24.[优化]控制台日志打印功能，规避MultipartFile读取报错")]),t("div",[e._v("25.[优化]配置关键字enable统一为enabled")]),t("div",[e._v("26.[优化]keyword日期处理")]),t("div",[e._v("27.[优化]代码生成sql脚本默认在工作台菜单下")]),t("div",[e._v("28.[优化]Jwt获取Token逻辑")]),t("div",[e._v("29.[优化]Token返回，增加岗位ID")]),t("div",[e._v("30.[优化]TokenGranter，采用更简洁的拓展方式")]),t("div",[e._v("31.[优化]日志管理展现方式")]),t("div",[e._v("32.[优化]新建租户逻辑，增加参数读取来设置新建租户的配置")]),t("div",[e._v("33.[优化]流程签收接口，支持多角色操作")]),t("div",[e._v("34.[优化]动态网关，支持读取自定义namespace配置")]),t("div",[e._v("35.[优化]删除租户逻辑，同时删除对应的用户")]),t("div",[e._v("36.[优化]树形懒加载，支持局部实时刷新功能")]),t("div",[e._v("37.[优化]多租户插件新增修改逻辑，若指定tenantId为空则不进行操作")]),t("div",[e._v("38.[优化]SmsBuilder、OssBuilder")]),t("div",[e._v("39.[优化]Sentinel配置")]),t("div",[e._v("40.[优化]XssFilter为全局的BladeRequestFilte")]),t("div",[e._v("41.[优化]BladeX开发手册Linux部署章节讲解")]),t("div",[e._v("42.[优化]Saber相关配置，以适配Avue最新版API")]),t("div",[e._v("43.[优化]Saber相关配置内done与loading的顺序")]),t("div",[e._v("44.[修复]用户基本信息修改的bug")]),t("div",[e._v("45.[修复]QiniuTemplate的putFile循环调用的bug")]),t("div",[e._v("46.[修复]日志框架获取RequestBody为空的bug")]),t("div",[e._v("47.[修复]Saber组件被复用导致没有刷新的bug")]),t("div",[e._v("48.[删除]过时的BladeSecureUrlProperties")]),t("div",[e._v("49.[删除]过时的XssUrlProperties")]),t("div",[e._v("50.[删除]过时的RedisUtil")])]),t("el-collapse-item",{attrs:{title:"2.4.0.RELEASE发布，增加多租户短信服务，升级Seata1.1",name:"14"}},[t("div",[e._v("1.[新增]集成七牛、阿里云、腾讯云、云片等短信服务，支持多租户配置")]),t("div",[e._v("2.[新增]对象存储模块的资源编号字段，可根据编号指定oss配置的服务")]),t("div",[e._v("3.[新增]对象存储、短信配置模块的调试功能，可在线调试配置是否可用")]),t("div",[e._v("4.[新增]超管启用租户过滤的配置")]),t("div",[e._v("5.[升级]SpringBoot 2.1.12，SpringCloud SR5")]),t("div",[e._v("6.[升级]兼容 Seata 1.1")]),t("div",[e._v("7.[优化]对象存储的模块使用体验")]),t("div",[e._v("8.[优化]兼容Oracle模糊查询的写法")]),t("div",[e._v("9.[优化]超管权限，不受租户过期时间影响")]),t("div",[e._v("10.[优化]mybatis-plus相关过期注解")]),t("div",[e._v("11.[优化]xxl-job模块的配置文件")]),t("div",[e._v("12.[优化]INode支持序列化接口")]),t("div",[e._v("13.[优化]统一Oss模块命名")]),t("div",[e._v("14.[优化]部署脚本，升级相关版本")]),t("div",[e._v("15.[修复]数据权限部门过滤已删除对象")]),t("div",[e._v("16.[修复]业务字典缓存bug，增加租户过滤")]),t("div",[e._v("17.[修复]占位符解析器的bug")])]),t("el-collapse-item",{attrs:{title:"2.3.1.RELEASE发布，流程增加租户定制，登录增加验证码",name:"13"}},[t("div",[e._v("1.[新增]登录验证码功能")]),t("div",[e._v("2.[新增]Oauth2自定义TokenGranter")]),t("div",[e._v("3.[新增]工作流绑定租户功能，支持通用流程和定制流程")]),t("div",[e._v("4.[新增]Condition类的自定义参数排除入口")]),t("div",[e._v("5.[增强]租户插件功能，新增操作可根据自定义的tenantId值进行覆盖")]),t("div",[e._v("6.[增强]超管权限，不受数据权限插件影响")]),t("div",[e._v("7.[升级]mybatis-plus至3.3.1")]),t("div",[e._v("8.[优化]mybatis-plus封装，提升分页可拓展性")]),t("div",[e._v("9.[优化]lib分离打包逻辑")]),t("div",[e._v("10.[优化]CacheUtil初始化逻辑")]),t("div",[e._v("11.[优化]HttpUtil，采用最新封装逻辑")]),t("div",[e._v("12.[优化]角色信息获取逻辑为实时，不受开源版、单体版缓存影响")]),t("div",[e._v("13.[优化]日志打印工具判断空逻辑")]),t("div",[e._v("14.[修复]BeanUtil的class类型判断逻辑")]),t("div",[e._v("15.[删除]基于zookeeper体验不佳的分布式锁")])]),t("el-collapse-item",{attrs:{title:"2.3.0.RELEASE发布，租户增强，底层架构插件全面增强",name:"12"}},[t("div",[e._v("1.[新增]swagger-bootstrap-ui全新升级为knife4j")]),t("div",[e._v("2.[新增]saber升级至avue2.3.7版本")]),t("div",[e._v("3.[新增]saber树表懒加载模式")]),t("div",[e._v("4.[新增]腾讯云存储封装")]),t("div",[e._v("5.[新增]xxl-job集成，支持分布式任务调度")]),t("div",[e._v("6.[新增]kafka、rabbitmq、cloudstream集成")]),t("div",[e._v("7.[新增]redis分布式锁插件")]),t("div",[e._v("8.[新增]高性能http调用模块")]),t("div",[e._v("9.[新增]PropertySource注册逻辑，提高安全性")]),t("div",[e._v("10.[新增]Param参数缓存工具类")]),t("div",[e._v("11.[新增]租户操作，增加创建对应的租户管理员账号、菜单权限")]),t("div",[e._v("12.[新增]租户插件，超管可查看所有租户数据的逻辑")]),t("div",[e._v("13.[新增]租户功能，绑定域名、系统背景、账号额度、过期时间")]),t("div",[e._v("14.[新增]登录、创建用户操作绑定租户配置")]),t("div",[e._v("15.[优化]租户插件判断逻辑，增加flowable相关表的租户过滤排除")]),t("div",[e._v("16.[优化]xss过滤逻辑，提高性能")]),t("div",[e._v("17.[优化]本地文件上传逻辑")]),t("div",[e._v("18.[优化]oss配置，修改后及时生效无需点击启用")]),t("div",[e._v("19.[优化]请求日志展示功能")]),t("div",[e._v("20.[修复]前端关闭租户模式导致的新增用户失效问题")]),t("div",[e._v("21.[修复]OSS相关bucket命名的问题")]),t("div",[e._v("22.[修复]ribbon组件由降级引起的问题")])]),t("el-collapse-item",{attrs:{title:"2.2.2.RELEASE发布，增强字典管理，用户管理增加左树右表",name:"11"}},[t("div",[e._v("1.[优化]拆分出系统字典表与业务字典表，字典键值改为string类型")]),t("div",[e._v("2.[优化]用户管理增加左树右表功能")]),t("div",[e._v("3.[优化]租户新增增加租户默认类型")]),t("div",[e._v("4.[优化]多租户表对应实体继承TenantEntity")]),t("div",[e._v("5.[优化]用于本地上传的BladeFile类更名为LocalFile防止冲突")]),t("div",[e._v("6.[优化]菜单新增逻辑")]),t("div",[e._v("7.[优化]mybatis-plus默认配置的处理")]),t("div",[e._v("8.[优化]租户过滤判断逻辑，删除多余的类")]),t("div",[e._v("9.[优化]alioss生成地址的逻辑")]),t("div",[e._v("10.[优化]redisTemplate加载逻辑")]),t("div",[e._v("11.[优化]租户处理，简化配置，自动识别需要过滤的租户表")]),t("div",[e._v("12.[优化]数据权限表单用户体验")]),t("div",[e._v("13.[修复]数据权限插件不兼容的问题")]),t("div",[e._v("14.[修复]数据权限树勾选显示问题")]),t("div",[e._v("15.[修复]windows平台elk开关失效的问题")]),t("div",[e._v("16.[修复]租户bean加载逻辑")]),t("div",[e._v("17.[修复]saber代码生成驼峰路径导致的问题")]),t("div",[e._v("18.[修复]docker脚本nginx端口匹配问题")]),t("div",[e._v("19.[修复]机构模块提交未删除缓存的问题")]),t("div",[e._v("20.[修复]oss缓存获取未加租户判断的问题")]),t("div",[e._v("21.[修复]blade-auth在java11下无法运行的问题")])]),t("el-collapse-item",{attrs:{title:"2.2.1.RELEASE发布，集成ELK，增加分布式日志追踪",name:"10"}},[t("div",[e._v("1.[新增]集成最新版ELK，增加分布式日志追踪功能")]),t("div",[e._v("2.[新增]增加ELK一键部署docker脚本")]),t("div",[e._v("3.[新增]抽象封装日志管理逻辑")]),t("div",[e._v("4.[新增]BladeX-Biz增加easypoi的demo工程")]),t("div",[e._v("5.[新增]BladeX-Biz增加websocket的demo工程")]),t("div",[e._v("6.[优化]minio文件策略")]),t("div",[e._v("7.[新增]Sql条件构建类去除分页字段")]),t("div",[e._v("8.[优化]sql打印功能")]),t("div",[e._v("9.[优化]wrapper逻辑")]),t("div",[e._v("10.[新增]CommonConstant拆分出LauncherConstant")])]),t("el-collapse-item",{attrs:{title:"2.2.0.RELEASE发布，增加集群监控，链路追踪",name:"9"}},[t("div",[e._v("1.[新增]turbine集群监控服务")]),t("div",[e._v("2.[新增]zipkin分布式链路追踪")]),t("div",[e._v("3.[升级]seata版本至0.9.0，解决分布式事务遇到的bug")]),t("div",[e._v("4.[新增]Launcher的nacos配置改为sharedIds，提升子工程配置优先级")]),t("div",[e._v("5.[新增]增加changeStatus方法，方便修改业务状态字段")]),t("div",[e._v("6.[新增]saber代码模板增加刷新事件")]),t("div",[e._v("7.[新增]saber底层架构升级")]),t("div",[e._v("8.[新增]saber支持tab切换保存页面状态")]),t("div",[e._v("9.[新增]添加bom统一版本配置")]),t("div",[e._v("10.[新增]添加trace starter")]),t("div",[e._v("11.[新增]blade-admin排除seata服务")]),t("div",[e._v("12.[新增]oss敏感操作增加权限校验")]),t("div",[e._v("13.[新增][修复]dict、role不选择父节点报错")]),t("div",[e._v("14.[新增]动态网关设置启动加载")]),t("div",[e._v("15.[新增]字典增加封存功能")])]),t("el-collapse-item",{attrs:{title:"2.1.0.RELEASE发布，全面增强底层驱动",name:"8"}},[t("div",[e._v("1.[升级]springboot 2.1.8、springcloud greenwich sr3")]),t("div",[e._v("2.[新增]集成seata，提供最简集成方案")]),t("div",[e._v("3.[新增]blade-admin增加nacos动态监听")]),t("div",[e._v("4.[新增]增加alioss集成，强化oss返回信息")]),t("div",[e._v("5.[新增]获取令牌操作增加空判断")]),t("div",[e._v("6.[新增]拆分数据库依赖、增强mybatis、增加yml自定义配置读取")]),t("div",[e._v("7.[新增]各模块增加默认的yml配置，不占用application.yml")]),t("div",[e._v("8.[新增]增加ribbon组件，可自定义lb优先选择的ip段，解决团队网关调试需求")]),t("div",[e._v("9.[优化]feign的bean加载逻辑")]),t("div",[e._v("10.[增强]condition条件")]),t("div",[e._v("11.[优化]日志打印效果")]),t("div",[e._v("12.[重构]redis模块，增加redis限流功能")]),t("div",[e._v("13.[优化]beanutil性能")]),t("div",[e._v("14.[优化]去掉调试用的RouteEndpoint，增强安全性")]),t("div",[e._v("15.[优化]部门新增逻辑")])]),t("el-collapse-item",{attrs:{title:"2.0.7.RELEASE发布，增加网关鉴权，强化代码生成",name:"7"}},[t("div",[e._v("1.[新增]增加基于Nacos的动态网关鉴权")]),t("div",[e._v("2.[新增]代码生成增加多数据源选择，强化单表代码生成")]),t("div",[e._v("3.[新增]增加个人信息修改、头像上传、密码更新功能")]),t("div",[e._v("4.[优化]新建角色逻辑")]),t("div",[e._v("5.[修复]若干issue")])]),t("el-collapse-item",{attrs:{title:"2.0.6.RELEASE发布，兼容三大主流数据库",name:"6"}},[t("div",[e._v("1.[新增]一套代码兼容Mysql、Oracle、PostgreSQL三大主流数据库")]),t("div",[e._v("2.[升级]flowable 6.4.2")]),t("div",[e._v("3.[新增]超管默认拥有所有菜单权限")]),t("div",[e._v("4.[修复]权限配置数据长度过大的bug")]),t("div",[e._v("5.[新增]增加租户信息获取")]),t("div",[e._v("6.[优化]命令行启动顺序")]),t("div",[e._v("7.[升级]alibaba cloud毕业版本")]),t("div",[e._v("8.[新增]日志监听增加自定义配置")]),t("div",[e._v("9.[升级]swagger-bootstrap-ui版本")]),t("div",[e._v("10.[新增]saber表格自适应、增加loading")]),t("div",[e._v("11.[新增]saber通知公告模块增加富文本编辑器")])]),t("el-collapse-item",{attrs:{title:"2.0.5.RELEASE发布，升级分布式接口权限系统",name:"5"}},[t("div",[e._v("1.[升级]为分布式接口权限系统")]),t("div",[e._v("2.[新增]增加多租户自定义顶部菜单功能")]),t("div",[e._v("3.[升级]greenwich SR2，mybatis-plus 3.1.2")]),t("div",[e._v("4.[新增]swagger排序规则采用最新注解")]),t("div",[e._v("5.[新增]数据权限增加可见字段配置")]),t("div",[e._v("6.[新增]数据权限增加分布式服务支持")]),t("div",[e._v("7.[新增]增加远程调用分页的例子，解决mybatis-plus传递IPage反序化出现的bug")]),t("div",[e._v("8.[优化]租户接口权限规则")]),t("div",[e._v("9.[新增]SqlKeyword增加条件判断")]),t("div",[e._v("10.[修复]部分模块包名分层的问题")])]),t("el-collapse-item",{attrs:{title:"2.0.4.RELEASE发布，增加动态数据权限系统",name:"4"}},[t("div",[e._v("1.[新增]注解+web可视化配置的动态数据权限系统")]),t("div",[e._v("2.[升级]部门管理为机构管理，增加机构类型")]),t("div",[e._v("3.[新增]解决mybatis-plus排序字段的sql注入问题")]),t("div",[e._v("4.[新增]create_dept统一业务字段")]),t("div",[e._v("5.[新增]swagger ui页面设置Authorize 默认全局参数")]),t("div",[e._v("6.[新增]jsonutil增加封装方法,去掉devtools依赖")]),t("div",[e._v("7.[新增]数据库连接适配mysql8")]),t("div",[e._v("8.[新增]docker-compose脚本增加时区")]),t("div",[e._v("9.[新增]oauth申请token可支持自定义表")]),t("div",[e._v("10.[修复]代码生成sql缺失主键的问")]),t("div",[e._v("11.[新增]boot版本重构登录逻辑，增强可拓展性")])]),t("el-collapse-item",{attrs:{title:"2.0.3.RELEASE发布，优化多租户oss系统，优化业务架构",name:"3"}},[t("div",[e._v("1.[新增]gateway增加动态文档配置，可通过配置nacos动态刷新")]),t("div",[e._v("2.[优化]修正blade_menu代码生成模块删除api的地址")]),t("div",[e._v("3.[优化]mysql依赖")]),t("div",[e._v("4.[新增]LauncherService增加排序功能")]),t("div",[e._v("5.[优化]hystrixfeign加载")]),t("div",[e._v("6.[优化]多租户oss系统逻辑，使之更加易用")]),t("div",[e._v("7.tenant_code字段统一为tenant_id")])]),t("el-collapse-item",{attrs:{title:"2.0.2.RELEASE发布，增加多租户oss管理系统",name:"2"}},[t("div",[e._v("1.[新增]增加minio封装")]),t("div",[e._v("2.[新增]增加qiniu封装")]),t("div",[e._v("3.[新增]增加oss统一接口")]),t("div",[e._v("4.[新增]集成minio、qiniu，进行统一管理的多租户oss系统")]),t("div",[e._v("5.[优化]blade-core-cloud逻辑")]),t("div",[e._v("6.[新增]badex-biz增加不同包名的swagger、mybatis配置demo")]),t("div",[e._v("7.[新增]badex-biz增加nacos自定义注册文件demo")]),t("div",[e._v("8.[新增]bladex-biz增加nacos参数动态刷新demo")])]),t("el-collapse-item",{attrs:{title:"2.0.1.RELEASE发布，系统优化版本",name:"1"}},[t("div",[e._v("1.[新增]兼容jdk11")]),t("div",[e._v("2.[新增]支持refresh_token功能")]),t("div",[e._v("3.[新增]增加minio封装，支持多租户模式的oss对象存储")]),t("div",[e._v("4.[新增]集成dubbo最新版本，支持rpc远程调用")]),t("div",[e._v("5.[新增]定制基于nacos的gateway动态网关")]),t("div",[e._v("6.[优化]聚合网关配置，使之更加轻巧")]),t("div",[e._v("7.[新增]CacheUtil增加缓存清除方法")]),t("div",[e._v("8.[优化]日志文件格式")]),t("div",[e._v("9.[新增]Secure拦截器支持自定义加载")])]),t("el-collapse-item",{attrs:{title:"2.0.0.RELEASE发布，完美定制的微服务开发平台",name:"0"}},[t("div",[e._v("1.[新增]Swagger提供list形式配置扫描包")]),t("div",[e._v("2.[新增]DictCache、UserCache、SysCache缓存工具类")]),t("div",[e._v("3.[新增]重新设计EntityWrapper结构，使之更加简单易用")]),t("div",[e._v("4.[新增]强化部分敏感数据的删除校验")]),t("div",[e._v("5.[新增]Condition类的sql条件构造器")]),t("div",[e._v("6.[修复]工作流分页bug")]),t("div",[e._v("7.[优化]docker配置")]),t("div",[e._v("8.[优化]多租户逻辑")]),t("div",[e._v("9.[优化]request打印日志逻辑")]),t("div",[e._v("10.[修复]getIp的bug")]),t("div",[e._v("11.[优化]saber代码生成模板")]),t("div",[e._v("12.[新增]saber更新至element-ui 2.8.2版本")]),t("div",[e._v("13.[修复]saber分页bug")]),t("div",[e._v("14.[新增]crud组件提交报错后恢复按钮状态")]),t("div",[e._v("15.[新增]字典管理表单调整")]),t("div",[e._v("16.[升级]springboot 2.1.5")])])],1)],1)],1)],1)],1)],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("f076")),r=n("5880");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={name:"wel",data:function(){return{activeNames:["1","2","3","5"],logActiveNames:["24"]}},computed:l({},Object(r["mapGetters"])(["userInfo"])),methods:{handleChange:function(e){window.console.log(e)}}},d=c,u=(n("d9b6"),n("829d")),p=Object(u["a"])(d,a,i,!1,null,null,null);t["default"]=p.exports},c833:function(e,t,n){"use strict";n("6507")},c97e:function(e,t,n){"use strict";n("48363")},cc71:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"新增","append-to-body":"",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t}}},[t("avue-crud",{ref:"usercrud",attrs:{option:e.option,data:e.data,search:e.userSearch,"table-loading":e.loading},on:{"select-all":e.selectAll,select:e.selectedUser,"update:search":function(t){e.userSearch=t},"search-change":e.userformSearchChange,"search-reset":e.userformSearchReset}},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"primary"}},[e._v(e._s(e.expertTypeName))])],1)],2),t("div",{attrs:{slot:"footer"},slot:"footer"},[[t("el-button",{on:{click:e.closeUserform}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveUserform}},[e._v("保存")])]],2)],1)},i=[],o=(n("1bc7"),n("fbde")),r={data:function(){return{dialogShow:!1,loading:!1,userSearch:{},option:{addBtn:!1,refreshBtn:!1,searchShowBtn:!1,columnBtn:!1,searchShow:!0,searchMenuSpan:6,menu:!1,selection:!0,align:"center",border:!0,column:[{label:"姓名",prop:"realName",search:!0},{label:"性别",prop:"sex",dicUrl:"/api/blade-system/dict/dictionary?code=sex",props:{label:"dictValue",value:"dictKey"}},{label:"联系方式",prop:"phone",search:!0},{label:"心理职级",prop:"ranks",dicUrl:"/api/blade-system/dict-biz/dictionary?code=psychological_rank",props:{label:"dictValue",value:"dictKey"}},{label:"心理职称",prop:"title",dicUrl:"/api/blade-system/dict-biz/dictionary?code=psychological_title",props:{label:"dictValue",value:"dictKey"}},{label:"所属机构",prop:"deptName"}]},userQuery:{roleId:null},expertTypeName:null,planDataId:null,data:[],resList:[],param:{}}},created:function(){},methods:{handle:function(e){console.log("indialog",e.users),this.param=e,this.userQuery.roleId=e.expertType,this.expertTypeName=e.expertTypeName,this.userformBefor(),this.dialogShow=!0,this.loading=!1},userformBefor:function(){var e=this;this.loading=!0,Object(o["getUserByExpertType"])(this.userQuery).then((function(t){e.data=t.data.data,e.$nextTick((function(){e.param.users instanceof Array&&e.data.forEach((function(t){e.$refs.usercrud.toggleRowSelection(t,e.checkSelect(t.id))}))}))}))},checkSelect:function(e){var t=!1;return this.param.users.forEach((function(n){if(n.userId==e)return t=!0,t})),t},selectAll:function(e){this.refrashPlanUser(e)},selectedUser:function(e,t){this.refrashPlanUser(e)},refrashPlanUser:function(e){var t=this;if(!this.loading){console.log("userSelectionChange",e,this.data);var n=!1;this.data.forEach((function(a){n=!1,t.param.users=t.param.users.filter((function(e){return e.userId!=a.id})),e.forEach((function(e){if(e.$index==a.$index)return t.param.users.push({userId:a.id,userName:a.realName}),n=!0,n}))}))}},userformSearchReset:function(){this.userQuery.realName=null,this.userQuery.phone=null,this.userformBefor()},userformSearchChange:function(e,t){this.userQuery.realName=e.realName,this.userQuery.phone=e.phone,this.userformBefor(),t()},closeUserform:function(){this.dialogShow=!1},saveUserform:function(){var e="";this.param.users.forEach((function(t){e+=","+t.userName})),this.param.userNames=e.substr(1),this.$emit("change",this.param),this.closeUserform()}}},s=r,l=n("829d"),c=Object(l["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports},cd11:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"新增班次","append-to-body":"",visible:e.dialogshow,width:"30%"},on:{"update:visible":function(t){e.dialogshow=t}}},[t("el-form",{ref:"classesform",attrs:{"label-width":"120px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"班次名称：",prop:"classes"}},[t("el-input",{model:{value:e.form.classes,callback:function(t){e.$set(e.form,"classes",t)},expression:"form.classes"}})],1),t("el-form-item",{attrs:{label:"班次时间段：",prop:"timeArea"}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",size:"medium"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[[t("el-button",{on:{click:e.closeClassesform}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveClassesform}},[e._v("确定")])]],2)],1)},i=[],o=n("6ebf"),r={data:function(){return{dialogshow:!1,form:{classes:"",timeArea:[new Date(2021,12,12,8,0,0),new Date(2021,12,12,11,0,0)]},rules:{classes:[{required:!0,message:"请输入班次名称",trigger:"blur"},{max:50,message:"班次名称长度小于50个字符",trigger:"blur"}],timeArea:[{required:!0,message:"请选择时间区间",trigger:"blur"}]},param:{}}},created:function(){},methods:{handle:function(e){null!=e&&(this.form.classes=e.classes,this.form.timeArea=[new Date("2021/12/12 "+e.startTime),new Date("2021/12/12 "+e.endTime)]),this.param=e,this.dialogshow=!0},DateToTimeStr:function(e){var t=e.getHours(),n=e.getMinutes(),a=e.getSeconds();return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)+":"+(a>9?a:"0"+a)},closeClassesform:function(){this.form={classes:"",timeArea:[new Date(2021,12,12,8,0,0),new Date(2021,12,12,11,0,0)]},this.dialogshow=!1},saveClassesform:function(){var e=this;this.$refs["classesform"].validate((function(t){if(t){var n,a={classesName:e.form.classes,startTime:e.DateToTimeStr(e.form.timeArea[0]),endTime:e.DateToTimeStr(e.form.timeArea[1])};if(null!=e.param)if(e.$emit("testChange",a,e.param,(function(e){n=e})),console.log("校验",n),n)return void console.log("校验未通过");e.param.classes=e.form.classes,e.param.startTime=a.startTime,e.param.endTime=a.endTime,Object(o["saveClasses"])(a).then((function(){e.$message({message:"班次保存成功",type:"success"})})),e.$emit("change",e.param),e.closeClassesform()}}))}}},s=r,l=n("829d"),c=Object(l["a"])(s,a,i,!1,null,null,null);t["default"]=c.exports},cdb7:function(e,t,n){"use strict";n.r(t);n("aa18"),n("982e");var a=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:11}},[t("basic-container",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("业务字典列表")])]),t("div",{staticClass:"clearfix"},[t("avue-crud",{ref:"crud",attrs:{option:e.optionParent,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1),t("el-col",{attrs:{span:13}},[t("basic-container",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("["+e._s(e.dictValue)+"] 业务字典详情")])]),t("div",{staticClass:"clearfix"},[t("avue-crud",{ref:"crudChild",attrs:{option:e.optionChild,"table-loading":e.loadingChild,data:e.dataChild,permission:e.permissionList,"before-open":e.beforeOpenChild,"before-close":e.beforeCloseChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.userInfo.role_name.includes("admin")?t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(n.row,n.index)}}},[e._v("新增子项\n              ")]):e._e()]}},{key:"isSealed",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(0===a.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[t("template",{slot:"menuLeft"},[e.permission.dict_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("8ddc"),s=n("d4f4"),l=n("5880");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{dictValue:"暂无",parentId:-1,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,loadingChild:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],optionParent:s["optionParent"],optionChild:s["optionChild"]}},computed:d(d({},Object(l["mapGetters"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dictbiz_add,!1),delBtn:this.vaildData(this.permission.dictbiz_delete,!1),editBtn:this.vaildData(this.permission.dictbiz_edit,!1),viewBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(r["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"parentId"===t.prop&&(t.value=e.id)})),this.$refs.crudChild.rowAdd()},rowSave:function(e,t,n){var a=this,i=d(d({},e),{},{dictKey:-1});Object(r["add"])(i).then((function(){a.onLoadParent(a.pageParent),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})}))},handleRowClick:function(e){this.query={},this.parentId=e.id,this.dictValue=e.dictValue,this.$refs.crudChild.value.code=e.code,this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"code"===t.prop&&(t.value=e.code),"parentId"===t.prop&&(t.value=e.id)})),this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.pageParent,this.query)},rowSaveChild:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoadChild(a.pageChild),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(r["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},beforeCloseChild:function(e){var t=this;this.$refs.crudChild.value.parentId=this.parentId,this.$refs.crudChild.option.column.filter((function(e){"parentId"===e.prop&&(e.value=t.parentId)})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loadingChild=!0,Object(r["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){t.dataChild=e.data.data,t.loadingChild=!1,t.selectionClear()}))}}},p=u,h=n("829d"),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},cdc3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.work_done_detail?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDetail(n.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_done_follow?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleImage(n.row,n.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),t("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("1e69"),l=n("7208");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:d(d({},Object(r["mapGetters"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=d(d({},this.query),{},{category:n.category?Object(l["a"])(n.category):null});this.loading=!0,Object(s["doneList"])(e.currentPage,e.pageSize,Object.assign(n,a)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("bd9e"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},cfa5:function(e,t,n){},d279:function(e,t,n){"use strict";n.r(t);n("3441");var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"提示",visible:e.dialogShow,width:"70%","append-to-body":!0},on:{"update:visible":function(t){e.dialogShow=t},close:e.btnCancel}},[t("template",{slot:"title"},[t("div",{staticStyle:{color:"#02a7f1"}},[e._v(e._s(e.title))])]),t("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.formData,rules:e.rules}},[t("el-row",{staticStyle:{"margin-bottom":"10px"}},[t("el-col",[t("span",{staticStyle:{color:"#66b1ff","font-weight":"700"}},[e._v("|")]),t("span",{staticStyle:{color:"#333","font-weight":"700"}},[e._v("基础信息")])])],1),t("el-row",{attrs:{type:"flex"}},[t("el-col",[t("el-form-item",{attrs:{label:"标题:",prop:"title"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1)],1),t("el-col",[t("el-form-item",{staticClass:"box1",attrs:{label:"所属栏目:",prop:"belongToColumn"}},[t("el-cascader",{staticStyle:{width:"100%"},attrs:{props:{label:"name",value:"name",checkStrictly:!0},options:e.columnList},model:{value:e.formData.belongToColumn,callback:function(t){e.$set(e.formData,"belongToColumn",t)},expression:"formData.belongToColumn"}})],1)],1)],1),t("el-row",{attrs:{type:"flex"}},[t("el-col",[t("el-form-item",{attrs:{label:"发布范围:",prop:"releaseScope"}},[t("el-checkbox-group",{model:{value:e.formData.releaseScope,callback:function(t){e.$set(e.formData,"releaseScope",t)},expression:"formData.releaseScope"}},[t("el-checkbox",{attrs:{label:"PC"}}),t("el-checkbox",{attrs:{label:"移动端"}})],1)],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"显示模式:"}},[t("el-input",{attrs:{placeholder:"根据栏目匹配",disabled:""},model:{value:e.displayMode,callback:function(t){e.displayMode=t},expression:"displayMode"}})],1)],1)],1),t("el-row",{attrs:{type:"flex"}},[t("el-col",[t("el-form-item",{attrs:{label:"信息来源:",prop:"informationSource"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.informationSource,callback:function(t){e.$set(e.formData,"informationSource",t)},expression:"formData.informationSource"}})],1)],1),t("el-col",[t("el-form-item",{attrs:{label:"来源URL:"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.sourceUrl,callback:function(t){e.$set(e.formData,"sourceUrl",t)},expression:"formData.sourceUrl"}})],1)],1)],1),t("el-row",[t("el-col",[t("el-form-item",{attrs:{label:"显示排序:"}},[t("el-input-number",{attrs:{min:1},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1)],1)],1),t("el-row",{staticStyle:{"margin-bottom":"10px"}},[t("el-col",[t("span",{staticStyle:{color:"#66b1ff","font-weight":"700"}},[e._v("|")]),t("span",{staticStyle:{color:"#333","font-weight":"700"}},[e._v("详细信息")])])],1),"URL"===e.displayMode?t("el-form-item",{attrs:{label:"URL:"}},[t("a",{staticStyle:{color:"hotpink"},attrs:{href:e.formData.columnPath}},[e._v(e._s(e.formData.columnPath))])]):e._e(),"URL"!=e.displayMode?t("el-form-item",{attrs:{label:"摘要:",prop:"summary"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.summary,callback:function(t){e.$set(e.formData,"summary",t)},expression:"formData.summary"}})],1):e._e(),"URL"!=e.displayMode?t("el-form-item",{attrs:{label:"正文:",prop:"content"}},[t("vue-ueditor-wrap",{attrs:{config:e.editorConfig},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1):e._e(),"URL"!=e.displayMode?t("el-row",{attrs:{type:"flex"}},[t("el-col",[t("el-form-item",{attrs:{label:"图片/视频:"}},[t("el-upload",{attrs:{action:"#","on-error":e.uploadError,"http-request":e.uploadA,"on-remove":e.backUploadA,"list-type":"picture-card",multiple:!0,"on-preview":e.showImg,limit:9,accept:".png,.jpg,.gif,.jpeg,.mp4","on-success":e.uploadAsuccess,"file-list":e.fileListA,"on-exceed":e.passNum}},[t("i",{staticClass:"el-icon-plus"})]),t("div",{staticStyle:{color:"#ccc"}},[e._v("可上传图片/视频文件，且不超过100M,默认第一张为封面图")]),t("el-dialog",{attrs:{visible:e.isShowImg,"append-to-body":""},on:{"update:visible":function(t){e.isShowImg=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1):e._e(),"URL"!=e.displayMode?t("el-row",{attrs:{type:"flex"}},[t("el-col",[t("el-form-item",{attrs:{label:"附件:"}},[t("el-upload",{attrs:{action:"#",accept:".doc,.txt,.pdf,.xls,.docx,.xlsx,.png,.zip,.rar,.gif,.jpeg","http-request":e.uploadB,"on-remove":e.backUploadB,"on-error":e.uploadError,"on-success":e.uploadBsuccess,limit:9,multiple:!0,"file-list":e.fileListB,"on-exceed":e.passNum}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),t("el-col",{staticStyle:{"padding-top":"10px"}},[t("span",{staticStyle:{"margin-left":"-350px",color:"#ccc"}},[e._v("最多上传10个附件，单个不超过20M")])])],1):e._e(),t("el-row",{staticStyle:{"margin-bottom":"10px"}},[t("el-col",[t("span",{staticStyle:{color:"#66b1ff","font-weight":"700"}},[e._v("|")]),t("span",{staticStyle:{color:"#333","font-weight":"700"}},[e._v("发布设置")])])],1),t("el-form-item",{attrs:{label:"窗口展示:",prop:"isShow"}},[t("el-radio-group",{model:{value:e.formData.isShow,callback:function(t){e.$set(e.formData,"isShow",t)},expression:"formData.isShow"}},[t("el-radio",{attrs:{label:"是"}}),t("el-radio",{attrs:{label:"否"}})],1),t("span",{staticStyle:{"margin-left":"25px",color:"#ccc"}},[e._v("仅针对首页轮播图、工作动态、政策法规、民生反响设置")])],1),t("el-form-item",{attrs:{label:"作者:",prop:"author"}},[t("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入"},model:{value:e.formData.author,callback:function(t){e.$set(e.formData,"author",t)},expression:"formData.author"}})],1),t("el-form-item",{attrs:{label:"是否发布:",prop:"releaseStatus"}},[t("el-radio-group",{model:{value:e.formData.releaseStatus,callback:function(t){e.$set(e.formData,"releaseStatus",t)},expression:"formData.releaseStatus"}},[t("el-radio",{attrs:{label:"是"}}),t("el-radio",{attrs:{label:"否"}}),t("el-radio",{attrs:{label:"定时发布"}})],1)],1),"是"===e.formData.releaseStatus||"定时发布"===e.formData.releaseStatus?t("el-form-item",{attrs:{label:"发布时间:",prop:"releaseTime"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择年-月日 时:分:秒"},model:{value:e.formData.releaseTime,callback:function(t){e.$set(e.formData,"releaseTime",t)},expression:"formData.releaseTime"}})],1):e._e(),"是"===e.formData.releaseStatus||"定时发布"===e.formData.releaseStatus?t("el-form-item",{attrs:{label:"到期时间:",prop:"expireDate"}},[t("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择年-月日 时:分:秒"},model:{value:e.formData.expireDate,callback:function(t){e.$set(e.formData,"expireDate",t)},expression:"formData.expireDate"}})],1):e._e()],1),"信息查看"!=e.title?t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.btnCancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addInfoPub}},[e._v("保 存")])],1):e._e()],2)},i=[],o=(n("ac67"),n("32ea"),n("5289"),n("fc02"),n("f076")),r=(n("352e"),n("2a53")),s=(n("a450"),n("1bc7"),n("f1d1")),l=n("84df");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){var e=this,t=function(t,n,a){var i=+new Date(n),o=+new Date(e.formData.releaseTime);i<=o?a(new Error("到期时间必须大于发布时间")):a()};return{dialogShow:!1,formData:{title:"",belongToColumn:"",releaseScope:[],informationSource:"",sourceUrl:"",sort:null,summary:"",content:" ",releaseStatus:"是",releaseTime:"",author:"",expireDate:"",bladeAttachId:"",imageId:"",parentColumnId:null,columnId:null,parentColumn:"",columnName:"",columnPath:"",isShow:null},fileListA:[],fileListB:[],displayMode:"",rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:40,message:"长度在40个字符以内",trigger:"blur"}],informationSource:[{max:40,message:"长度在40个字符以内",trigger:"blur"}],belongToColumn:[{required:!0,message:"请选择所属栏目",trigger:"change"}],releaseScope:[{required:!0,message:"请选择发布范围",trigger:"blur"}],summary:[{required:!0,message:"请输入摘要",trigger:"blur"},{max:150,message:"长度在150个字符以内",trigger:"blur"}],content:[{required:!0,message:"请输入正文",trigger:"blur"}],releaseStatus:[{required:!0,message:"请选择是否发布",trigger:"change"}],releaseTime:[{required:!0,message:"请输入发布时间",trigger:"change"}],expireDate:[{validator:t,trigger:"change"}],author:[{max:10,message:"长度在10个字符以内",trigger:"blur"}]},editorConfig:{zIndex:2e4,UEDITOR_HOME_URL:"/ue/",initialFrameHeight:500,serverUrl:"/api/ueditor/config"},isShowImg:!1,dialogImageUrl:""}},props:{columnList:{type:Array,required:!0},title:{type:String,required:!0}},watch:{"formData.belongToColumn":{deep:!0,handler:function(e){var t=this.isDisplayMode;1===e.length?this.columnList.forEach((function(n){n.name==e[0]&&t(n,"A")})):2===e.length&&this.columnList.forEach((function(n){n.children.forEach((function(n){n.name==e[1]&&t(n,"B")}))}))}}},methods:{isDisplayMode:function(e,t){var n=this;return"A"===t&&(this.formData.columnId="",this.formData.columnName="",this.formData.parentColumnId=e.id,this.formData.parentColumn=e.name),"B"===t&&(this.formData.parentColumnId=e.parentId,this.formData.columnId=e.id,this.formData.columnName=e.name,this.columnList.forEach((function(t){t.id===e.parentId&&(n.formData.parentColumn=t.name)}))),this.formData.columnPath=e.path,0===e.displayMode?this.displayMode="主目录":1===e.displayMode?this.displayMode="单页":2===e.displayMode?this.displayMode="列表":3===e.displayMode?this.displayMode="URL":this.displayMode=""},btnCancel:function(){this.formData={title:"",belongToColumn:"",releaseScope:[],informationSource:"",sourceUrl:"",sort:null,summary:"",content:" ",releaseStatus:"是",releaseTime:"",author:"",expireDate:"",bladeAttachId:"",imageId:"",parentColumnId:null,columnId:null,parentColumn:"",columnName:"",columnPath:"",isShow:null},this.fileListA=[],this.fileListB=[],this.displayMode="",this.$refs.form.clearValidate(),this.dialogShow=!1},addInfoPub:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=d({},this.formData),t.releaseScope.length>1?t.releaseScope="0,1":"PC"===t.releaseScope[0]?t.releaseScope="0":"移动端"===t.releaseScope[0]?t.releaseScope="1":t.releaseScope="","是"===t.isShow?t.isShow=0:"否"===t.isShow?t.isShow=1:t.isShow=null,"是"===t.releaseStatus?t.releaseStatus=0:"否"===t.releaseStatus?t.releaseStatus=1:"定时发布"===t.releaseStatus?t.releaseStatus=2:t.releaseStatus=null,this.fileListA.length>0?(t.imageId="",this.fileListA.forEach((function(e){t.imageId+=","+e.ids})),t.imageId=t.imageId.substr(1)):t.imageId="",this.fileListB.length>0?(t.bladeAttachId="",this.fileListB.forEach((function(e){t.bladeAttachId+=","+e.ids})),t.bladeAttachId=t.bladeAttachId.substr(1)):t.bladeAttachId="";try{t.releaseTime=Object(l["b"])(t.releaseTime)}catch(n){t.releaseTime=""}try{t.expireDate=Object(l["b"])(t.expireDate)}catch(n){t.expireDate=""}return console.log(t),e.prev=9,e.next=12,this.$refs.form.validate();case 12:if("编辑发布"!==this.title){e.next=17;break}return e.next=15,Object(s["editInfoPub"])(t);case 15:e.next=19;break;case 17:return e.next=19,Object(s["addInfoPub"])(t);case 19:this.$parent.getInfoPubList(),this.dialogShow=!1,this.$message.success("操作成功！"),e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](9),console.log(e.t0);case 27:case"end":return e.stop()}}),e,this,[[9,24]])})));function t(){return e.apply(this,arguments)}return t}(),uploadA:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,o,r,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.file.size/1024/1024,a=t.file.type.split("/")[0],"video"!==a){e.next=7;break}if(!(n>300)){e.next=5;break}return e.abrupt("return",this.$message.error("视频大小不能超过300M！"));case 5:e.next=9;break;case 7:if(!(n>10)){e.next=9;break}return e.abrupt("return",this.$message.error("图片大小不能超过10M！"));case 9:return e.prev=9,i=t.file,o=new FormData,o.append("file",i),e.next=15,Object(s["uploadFile"])(o);case 15:r=e.sent,l=r.data,l&&200===l.code&&!0===l.success&&(c={},c.name=l.data.originalName,c.url=l.data.link,c.ids=l.data.attachId,this.fileListA.push(c)),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](9),console.log(e.t0);case 23:case"end":return e.stop()}}),e,this,[[9,20]])})));function t(t){return e.apply(this,arguments)}return t}(),uploadB:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,a,i,o,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.file.size/1024/1024,!(n>20)){e.next=3;break}return e.abrupt("return",this.$message.error("单个文件大小不能超过20M！"));case 3:return e.prev=3,a=t.file,i=new FormData,i.append("file",a),e.next=9,Object(s["uploadFile"])(i);case 9:o=e.sent,r=o.data,r&&200===r.code&&!0===r.success&&(l={},l.name=r.data.originalName,l.url=r.data.link,l.ids=r.data.attachId,this.fileListB.push(l)),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(t){return e.apply(this,arguments)}return t}(),passNum:function(){this.$message.error("超出最大上传数量！")},backUploadA:function(e){var t=[];this.fileListA.forEach((function(n){n.ids!=e.ids&&t.push(n)})),this.fileListA=t,this.$message.success("取消上传此文件")},backUploadB:function(e){var t=[];this.fileListB.forEach((function(n){n.ids!=e.ids&&t.push(n)})),this.fileListB=t,this.$message.success("取消上传此文件")},uploadError:function(){this.$message.error("上传失败")},showImg:function(e){this.dialogImageUrl=e.url,this.isShowImg=!0}}},p=u,h=(n("203b"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,"7f772c92",null);t["default"]=f.exports},d4c8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",[e._m(0),t("avue-back-top",{attrs:{id:"avue-view"}}),t("avue-back-top",{attrs:{id:"avue-view",height:100,bottom:200}},[t("div",{staticClass:"top"},[e._v("返回顶端")])])],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{height:"2000px","background-color":"#fff"}},[t("div",{staticStyle:{padding:"15px 20px","font-size":"18px"}},[e._v("往下拉就会出现返回菜单")])])}],o={},r=o,s=(n("9c25"),n("829d")),l=Object(s["a"])(r,a,i,!1,null,"9b5b37d8",null);t["default"]=l.exports},d560:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{ref:"login",staticClass:"login-container",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}}},[t("top-color",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]}),t("div",{staticClass:"login-weaper animated bounceInDown"},[t("div",{staticClass:"login-left"},[t("div",{staticClass:"login-time"},[e._v("\n        "+e._s(e.time)+"\n      ")]),t("img",{staticClass:"img",attrs:{src:"/img/logo.png",alt:""}}),t("p",{staticClass:"title"},[e._v(e._s(e.$t("login.info")))]),t("el-button",{on:{click:e.gotoPortal}},[e._v("门户")])],1),t("div",{staticClass:"login-border"},[t("div",{staticClass:"login-main"},[t("h4",{staticClass:"login-title"},[e._v("\n          "+e._s(e.$t("login.title"))+e._s(e.website.title)+"\n          "),t("top-lang")],1),"user"===e.activeName?t("userLogin"):"code"===e.activeName?t("codeLogin"):"third"===e.activeName?t("thirdLogin"):e._e(),t("div",{staticClass:"login-menu"},[t("a",{attrs:{href:"#"},on:{click:function(t){t.stopPropagation(),e.activeName="user"}}},[e._v(e._s(e.$t("login.userLogin")))]),t("a",{attrs:{href:"#"},on:{click:function(t){t.stopPropagation(),e.activeName="third"}}},[e._v(e._s(e.$t("login.thirdLogin")))])])],1)])])],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("8dee"),n("fc02"),n("aa18"),n("982e"),n("f076")),r=n("7c05"),s=n("acd4"),l=n("124f"),c=n("5880"),d=n("84df"),u=n("c54a"),p=n("c7cc"),h=n("44b2"),f=n("0e0b");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={name:"login",components:{userLogin:r["default"],codeLogin:s["default"],thirdLogin:l["default"],topLang:p["default"],topColor:h["default"]},data:function(){return{time:"",activeName:"user",socialForm:{tenantId:"000000",source:"",code:"",state:""}}},watch:{$route:function(){this.handleLogin()}},created:function(){this.handleLogin(),this.getTime()},mounted:function(){},computed:m({},Object(c["mapGetters"])(["website","tagWel"])),props:[],methods:{getTime:function(){var e=this;setInterval((function(){e.time=Object(d["b"])(new Date)}),1e3)},handleLogin:function(){var e=this,t=Object(f["e"])(),n="/oauth/redirect/";if(this.socialForm.source=Object(f["d"])("source"),this.socialForm.code=Object(f["d"])("code"),this.socialForm.state=Object(f["d"])("state"),Object(u["c"])(this.socialForm.source)&&t.includes(n)){var a=t.split("?")[0];a=a.split(n)[1],this.socialForm.source=a}if(!Object(u["c"])(this.socialForm.source)&&!Object(u["c"])(this.socialForm.code)&&!Object(u["c"])(this.socialForm.state)){var i=this.$loading({lock:!0,text:"第三方系统登录中,请稍后。。。",spinner:"el-icon-loading"});this.$store.dispatch("LoginBySocial",this.socialForm).then((function(){window.location.href=t.split(n)[0],e.$router.push({path:e.tagWel.value}),i.close()})).catch((function(){i.close()}))}},gotoPortal:function(){this.$router.replace({path:"/portal"})}}},b=v,y=(n("9aaa"),n("829d")),w=Object(y["a"])(b,a,i,!1,null,null,null);t["default"]=w.exports},d5e6:function(e,t,n){"use strict";n("a23c")},d65a:function(e,t,n){},d71b:function(e,t,n){},d9a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("fc02"),n("32ea"),n("1bc7"),n("e680"),n("3451");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n("f263"),o=n.n(i),r=n("b4c2");function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),o()(e,Object(r["a"])(a.key),a)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),o()(e,"prototype",{writable:!1}),e}var c=function(){function e(){a(this,e)}return l(e,null,[{key:"notEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isUndefined",value:function(e){return null===e||"undefined"===typeof e}},{key:"isEmpty",value:function(e){return null===e||"undefined"===typeof e||"string"===typeof e&&""===e&&"undefined"!==e}},{key:"toInt",value:function(e,t){if(this.isEmpty(e))return void 0===t?-1:t;var n=parseInt(e,0);return Number.isNaN(n)?void 0===t?-1:t:n}},{key:"toFormData",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(n){t.append(n,Array.isArray(e[n])?e[n].join(","):e[n])})),t}},{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?e.format(t):null}},{key:"join",value:function(e){return e?e.join(","):""}},{key:"split",value:function(e){return e?String(e).split(","):""}}])}()},d9b6:function(e,t,n){"use strict";n("b803")},d9b8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(n){return[e.permission.work_start_flow?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleStart(n.row)}}},[e._v("发起\n      ")]):e._e(),e.permission.work_start_image?t("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleImage(n.row,n.index)}}},[e._v("流程图\n      ")]):e._e()]}},{key:"tenantId",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(""===a.tenantId?"通用":a.tenantId))])]}},{key:"version",fn:function(n){var a=n.row;return[t("el-tag",[e._v("v"+e._s(a.version))])]}},{key:"suspensionState",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(1===a.suspensionState?"激活":"挂起"))])]}},{key:"category",fn:function(n){var a=n.row;return[t("el-tag",[e._v(e._s(a.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[t("el-radio-group",{attrs:{size:"small"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[t("el-radio-button",{attrs:{label:"1"}},[e._v("通用流程")]),t("el-radio-button",{attrs:{label:"2"}},[e._v("定制流程")])],1)],1)],2),t("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[t("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],o=(n("ac67"),n("32ea"),n("1bc7"),n("f076")),r=n("5880"),s=n("1e69"),l=n("7208");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},mode:"1",selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,menuWidth:150,dialogWidth:900,dialogClickModal:!1,column:[{label:"租户编号",prop:"tenantId",slot:!0,width:120},{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,width:100},{label:"流程标识",prop:"key"},{label:"流程名称",prop:"name",search:!0},{label:"流程版本",prop:"version",slot:!0,width:80},{label:"状态",prop:"suspensionState",slot:!0,width:80},{label:"部署时间",prop:"deploymentTime",width:165}]},data:[]}},watch:{mode:function(){this.onLoad(this.page)}},computed:d(d({},Object(r["mapGetters"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleStart:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/form/").concat(e.id)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/resource-view?processDefinitionId=".concat(e.id),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=d(d({},this.query),{},{category:n.category?Object(l["a"])(n.category):null,mode:this.mode});this.loading=!0,Object(s["startList"])(e.currentPage,e.pageSize,Object.assign(n,a)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("f73d"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},dd8d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.dialogShow,"append-to-body":"",title:"时间设置"},on:{"update:visible":function(t){e.dialogShow=t},close:e.onClose}},[t("div",[t("el-form",{ref:"planInfo",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form,size:"mini",rules:e.rules}},[t("el-row",[t("el-form-item",{attrs:{label:"班次：",prop:"classes"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.classesChange},model:{value:e.form.classes,callback:function(t){e.$set(e.form,"classes",t)},expression:"form.classes"}},e._l(e.options.classes,(function(e){return t("el-option",{key:e.id,attrs:{label:e.classesName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"类别：",prop:"expertType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.expertType,callback:function(t){e.$set(e.form,"expertType",t)},expression:"form.expertType"}},e._l(e.options.expertTypes,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"班次时间段：",prop:"timeArea"}},[t("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",size:"medium"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),t("el-form-item",{attrs:{size:"large"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.addPlan}},[e._v("添加")])],1)],1)],1),t("div",{staticClass:"weektitle"},[t("el-button",{attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:e.handlePrevious}}),t("span",[e._v(e._s(e.weekName))]),t("el-button",{attrs:{type:"text",icon:"el-icon-arrow-right"},on:{click:e.handleNext}})],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"",label:"",width:"50",align:"center",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.delPlan(n.row)}}})]}}])}),t("el-table-column",{attrs:{prop:"classes",label:"班次",Width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"50px"}},[e._v(e._s(n.row.classes)+"\n        ")]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editClassesTime(n.row)}}})]}}])}),t("el-table-column",{attrs:{prop:"expertType",label:"类别",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",[e._v("\n          "+e._s(e._f("expertTypeFilter")(n.row.expertType)))])]}}])}),t("el-table-column",{attrs:{prop:"timeArea",label:"时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{display:"inline-block","margin-left":"10px",width:"150px"}},[e._v("\n          "+e._s(n.row.startTime+"~"+n.row.endTime))]),t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editClassesTime(n.row)}}})]}}])}),t("el-table-column",{attrs:{prop:e.userNames,label:"人员",minWidth:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"80%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:n.row.userNames}},[e._v("\n          "+e._s(n.row.userNames))]),t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAddUser(n.row)}}})]}}])}),t("el-table-column",{attrs:{prop:e.dayNames,label:"适用时间",minWidth:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("div",{staticStyle:{"margin-left":"10px",display:"inline-block",width:"80%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:n.row.dayNames}},[e._v("\n          "+e._s(n.row.dayNames))]),t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAddDay(n.row)}}})]}}])})],1),t("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[t("span",[e._v("向后复制：")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.clone(1)}}},[e._v("1周")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.clone(4)}}},[e._v("4周")]),t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.clone(12)}}},[e._v("12周")])],1),t("el-dialog",{attrs:{title:"适用时间",visible:e.dayform.show,width:"382px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.dayform,"show",t)}}},[t("el-checkbox-group",{model:{value:e.dayform.checkList,callback:function(t){e.$set(e.dayform,"checkList",t)},expression:"dayform.checkList"}},e._l(e.options.days,(function(n,a){return t("el-checkbox",{key:a,staticStyle:{margin:"10px 30px"},attrs:{label:n.dictKey}},[e._v(e._s(n.dictValue))])})),1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDaysform}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveDaysform}},[e._v("确定")])],1)],1),t("el-dialog",{attrs:{title:"新增班次","append-to-body":"",visible:e.dialogshow,width:"30%"},on:{"update:visible":function(t){e.dialogshow=t}}},[t("el-form",{ref:"classesform",attrs:{"label-width":"120px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"班次名称：",prop:"classes"}},[t("el-input",{model:{value:e.form.classes,callback:function(t){e.$set(e.form,"classes",t)},expression:"form.classes"}})],1),t("el-form-item",{attrs:{label:"班次时间段：",prop:"timeArea"}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",size:"medium"},model:{value:e.form.timeArea,callback:function(t){e.$set(e.form,"timeArea",t)},expression:"form.timeArea"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[[t("el-button",{on:{click:e.closeClassesform}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveClassesform}},[e._v("确定")])]],2)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.savePlan}},[e._v("确定")])],1),t("adduser",{ref:"userDialog",on:{change:e.userSelect}}),t("addclasses",{ref:"classesDialog",on:{change:e.handleClassesChange,testChange:e.handleTestChange}})],1)},i=[],o=(n("aa18"),n("982e"),n("3441"),n("1bc7"),n("6ebf")),r=n("fbde"),s=n("0eb1"),l=n("8ddc"),c=n("cc71"),d=n("cd11"),u=null,p={components:{adduser:c["default"],addclasses:d["default"]},filters:{classesFilter:function(e){return u.classes_filter(e)},expertTypeFilter:function(e){return u.expertType_filter(e)}},data:function(){return{name:"addplan",dialogShow:!1,weekNum:null,weekName:null,lineIndex:0,options:{classes:[],expertTypes:[],days:[]},form:{classes:null,expertType:null,timeArea:[new Date(2021,12,12,8,0,0),new Date(2021,12,12,11,0,0)]},rules:{classes:[{required:!0,message:"请选择班次",trigger:"blur"}],expertType:[{required:!0,message:"请选择类别",trigger:"blur"}],timeArea:[{required:!0,message:"请选择时间区间",trigger:"blur"}]},tableData:[],planData:[],dayform:{row:null,show:!1,checkList:[]},userform:{row:null}}},created:function(){u=this,this.InitOption()},methods:{handle:function(e,t){this.weekNum=e,this.weekName=t,this.loadWeekPlan(),this.dialogShow=!0},DateToTimeStr:function(e){var t=e.getHours(),n=e.getMinutes(),a=e.getSeconds();return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)+":"+(a>9?a:"0"+a)},timeOverlap:function(e,t){var n=!1;return n=1==this.contrast(e[1],t[1])&&1==this.contrast(t[1],e[0])||1==this.contrast(t[1],e[1])&&1==this.contrast(e[1],t[0])||1==this.contrast(e[0],t[0])&&1==this.contrast(t[1],e[1])||1==this.contrast(t[0],e[0])&&1==this.contrast(e[1],t[1])||0==this.contrast(t[0],e[0])&&0==this.contrast(e[1],t[1]),console.log("判重",e,t,n),n},contrast:function(e,t){var n=new Date("2021/12/12 "+e),a=new Date("2021/12/12 "+t);return n.getTime()==a.getTime()?0:n.getTime()>a.getTime()?1:n.getTime()<a.getTime()?-1:void 0},day_filter:function(e){var t=null;return u.options.days.forEach((function(n){n.dictKey==e&&(t=n.dictValue)})),t},expertType_filter:function(e){var t=null;return this.options.expertTypes.forEach((function(n){n.value==e&&(t=n.label)})),t},classes_filter:function(e){var t=null;return this.options.classes.forEach((function(n){n.id==e&&(t=n.classesName)})),t},InitOption:function(){var e=this;Object(o["getClassesList"])().then((function(t){e.options.classes=t.data.data})),Object(r["getExpertTypeList"])().then((function(t){e.options.expertTypes=t.data.data})),Object(l["getDictionary"])({code:"days"}).then((function(t){e.options.days=t.data.data}))},classesChange:function(e){var t=this;this.options.classes.forEach((function(n){n.id==e&&(t.form.timeArea=[new Date("2021/12/12 "+n.startTime),new Date("2021/12/12 "+n.endTime)])}))},handlePrevious:function(){this.weekNum-=1,this.weekName<0&&(this.weekName=0),this.loadWeekPlan()},handleNext:function(){this.weekNum+=1,this.loadWeekPlan()},refrashTableData:function(){var e=this;this.tableData=[],this.planData.forEach((function(t){t.weekNum==e.weekNum&&e.tableData.push(t)}))},loadWeekPlan:function(){var e=this;Object(s["getPlanByWeek"])(this.weekNum).then((function(t){e.weekName=t.data.data.weekName,e.weekNum=t.data.data.weekNum,e.weekPlan=t.data.data})),this.refrashTableData()},addPlan:function(){var e=this;console.log("addPlan",this.weekPlan,this.form,this.tableData),this.$refs["planInfo"].validate((function(t){if(t){if(e.weekPlan.expertPlanVOList.filter((function(t){return t.weekNum==e.weekNum&&e.timeOverlap([t.startTime,t.endTime],[e.DateToTimeStr(e.form.timeArea[0]),e.DateToTimeStr(e.form.timeArea[1])])&&t.expertType==e.form.expertType})).length>0)return void e.$message({message:"与已排计划时间重叠！",type:"warning"});e.planData.push({lineIndex:e.lineIndex++,weekNum:e.weekNum,classes:e.classes_filter(e.form.classes),expertType:e.form.expertType,startTime:e.DateToTimeStr(e.form.timeArea[0]),endTime:e.DateToTimeStr(e.form.timeArea[1]),days:[],users:[]}),e.refrashTableData()}}))},setPlanUser:function(e,t){var n="";t.forEach((function(e){n+=e.realName})),e.users=t,e.userName=n.substr(1)},setPlanDay:function(e,t){var n="";t.forEach((function(e){n+=e.dictValue})),e.days=t,e.dayNames=n.substr(1)},handleAddDay:function(e){this.dayform.row=e,this.dayform.show=!0,this.dayform.checkList=e.days},closeDaysform:function(){this.dayform={show:!1,checkList:[]}},saveDaysform:function(){var e=this,t=!1;if(this.dayform.checkList.sort(),this.tableData.forEach((function(n){e.timeOverlap([n.startTime,n.endTime],[e.dayform.row.startTime,e.dayform.row.endTime])&&n.expertType==e.dayform.row.expertType&&n.lineIndex!=e.dayform.row.lineIndex&&(console.log(e.tableData,e.dayform.checkList,e.timeOverlap([n.startTime,n.endTime],[e.dayform.row.startTime,e.dayform.row.endTime])),e.dayform.checkList.forEach((function(a){if(n.days.includes(a))return e.$message({message:"与在排计划时间重叠！",type:"warning"}),void(t=!0)})))})),!t){for(var n="",a=0;a<this.planData.length;a++)this.planData[a].lineIndex==this.dayform.row.lineIndex&&(this.planData[a].days=[],this.dayform.checkList.forEach((function(t){console.log("el",t),n+="    "+e.day_filter(t),e.planData[a].days.push(t)})),n.length>0&&(n=n.substr(4)),this.planData[a].dayNames=n);this.refrashTableData(),this.closeDaysform()}},handleAddUser:function(e){console.log(this.planData),this.userform.row=e,this.$refs.userDialog.handle({expertType:e.expertType,expertTypeName:this.expertType_filter(e.expertType),users:e.users,plan:e})},userSelect:function(e){e.plan.users=e.users,e.plan.userNames=e.userNames,this.refrashTableData(),console.log(e,this.planData)},editClassesTime:function(e){var t=this;this.$nextTick((function(){t.$refs.classesDialog.handle(e)}))},handleClassesChange:function(e){var t=this;this.$nextTick((function(){Object(o["getClassesList"])().then((function(e){console.log(e),t.options.classes=e.data.data}))}))},handleTestChange:function(e,t,n){var a=this,i=!1;this.tableData.forEach((function(n){a.timeOverlap([n.startTime,n.endTime],[e.startTime,e.endTime])&&n.expertType==t.expertType&&n.lineIndex!=t.lineIndex&&t.days.forEach((function(e){if(n.days.includes(e))return a.$message({message:"与在排计划时间重叠！",type:"warning"}),void(i=!0)}))})),n(i)},delPlan:function(e){this.planData=this.planData.filter((function(t){return t.lineIndex!=e.lineIndex})),this.refrashTableData()},onClose:function(){this.planData=[],this.tableData=[],this.form={classes:null,expertType:null,timeArea:[new Date(2021,12,12,8,0,0),new Date(2021,12,12,11,0,0)]},this.dayform={row:null,show:!1,checkList:[]}},closeDialog:function(){this.dialogShow=!1},savePlan:function(){var e=this;Object(s["saveExpertPlanTree"])(this.planData).then((function(){e.$message({message:"排班计划保存成功",type:"success"}),e.$emit("change"),e.closeDialog()}))},clone:function(e){for(var t,n=this,a=[],i=!1,o=1;o<=e;o++)if(this.tableData.forEach((function(e){t=JSON.parse(JSON.stringify(e)),console.log(e,t),t.weekNum=t.weekNum+o,n.planData.filter((function(a){if(a.expertType==t.expertType&&n.timeOverlap([a.startTime,a.endTime],[t.startTime,t.endTime])&&(t.days.forEach((function(t){if(e.days.includes(t))return n.$message({message:"与在排计划时间重叠！",type:"warning"}),void(i=!0)})),!i))return i}))&&a.push(t)})),!i)return i;i||(this.planData=this.planData.concat(a))}}},h=p,f=(n("e22e"),n("829d")),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports},e075:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"consultation-process"},[t("h-content")],1)},i=[],o=n("159f"),r={components:{hContent:o["default"]},name:"consultation-process"},s=r,l=(n("bf8c"),n("829d")),c=Object(l["a"])(s,a,i,!1,null,"97408ee4",null);t["default"]=c.exports},e1c2:function(e,t,n){"use strict";n.r(t);n("d91d");var a,i=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:24}},[t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,data:e.data,search:e.search,"before-open":e.beforeOpen},on:{"update:search":function(t){e.search=t},"search-change":e.searchChange,"search-reset":e.searchReset,"row-update":e.rowUpdate,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"sex",fn:function(t){return[e._v("\n          "+e._s(e._f("sexFilter")(t.row.sex))+"\n        ")]}},{key:"ranks",fn:function(t){return[e._v("\n          "+e._s(e._f("ranksFilter")(t.row.ranks))+"\n        ")]}},{key:"title",fn:function(t){return[e._v("\n          "+e._s(e._f("titleFilter")(t.row.title))+"\n        ")]}},{key:"isPublic",fn:function(t){return[e._v("\n          "+e._s(e._f("isPublicFilter")(t.row.isPublic))+"\n        ")]}},{key:"deptId",fn:function(t){return[e._v("\n          "+e._s(e._f("deptIdFilter")(t.row.deptId))+"\n        ")]}},{key:"domain",fn:function(t){return[e._v("\n          "+e._s(e._f("domainFilter")(t.row.domain))+"\n        ")]}},{key:"phone",fn:function(t){return[e._v("\n          "+e._s(e._f("phoneFilter")(t.row.phone))+"\n        ")]}},{key:"menu",fn:function(n){var a=n.row,i=n.index;return[t("el-select",{staticClass:"statictis-select",attrs:{placeholder:"操作"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("el-option",{attrs:{label:"查看用户信息",value:"1"},nativeOn:{click:function(t){return e.handleViewRow(a,i)}}}),t("el-option",{attrs:{label:"编辑用户信息",value:"2"},nativeOn:{click:function(t){return e.handleEditRow(a,i)}}}),t("el-option",{attrs:{label:"查看排班",value:"3"},nativeOn:{click:function(t){return e.handlePlan(a,i)}}})],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[t("el-button",{attrs:{type:"1464227306195197954"==e.userType?"primary":"",size:"medium "},on:{click:function(t){return e.handleChangeUserType("1464227306195197954")}}},[e._v("资深卖家\n          ")]),t("el-button",{attrs:{type:"1464227359223783426"==e.userType?"primary":"",size:"medium "},on:{click:function(t){return e.handleChangeUserType("1464227359223783426")}}},[e._v("客服卖家\n          ")])],1)],2)],1)],1)],1)},o=[],r=(n("9f60"),n("94f0"),n("0c84"),n("2843"),n("a450"),n("4057"),n("aa18"),n("982e"),n("8dee"),n("1bc7"),n("fc02"),n("e5b4"),n("c0c7")),s=n("5a04"),l=n("8ddc"),c=n("7754"),d=n("fcb7"),u=n("1ca4");function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function h(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var g={filters:{sexFilter:function(e){var t=a.findObject(a.option.column,"sex"),n=t.dicData.find((function(t){return t.dictKey==e}));return null!=n?n.dictValue:null},ranksFilter:function(e){var t=a.findObject(a.option.column,"ranks"),n=t.dicData.find((function(t){return t.dictKey==e}));return null!=n?n.dictValue:null},titleFilter:function(e){var t=a.findObject(a.option.column,"title"),n=t.dicData.find((function(t){return t.dictKey==e}));return null!=n?n.dictValue:null},isPublicFilter:function(e){var t=a.findObject(a.option.column,"isPublic"),n=t.dicData.find((function(t){return t.dictKey==e}));return null!=n?n.dictValue:null},deptIdFilter:function(e){var t=a.treeFind(a.enums.depts,e);return t?t.title:null},domainFilter:function(e){var t=e.split(","),n="";return t.forEach((function(e){for(var t=0;t<a.enums.domain.length;t++)e==a.enums.domain[t].dictKey&&(n=n+"，"+a.enums.domain[t].dictValue)})),n.substr(1)},phoneFilter:function(e){return e.replace(/(.{3}).*(.{2})/,"$1******$2")}},data:function(){return{userType:"1464227306195197954",enums:{depts:[],domain:[]},form:{},query:{roleId:"1464227306195197954"},search:{},page:{pageSize:10,currentPage:1,total:0},option:{selection:!0,align:"center",labelWidth:100,dialogClickModal:!1,lazy:!0,height:"auto",calcHeight:80,tip:!1,border:!0,index:!1,menuWidth:180,searchShow:!0,searchMenuSpan:4,searchSpan:5,addBtn:!1,columnBtn:!1,refreshBtn:!1,searchShowBtn:!1,delBtn:!1,editBtn:!1,column:[{label:"用户姓名",prop:"realName",search:!0,searchOrder:1,width:150},{label:"性别",prop:"sex",type:"select",search:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},searchOrder:4,width:100},{label:"联系方式",prop:"phone",search:!0,searchOrder:5,width:200},{label:"心理职级",prop:"ranks",type:"select",search:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},searchOrder:3,width:150},{label:"心理职称",prop:"title",type:"select",search:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},searchOrder:7,width:150},{label:"所属机构",prop:"deptName",search:!0,searchOrder:2,display:!1},{label:"所属机构",prop:"deptId",width:150},{label:"擅长领域",prop:"domain",search:!0,dicData:[],searchOrder:5,minWidth:150},{label:"是否公开",prop:"isPublic",type:"select",search:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},searchOrder:8,width:100}],group:[{label:"基础信息",prop:"baseInfo",icon:"el-icon-user-solid",column:[{label:"登录账号",prop:"account",rules:[{required:!0,message:"请输入登录账号",trigger:"blur"}]}]},{label:"详细信息",prop:"detailInfo",icon:"el-icon-s-order",column:[{label:"用户昵称",prop:"name",hide:!0,rules:[{required:!0,message:"请输入用户昵称",trigger:"blur"}]},{label:"用户姓名",prop:"realName",rules:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:2,max:5,message:"姓名长度在2到5个字符"}]},{label:"联系方式",prop:"phone",overHidden:!0,rules:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},{label:"电子邮箱",prop:"email",hide:!0,overHidden:!0},{label:"其他联系方式",prop:"otherPhone",overHidden:!0,rules:[{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},{label:"用户性别",prop:"sex",type:"radio",dataType:"number",dicData:[],hide:!0,props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择性别",trigger:"blur"}]},{label:"用户生日",type:"date",prop:"birthday",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",hide:!0},{label:"账号状态",prop:"statusName",hide:!0,display:!1}]},{label:"职责信息",prop:"dutyInfo",icon:"el-icon-s-custom",column:[{label:"所属角色",prop:"roleId",type:"select",dicData:[{title:"客服专家",value:"1464227306195197954"},{title:"资深卖家",value:"1464227359223783426"}],props:{label:"title"},rules:[{required:!0,message:"请选择所属角色",trigger:"blur"}]},{label:"所属机构",prop:"deptId",type:"tree",dicData:[],props:{label:"title"},rules:[{required:!0,message:"请选择所属机构",trigger:"blur"}]},{label:"所属区域",prop:"region",type:"cascader",props:{label:"name",value:"code"},lazy:!0,lazyLoad:function(e,t){console.log("lazyLoad",e,t);var n=2,a=e.level,i=e.data||{},o=i.code,r=[];console.log("code",o);var l=function(){t((r||[]).map((function(e){return Object.assign(e,{leaf:a>=n})})))};0==a&&Object(s["getLazyList"])({parentCode:"00"}).then((function(e){console.log("1",e),r=e.data.data,l()})),1==a?Object(s["getLazyList"])({parentCode:o}).then((function(e){console.log("2",e),r=e.data.data,l()})):2==a?Object(s["getLazyList"])({parentCode:o}).then((function(e){console.log("3",e),r=e.data.data,l()})):l()}},{label:"显示排序",prop:"dispSort",type:"number",display:!0,align:"right",rules:[{required:!0,message:"请指定排序顺序",trigger:"blur"}]},{label:"心理职级",prop:"ranks",type:"select",display:!0,dataType:"number",dicData:[],props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择心理职级",trigger:"blur"}]},{label:"心理职称",prop:"title",type:"select",display:!0,dataType:"number",editDisabled:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},rules:[{required:!0,message:"请选择心理职称",trigger:"blur"}]},{label:"证书上传",prop:"certificate",type:"upload",display:!0,multiple:!0,listType:"picture-card",dataType:"string",action:"/api/blade-resource/oss/endpoint/put-file-attach",propsHttp:{res:"data",url:"link"},tip:"只能上传jpg/png文件，且不超过1M",hide:!0,span:24},{label:"擅长领域",prop:"domain",type:"select",display:!0,multiple:!0,dicData:[],props:{label:"dictValue",value:"dictKey"},span:24,rules:[{required:!0,message:"请选择所擅长领域",trigger:"blur"}]},{label:"个人简介",prop:"info",type:"textarea",display:!0,span:24,tip:"请输入200字以内",rules:[{required:!0,message:"请填写个人简介",trigger:"blur"}]},{label:"荣誉称号",prop:"honoraryTitle",type:"textarea",display:!0,span:24,tip:"请输入200字以内"},{label:"科研著作",prop:"researchWork",type:"textarea",display:!0,span:24,tip:"请输入200字以内"},{label:"头象上传",prop:"head",type:"upload",display:!0,listType:"picture-img",span:24,propsHttp:{res:"data",url:"link"},canvasOption:{text:"avue",ratio:.1},tip:"只能上传jpg/png文件，且不超过10M",action:"/api/blade-resource/oss/endpoint/put-file-attach",rules:[{required:!0,message:"请上传头相",trigger:"blur"}]},{label:"是否公开",prop:"isPublic",type:"switch",display:!0,dicData:[{label:"",value:1},{label:"",value:0}],value:0,rules:[{required:!0,message:"请选择是否公开",trigger:"blur"}]}]}]},data:[]}},watch:{},computed:{},mounted:function(){},created:function(){a=this,this.InitEnums(),this.onLoad(this.page)},methods:{InitEnums:function(){var e=this;Object(c["getDictionary"])({code:"sex"}).then((function(t){var n=e.findObject(e.option.column,"sex"),a=e.findObject(e.option.group,"sex");n.dicData=t.data.data,a.dicData=t.data.data})),Object(l["getDictionary"])({code:"psychological_rank"}).then((function(t){var n=e.findObject(e.option.column,"ranks"),a=e.findObject(e.option.group,"ranks");n.dicData=t.data.data,a.dicData=t.data.data})),Object(l["getDictionary"])({code:"psychological_title"}).then((function(t){var n=e.findObject(e.option.column,"title"),a=e.findObject(e.option.group,"title");n.dicData=t.data.data,a.dicData=t.data.data})),Object(l["getDictionary"])({code:"is_public"}).then((function(t){var n=e.findObject(e.option.column,"isPublic"),a=e.findObject(e.option.group,"isPublic");n.dicData=t.data.data,a.dicData=t.data.data})),Object(d["getDeptTree"])(u["a"].tenantId).then((function(t){e.enums.depts=t.data.data})),Object(l["getDictionary"])({code:"domain"}).then((function(t){e.enums.domain=t.data.data}))},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query),this.treeDeptId).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getUser"])(this.form.id).then((function(e){n.form=e.data.data,n.form.hasOwnProperty("region")&&(n.form.region=n.form.region.split(",")),n.form.hasOwnProperty("domain")&&(n.form.domain=n.form.domain.split(",")),n.form.hasOwnProperty("postId")&&(n.form.postId=n.form.postId.split(","))})),Object(d["getDeptTree"])(u["a"].tenantId).then((function(e){var t=n.findObject(n.option.group,"deptId");t.dicData=e.data.data})),Object(l["getDictionary"])({code:"domain"}).then((function(e){var t=n.findObject(n.option.group,"domain");t.dicData=e.data.data})),e()},treeFind:function(e,t){var n,a=p(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==t)return i;if(i.children){var o=this.treeFind(i.children,t);if(o)return o}}}catch(r){a.e(r)}finally{a.f()}return null},handleViewRow:function(e,t){this.$refs.crud.rowView(e,t)},handleEditRow:function(e,t){this.$refs.crud.rowEdit(e,t)},searchReset:function(){this.query={},this.query.roleId=this.userType,this.treeDeptId="",this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.query.roleId=this.userType,this.onLoad(this.page,this.query),t()},rePage:function(){this.page={pageSize:10,currentPage:1,total:0}},rowUpdate:function(e,t,n,a){var i=this;e.domain=e.domain.join(","),e.postId=e.postId.join(","),e.region=e.region.join(","),Object(r["update"])(e).then((function(){i.initFlag=!1,i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},handleChangeUserType:function(e){this.userType=e,this.query.roleId=e,this.rePage(),this.onLoad(this.page,this.query)},handlePlan:function(e,t){}}},m=g,v=(n("813f"),n("829d")),b=Object(v["a"])(m,i,o,!1,null,null,null);t["default"]=b.exports},e22e:function(e,t,n){"use strict";n("1e4b")},e62a:function(e,t,n){"use strict";n.r(t);n("3441");var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"source",fn:function(e){var n=e.row;return[t("div",{staticStyle:{"text-align":"center"}},[t("i",{class:n.source})])]}},{key:"sort",fn:function(n){var a=n.row;return[t("el-input-number",{attrs:{min:1,max:100},on:{change:function(t){return e.sortChange(a)}},model:{value:a.sort,callback:function(t){e.$set(a,"sort",t)},expression:"row.sort"}})]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[t("template",{slot:"menuLeft"},[e.permission.topmenu_delete?t("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.permission.topmenu_setting?t("el-button",{attrs:{size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleMenuSetting}},[e._v("菜单配置\n      ")]):e._e()],1)],2),t("el-dialog",{attrs:{title:"下级菜单配置","append-to-body":"",visible:e.box,width:"345px"},on:{"update:visible":function(t){e.box=t}}},[t("el-tree",{ref:"treeMenu",attrs:{data:e.menuGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.menuTreeObj,props:e.props}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.box=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("ac67"),n("32ea"),n("aa18"),n("982e"),n("1bc7"),n("f076")),r=n("5a17"),s=n("5880"),l=n("2457");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},box:!1,query:{},loading:!0,props:{label:"title",value:"key"},page:{pageSize:10,currentPage:1,total:0},selectionList:[],menuGrantList:[],menuTreeObj:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogWidth:900,dialogClickModal:!1,column:[{label:"菜单名",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名",trigger:"blur"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,iconList:l["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",slot:!0,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]}]},data:[]}},computed:d(d({},Object(s["mapGetters"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.topmenu_add,!1),viewBtn:this.vaildData(this.permission.topmenu_view,!1),delBtn:this.vaildData(this.permission.topmenu_delete,!1),editBtn:this.vaildData(this.permission.topmenu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},idsArray:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e}}),methods:{submit:function(){var e=this,t=this.$refs.treeMenu.getCheckedKeys();Object(r["grant"])(this.idsArray,t).then((function(){e.box=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var a=this;Object(r["add"])(e).then((function(){a.onLoad(a.page),a.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,a){var i=this;Object(r["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),a()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleMenuSetting:function(){var e=this;1===this.selectionList.length?(this.menuTreeObj=[],Object(r["grantTree"])().then((function(t){e.menuGrantList=t.data.data.menu,Object(r["getTopTree"])(e.ids).then((function(t){e.menuTreeObj=t.data.data.menu,e.box=!0}))}))):this.$message.warning("只能选择一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(r["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},sortChange:function(e){var t=this;Object(r["update"])(e).then((function(){t.onLoad(t.page)}),(function(e){window.console.log(e)}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(r["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=u,h=(n("e6f8"),n("829d")),f=Object(h["a"])(p,a,i,!1,null,null,null);t["default"]=f.exports},e6d0:function(e,t,n){},e6f8:function(e,t,n){"use strict";n("585b")},e9d8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"asked-questions"},[t("h-content")],1)},i=[],o=n("159f"),r={components:{hContent:o["default"]},name:"asked-questions"},s=r,l=(n("1f94"),n("829d")),c=Object(l["a"])(s,a,i,!1,null,"f03d8518",null);t["default"]=c.exports},edd0:function(e,t,n){"use strict";n.r(t);n("a450");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"experts"},[t("div",{staticClass:"title"},[t("div",[e._v("全部分类：")]),t("div",{staticClass:"type-list"},e._l(e.typeList,(function(n){return t("div",{key:n.value,class:{active:n.isCheck},on:{click:function(t){return e.changeType(n)}}},[e._v("\n          "+e._s(n.name)+"\n        ")])})),0)]),t("div",{staticClass:"content"},[t("div",{staticClass:"content-list"},[t("div",{staticClass:"image"},[e._v("图片")]),t("div",{staticClass:"right-content"},[e._m(0),e._m(1),t("div",{staticClass:"right-content-bottom"},[t("el-button",[e._v("立即咨询")]),e._m(2),e._m(3)],1)])])]),t("h-pagination",{attrs:{total:10}})],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-content-top"},[t("div",{staticClass:"name"},[e._v("张沈楠")]),t("img",{attrs:{src:"/img/portal/icon_senior.png"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-content-content"},[t("div",{staticClass:"right-content-content-top"},[t("div",{staticClass:"top_1"},[t("img",{attrs:{src:"/img/portal/icon_sex.png"}}),t("div",[e._v("女")])]),t("div",{staticClass:"top_1"},[t("img",{attrs:{src:"/img/portal/icon_title.png"}}),t("div",[e._v("国家二级心理咨询师")])]),t("div",{staticClass:"top_1"},[t("img",{attrs:{src:"/img/portal/icon_address.png"}}),t("div",[e._v("安徽省合肥市庐阳区")])])]),t("div",{staticClass:"right-content-content-content"},[e._v("擅长领域：专职心理辅导教师，发展与教育心理学硕士，取得国家二级心理咨询师和上海市学校中级心理辅导教师资格证书，上海高校\n心理咨询协会会员。参加过的心理咨询专题培训有：时间排列疗法、绘画治疗、家庭系统排列等...")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-content-bottom_1"},[t("img",{staticClass:"collect",attrs:{src:"/img/portal/icon_no_collect.png",alt:""}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-content-bottom_1"},[t("img",{staticClass:"line",attrs:{src:"/img/portal/icon_unline.png",alt:""}})])}],o=n("454e"),r={initData:function(){return{typeList:[{name:"人际交往",value:"1",isCheck:!1},{name:"学业压力",value:"2",isCheck:!1},{name:"恋爱关系",value:"3",isCheck:!1},{name:"情绪压力",value:"4",isCheck:!1},{name:"青少年心理",value:"5",isCheck:!1},{name:"孩子教育",value:"6",isCheck:!1},{name:"厌学叛逆",value:"7",isCheck:!1},{name:"恐惧紧张",value:"8",isCheck:!1},{name:"其他",value:"9",isCheck:!1}]}}},s={components:{hPagination:o["default"]},name:"experts",data:function(){return r.initData.call(this)},methods:{changeType:function(e){this.$set(e,"isCheck",!e.isCheck)}}},l=s,c=(n("367a"),n("829d")),d=Object(c["a"])(l,a,i,!1,null,"5d82fd53",null);t["default"]=d.exports},f072:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("avue-form",{ref:"form",attrs:{option:e.option,"upload-before":e.uploadBefore,"upload-after":e.uploadAfter},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],o=n("371f"),r=n("7208"),s={data:function(){return{form:{flowCategory:"",tenantId:"",flowFile:[],file:{}},option:{labelWidth:120,menuBtn:!1,column:[{label:"流程类型",prop:"flowCategory",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},row:!0,span:12,dataType:"number",rules:[{required:!0,message:"请选择流程类型",trigger:"blur"}]},{label:"流程模式",prop:"flowMode",type:"radio",dicData:[{label:"通用流程",value:1},{label:"定制流程",value:2}],value:1,row:!0,span:12,rules:[{required:!0,message:"请选择流程模式",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",multiple:!0,dicUrl:"/api/blade-system/tenant/select",props:{label:"tenantName",value:"tenantId"},display:!1,row:!0,span:12,rules:[{required:!0,message:"请选择所属租户",trigger:"blur"}]},{label:"附件上传",prop:"flowFile",type:"upload",loadText:"附件上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 bpmn20.xml 标准格式文件",action:"/api/blade-flow/manager/check-upload"}]}}},watch:{"form.flowMode":function(){var e=this;this.$refs.form.option.column.filter((function(t){"tenantId"===t.prop&&(t.display=2===e.form.flowMode)}))}},methods:{uploadBefore:function(e,t){this.$message.success("部署开始"),this.file=e,t()},uploadAfter:function(e,t,n){var a=this;return this.form.flowCategory?2!==this.form.flowMode||this.form.tenantId?e.success?void Object(o["deployUpload"])(Object(r["a"])(this.form.flowCategory),this.form.tenantId?this.form.tenantId.join(","):"",[this.file]).then((function(e){var i=e.data;i.success?t():(a.$message.error(i.msg),n())})):(this.$message.warning("请上传 bpmn20.xml 标准格式文件"),n(),!1):(this.$message.warning("清先选择对应租户"),n(),!1):(this.$message.warning("清先选择流程类型"),n(),!1)}}},l=s,c=n("829d"),d=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=d.exports},f100:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("basic-container",[t("h3",[e._v("这个页面会被 keep-alive")]),t("el-tag",[e._v("在下面的输入框输入任意字符后，切换到其它页面，再回到此页时输入框文字保留，证明被缓存")]),t("br"),t("br"),t("el-tag",[e._v("同时滚动下拉，返回时还会保持滚动条所在的位置")]),t("br"),t("br"),t("el-input",{attrs:{placeholder:"input here"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("div",{staticStyle:{height:"1000px"}})],1)},i=[],o={data:function(){return{value:""}}},r=o,s=n("829d"),l=Object(s["a"])(r,a,i,!1,null,null,null);t["default"]=l.exports},f73d:function(e,t,n){"use strict";n("ae84")},f75d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"platform-introduction"},[t("h-content")],1)},i=[],o=n("159f"),r={components:{hContent:o["default"]},name:"platform-introduction"},s=r,l=(n("8688"),n("829d")),c=Object(l["a"])(s,a,i,!1,null,"50aa2bca",null);t["default"]=c.exports},f989:function(e,t,n){},fa64:function(e,t,n){},fee4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"status-icon":"",rules:e.loginRules,model:e.loginForm,"label-width":"0"}},[e.tenantMode?t("el-form-item",{attrs:{prop:"tenantId"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.tenantId")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.tenantId,callback:function(t){e.$set(e.loginForm,"tenantId",t)},expression:"loginForm.tenantId"}},[t("i",{staticClass:"icon-quanxian",attrs:{slot:"prefix"},slot:"prefix"})])],1):e._e(),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.username")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[t("i",{staticClass:"icon-yonghu",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{size:"small",type:e.passwordType,"auto-complete":"off",placeholder:e.$t("login.password")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[t("i",{staticClass:"el-icon-view el-input__icon",attrs:{slot:"suffix"},on:{click:e.showPassword},slot:"suffix"}),t("i",{staticClass:"icon-mima",attrs:{slot:"prefix"},slot:"prefix"})])],1),this.website.captchaMode?t("el-form-item",{attrs:{prop:"code"}},[t("el-row",{attrs:{span:24}},[t("el-col",{attrs:{span:16}},[t("el-input",{attrs:{size:"small","auto-complete":"off",placeholder:e.$t("login.code")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}},[t("i",{staticClass:"icon-yanzhengma",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"login-code"},[t("img",{staticClass:"login-code-img",attrs:{src:e.loginForm.image},on:{click:e.refreshCode}})])])],1)],1):e._e(),t("el-form-item",[t("el-button",{staticClass:"login-submit",attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin.apply(null,arguments)}}},[e._v(e._s(e.$t("login.submit"))+"\n    ")])],1),t("el-dialog",{attrs:{title:"用户信息选择","append-to-body":"",visible:e.userBox,width:"350px"},on:{"update:visible":function(t){e.userBox=t}}},[t("avue-form",{attrs:{option:e.userOption},on:{submit:e.submitLogin},model:{value:e.userForm,callback:function(t){e.userForm=t},expression:"userForm"}})],1)],1)},i=[],o=(n("ac67"),n("1bc7"),n("32ea"),n("f076")),r=(n("aa18"),n("982e"),n("5880")),s=n("ccbe"),l=n("c24f"),c=n("0e0b");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"userlogin",data:function(){return{tenantMode:this.website.tenantMode,loginForm:{tenantId:"000000",deptId:"",roleId:"",username:"admin",password:"admin",type:"account",code:"",key:"",image:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},loginRules:{tenantId:[{required:!1,message:"请输入租户ID",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,message:"密码长度最少为6位",trigger:"blur"}]},passwordType:"password",userBox:!1,userForm:{deptId:"",roleId:""},userOption:{labelWidth:70,submitBtn:!0,emptyBtn:!1,submitText:"登录",column:[{label:"部门",prop:"deptId",type:"select",props:{label:"deptName",value:"id"},dicUrl:"/api/blade-system/dept/select",span:24,display:!1,rules:[{required:!0,message:"请选择部门",trigger:"blur"}]},{label:"角色",prop:"roleId",type:"select",props:{label:"roleName",value:"id"},dicUrl:"/api/blade-system/role/select",span:24,display:!1,rules:[{required:!0,message:"请选择角色",trigger:"blur"}]}]}}},created:function(){this.getTenant(),this.refreshCode()},mounted:function(){},watch:{"loginForm.deptId":function(){var e=this.findObject(this.userOption.column,"deptId");this.loginForm.deptId.includes(",")?(e.dicUrl="/api/blade-system/dept/select?deptId=".concat(this.loginForm.deptId),e.display=!0):e.dicUrl=""},"loginForm.roleId":function(){var e=this.findObject(this.userOption.column,"roleId");this.loginForm.roleId.includes(",")?(e.dicUrl="/api/blade-system/role/select?roleId=".concat(this.loginForm.roleId),e.display=!0):e.dicUrl=""}},computed:u({},Object(r["mapGetters"])(["tagWel","userInfo"])),props:[],methods:{refreshCode:function(){var e=this;this.website.captchaMode&&Object(l["getCaptcha"])().then((function(t){var n=t.data;e.loginForm.key=n.key,e.loginForm.image=n.image}))},showPassword:function(){""===this.passwordType?this.passwordType="password":this.passwordType=""},submitLogin:function(e,t){""!==e.deptId&&(this.loginForm.deptId=e.deptId),""!==e.roleId&&(this.loginForm.roleId=e.roleId),this.handleLogin(),t()},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(t){var n=e.$loading({lock:!0,text:"登录中,请稍后。。。",spinner:"el-icon-loading"});e.$store.dispatch("LoginByUsername",e.loginForm).then((function(){if(e.website.switchMode){var t=e.userInfo.dept_id,a=e.userInfo.role_id;if(t.includes(",")||a.includes(","))return e.loginForm.deptId=t,e.loginForm.roleId=a,e.userBox=!0,n.close(),!1}e.$router.push({path:e.tagWel.value}),n.close()})).catch((function(){n.close(),e.refreshCode()}))}}))},getTenant:function(){var e=this,t=Object(c["e"])();Object(s["info"])(t).then((function(t){var n=t.data;n.success&&n.data.tenantId&&(e.tenantMode=!1,e.loginForm.tenantId=n.data.tenantId,e.$parent.$refs.login.style.backgroundImage="url(".concat(n.data.backgroundUrl,")"))}))}}},h=p,f=n("829d"),g=Object(f["a"])(h,a,i,!1,null,null,null);t["default"]=g.exports}}]);